
<input type="hidden" class="sheet-tabstoggle" name="attr_sheetTab"  value="character">
<!-- <div style="padding-left: 90px; padding-bottom: 10px;"> -->
  <div class="sheet-main-buttons">
    <!-- <span class="sheet-gold-color sheet-subheading" name="attr_character_name" value="@{character_name}"></span> -->
    <button class="sheet-button-roll" type="action" name="act_character" >Character</button>           
    <button class="sheet-button-roll" type="action" name="act_equipped" >Equipped</button>
    <button class="sheet-button-roll" type="action" name="act_editskills" >Skills</button>
    <button class="sheet-button-roll" type="action" name="act_inventory" >Inventory</button>
    <button class="sheet-button-roll" type="action" name="act_editcharacter" >Edit Character</button>    
    <button class="sheet-button-roll" type="action" name="act_editpsionics" >Edit Psionics</button>    
    <button class="sheet-button-roll" type="action" name="act_editship" >Ship</button>        
    <button class="sheet-button-roll" type="action" name="act_npc" >NPC</button>        
</div>

<div class="sheet-character"> 
    <div class="sheet-grid-section">     

        <div class="sheet-core-stats sheet-block">        
            <h2 class="sheet-center" style="width: 120px;">ATTRIBUTES</h2>
            <button class="sheet-button-roll"  style="width: 75px" type="roll" value="&{template:default} {{name=@{character_name} Rolls Strength}} {{Strength Roll=[[1d20+@{strength}]]}}"> STR <span class="sheet-red-color"  name="attr_strength" title="Your max HP, including any artifiacts, cyb, etc. Also Includes Armor Attributes, if any (only for rolls, not HP)."></span></button>  
            <button class="sheet-button-roll"  style="width: 75px" type="roll" value="&{template:default} {{name=@{character_name} Rolls Dexterity}} {{Dexterity Roll=[[1d20+@{dexterity}]]}}"> DEX <span class="sheet-red-color" name="attr_dexterity" title="Your max HP, including any artifiacts, cyb, etc. Also Includes Armor Attributes, if any." ></span></button>           
            <button class="sheet-button-roll"  style="width: 75px" type="roll" value="&{template:default} {{name=@{character_name} Rolls Constitution}} {{Constitution Roll=[[1d20+@{constitution}]]}}"> CON <span class="sheet-red-color" name="attr_constitution" title="Your max HP, including any artifiacts, cyb, etc. Also Includes Armor Attributes, if any (only for rolls, not HP)"></span></button>
            <button class="sheet-button-roll"  style="width: 75px" type="roll" value="&{template:default} {{name=@{character_name} Rolls Intelligence}} {{Intelligence Roll=[[1d20+@{intelligence}]]}}"> INT <span class="sheet-green-color" name="attr_intelligence" title="Your max HP, including any artifiacts, cyb, etc. Also Includes Armor Attributes." ></span></button>                         
            <button class="sheet-button-roll"  style="width: 75px" type="roll" value="&{template:default} {{name=@{character_name} Rolls Wisdom}} {{Wisdom Roll=[[1d20+@{wisdom}]]}}"> WIS <span class="sheet-green-color"  name="attr_wisdom" title="Your max HP, including any artifiacts, cyb, etc ."></span></button>            
            <button class="sheet-button-roll"  style="width: 75px" type="roll" value="&{template:default} {{name=@{character_name} Rolls Charisma}} {{Charisma Roll=[[1d20+@{charisma}]]}}"> CHA <span class="sheet-green-color"  name="attr_charisma" title="Your max HP, including any artifiacts, cyb, etc."></span></button>                                                         
        </div>           
        
        <div class="sheet-core-health sheet-block" >
           <h2 class="sheet-center" style="width:640px;">Character Properties</h2>
            <!-- Row 1 -->
            <span class="sheet-blue-color sheet-center" style="font-size: smaller;">Current HP</span>
            <span class="sheet-blue-color sheet-center" style="font-size: smaller;">Max HP</span>
            <span class="sheet-blue-color sheet-center" style="font-size: smaller;">Temp HP</span>
            <span class="sheet-blue-color sheet-center" style="font-size: smaller;" title="Nat and Full P+">P+</span>                
            <span class="sheet-blue-color sheet-center" style="font-size: smaller;">Dmg-</span>
            <span class="sheet-blue-color sheet-center" style="font-size: smaller;">Regen</span>

            <span class="sheet-blue-color sheet-center" style="font-size: smaller;">Raw Energy</span>
            <span class="sheet-blue-color sheet-center" style="font-size: smaller;">Current LE</span>
            <span class="sheet-blue-color sheet-center" style="font-size: smaller;">Max LE</span>
            <span class="sheet-blue-color sheet-center" style="font-size: smaller;">Sphere</span>
          
            <!-- Row 2 -->
            <input class="sheet-inputfield75 sheet-red-color sheet-center" style="color: red; width:75px;" value="0" type="number" name="attr_current_health" title="Your current HP after taking damage">
            <span class="sheet-red-color sheet-center" name="attr_max_health" value="@{max_health}" title="Your max HP, including any artifiacts, cyb, etc." disabled></span>                     
            <input class="sheet-inputfield75 sheet-red-color sheet-center" style="color: red; width:75px;" name="attr_temp_health_bonus"  title="Any Temp Health" value="0" type="number">
            
            <span class="sheet-red-color sheet-center" title="Nat and Full P+">
              <span title="Natural P+" name="attr_nat_p_plus" value="@{nat_p_plus}"></span> | <span title="Full P+" name="attr_full_p_plus" value="@{full_p_plus}"></span>
            </span>                

            <span class="sheet-red-color sheet-center" title="Natural Damage Reduction" name="attr_nat_dmg_red" readonly></span>                                
            <span class="sheet-red-color sheet-center" title="Natural Regeneration including Body Discipline" name="attr_regen" readonly></span>                
            
            <span class="sheet-red-color sheet-center" title="Your Current Raw Energy Output" name="attr_raw_energy"></span>
            <input class="sheet-inputfield75 sheet-red-color" title="Your Current Life Energy" value="0" type="number" name="attr_life_energy" style="width: 60px; font-size: small;">
            <span class="sheet-red-color sheet-center" title="Your Maximum Life Energy" name="attr_life_energy_full" style="font-size: small;"></span> 
            <span class="sheet-red-color sheet-center" title="Your Sphere of Influence" name="attr_psi_sphere"></span>
            
            <!-- Row 3 -->
            <span class="sheet-green-color sheet-center" style="font-size: smaller;">Armor HP</span>
            <span class="sheet-green-color sheet-center" style="font-size: smaller;">Max HP</span>
            <span class="sheet-blue-color sheet-center" title="Your various Ranged Defense Scores, depending on if you are fully loaded. Full RDS | Unloaded RDS (Nat) | Just Armor RDS | Just Shield RDS.">RDS |N |A |S</span>
            <span class="sheet-blue-color sheet-center">P+</span>
            <span class="sheet-blue-color sheet-center" style="font-size: smaller;">Dmg-</span>
            <span class="sheet-blue-color sheet-center" style="font-size: smaller;">Regen</span>
            <span class="sheet-blue-color sheet-center" style="font-size: smaller;">CDS</span>
            <span class="sheet-blue-color sheet-center" style="font-size: smaller;">MDS</span>
            <span class="sheet-blue-color sheet-center" style="font-size: smaller;">Movement</span>
            <span class="sheet-blue-color sheet-center" style="font-size: smaller;">Actions</span>
            
            <!-- Row 4 -->
            <input class="sheet-inputfield75 sheet-center sheet-green-color" name="attr_equipped_armor_current_health" value="0" type="number" style="width: 75px" title="Your Armor's Current HP.">
            <span class="sheet-green-color sheet-center" name="attr_equipped_armor_max_health" title="Your armor's Hitpoint Maximum."></span>
            <span>
              <span class="sheet-red-color sheet-center" title="Fully Armored Ranged Defense. Shields, Deflection, Armor, Etc." type="number" name="attr_ranged_defense" value="@{ranged_defense}" ></span> |
              <span class="sheet-red-color sheet-center" title="Unarmored Ranged Defense" type="number" name="attr_ranged_nat_defense" value="@{ranged_nat_defense}" ></span> |
              <span class="sheet-red-color sheet-center" title="Just Armor Ranged Defense (includes NAT, but not shields)" type="number" name="attr_armored_ranged_def" value="@{armored_ranged_def}"></span> |
              <span class="sheet-red-color sheet-center" title="Just shields activated." type="number" name="attr_shields_shields_def" value="@{shields_shields_def}"></span>
            </span>
            
            <!-- <span class="sheet-red-color sheet-center" title="Armored Ranged Defense" value="0" type="number" name="attr_ranged_defense"style="font-size: large;"></span> -->
            <input class="sheet-inputfield52 sheet-red-color sheet-center" title="Armored P+ (Includes Nat P+)" value="0" type="number" name="attr_equipped_armor_p_plus">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" title="Armor Damage Reduction" value="0" type="number" name="attr_equipped_armor_damage_reduction">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" title="Armor Regeneration" value="0" type="number" name="attr_equipped_armor_regeneration">
            <span class="sheet-red-color sheet-center" title="Computer Defense Score" value="0" type="number" name="attr_cds" ></span>
            <span class="sheet-red-color sheet-center" title="Mental Defense Score" value="0" type="number" name="attr_mds" ></span>
            <span class="sheet-red-color sheet-center" title="Hero Movement, including Powered Armor and other bonuses." value="0" type="number" name="attr_movement" ></span>
            <span class="sheet-red-color sheet-center" title="Hero Actions" value="0" type="number" name="attr_actions" ></span>
            <!-- <button class="sheet-button-roll sheet-center"  type="roll" value="&{template:default} {{name=@{character_name} Mental Defense Saving Throw}} {{roll=[[1d20+@{wisdom}+@{psi_domination}+@{psi_deflection}+@{raw_energy}]]}}"><span class="sheet-center" style="font-size: small; padding-left: 5px;" name="attr_mds" value="attr_mds"></button> -->
            
            <!-- Row 5 -->
            <span class="sheet-pink-color sheet-center" style="font-size: smaller;">Shields HP</span>
            <span class="sheet-pink-color sheet-center" style="font-size: smaller;">Max HP</span>
            <span class="sheet-pink-color sheet-center" style="font-size: smaller;">Def+/-</span>
            <span class="sheet-pink-color sheet-center" style="font-size: smaller;">P+</span>
            <span class="sheet-pink-color sheet-center" style="font-size: smaller;">Dmg-</span>
            <span class="sheet-pink-color sheet-center" style="font-size: smaller;">Regen</span>
            <span class="sheet-pink-color sheet-center" style="font-size: smaller;">Watts</span>
            <span disabled></span>
            <span disabled></span>            
            <button class="sheet-button-roll sheet-center sheet-blue-color" style="width: 50px; font-size:small;" type="roll" value="&{template:default} {{name=@{character_name} Initiative}} {{Initiative Roll=[[1D20+@{init_bonus}&{tracker}]]}}">Init</button>

            <input class="sheet-inputfield75 sheet-center sheet-pink-color" name="attr_equipped_shields_current_hp" value="0" type="number" style="width: 75px" title="Your Shield's Current HP.">
            <span  class="sheet-center sheet-pink-color" name="attr_equipped_armor_shields_max_hp" value="0" type="number" style="width: 75px" title="Your Shields's Maximum HP."></span>
            <input class="sheet-inputfield52 sheet-center sheet-pink-color" name="attr_equipped_shields_defense_mod" value="0" type="number" title="Your Shields's Defense Modifier">
            <input class="sheet-inputfield52 sheet-center sheet-pink-color" name="attr_equipped_armor_shields_p_plus" value="0" type="number" title="Your Shields's P+.">
            <input class="sheet-inputfield52 sheet-center sheet-pink-color" name="attr_equipped_shields_damage_reduction" value="0" type="number" title="Your Shields's Damage Reduction.">
            <input class="sheet-inputfield52 sheet-center sheet-pink-color" name="attr_equipped_shields_regeneration" value="0" type="number" title="Your Shields's Regeneration. (Shields HP only)">
            <input class="sheet-inputfield52 sheet-center sheet-pink-color" name="attr_equipped_shields_power_consumption" value="0" type="number" title="Your Shields's Power Consumption.">
            <span disabled></span>
            <span disabled></span>
            <input class="sheet-inputfield sheet-center sheet-blue-color" style="width: 60px;" name="attr_misc_init_bonus" type="number" title="Misc Init Bonus">
        </div> 
        <div class="sheet-skill-headers">
          <span class="sheet-center sheet-gold-color sheet-center">Roll</span>
          <span class="sheet-center sheet-gold-color sheet-center">Skill Name</span>
          <span class="sheet-center sheet-gold-color sheet-center">Attribute</span>
          <span class="sheet-center sheet-gold-color sheet-center">Cyb</span>
          <span class="sheet-center sheet-gold-color sheet-center">Gen</span>
          <span class="sheet-center sheet-gold-color sheet-center">Psionic</span>
          <span class="sheet-center sheet-gold-color sheet-center">Misc</span>
          <span class="sheet-center sheet-gold-color sheet-center">Temp</span>
          <span class="sheet-center sheet-gold-color sheet-center">Art</span>                          
          <span class="sheet-center sheet-gold-color sheet-center">Level</span>        
          <span class="sheet-center sheet-gold-color sheet-center">Points</span>
          <span class="sheet-center sheet-gold-color sheet-center">Dice</span>
        </div>
    </div>
    <fieldset class="repeating_skills">
      <div class="sheet-core-skills sheet-blue-color" display="contents" style="width: 827px;">        
          <button class="sheet-button-roll sheet-center" style="width: 60px;"  type="roll" value="&{template:default} {{name=@{skillname}}} {{roll=[[1d20+@{skillattribute}+@{skillvibonus}+@{skillgeneticbonus}+@{skillpsionic}+@{skillmiscbonus}+@{skilltempbonus}+@{skillartifactbonus}+@{skillnamelevel}]]}} {{Dice=[[@{skilldice}]]}} {{Attribute=@{skillattribute}}} {{Cybernetic Bonus=@{skillvibonus}}} {{Genetic Bonus=@{skillgeneticbonus}}} {{Psionic=@{skillpsionic}}} {{Miscelaneous Bonus=@{skillmiscbonus}}} {{Temp Bonus=@{skilltempbonus}}} {{Artifact Bonus=@{skillartifactbonus}}} {{Skill Level=@{skillnamelevel}}"></button>
          <input class="sheet-inputfield120 sheet-blue-color sheet-center" type="text" name="attr_skillname" value="">
          <select class="sheet-dropdown sheet-inputfield sheet-blue-color sheet-center" name="attr_skillattribute" style="font-size: x-small; width: 90px;"> 
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Strength +@{strength}">Strength</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Dexterity +@{dexterity}">Dexterity</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Constitution +@{constitution}">Constitution</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Intelligence +@{intelligence}">Intelligence</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Wisdom +@{wisdom}">Wisdom</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Charisma +@{charisma}">Charisma</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{attribute_dropdown_none}">None</option>
          </select>          
          <input class="sheet-inputfield52 sheet-dropdown sheet-blue-color sheet-center" value="0" type="number" name="attr_skillvibonus">                        
          <input class="sheet-inputfield52 sheet-dropdown sheet-blue-color sheet-center" value="0" type="number" name="attr_skillgeneticbonus">          
          <select class="sheet-inputfield  sheet-dropdown sheet-blue-color sheet-center" name="attr_skillpsionic" style="font-size: x-small; width: 90px;"> 
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Body Disc +@{psi_body_discipline_level}">Body Disc</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Causation +@{psi_causation_level}">Causation</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Clairvoyance +@{psi_clairvoyance_level}">Clairvoyance</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Deflection +@{psi_deflection_level}">Deflection</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Domination +@{psi_domination_level}">Domination</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Energy Communion +@{psi_energy_communion_level}">Energy</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Molecular Alteration +@{psi_molecular_alteration_level}">Molecular</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Pyrokinesis +@{psi_pyrokinesis_level}">Pyro</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Subatomic Alteration +@{psi_subatomic_alteration_level}">Subatomic</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Telekinesis +@{psi_telekinesis_level}">Telekinesis</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Anti Psionics +@{psi_anti_psionics_level}">Anti Psi</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="0 @{attribute_dropdown_none}">None</option>
          </select>          
          <input class="sheet-inputfield52 sheet-dropdown sheet-blue-color sheet-center" value="0" type="number" name="attr_skillmiscbonus">  
          <input class="sheet-inputfield52 sheet-dropdown sheet-blue-color sheet-center" value="0" type="number" name="attr_skilltempbonus">                        
          <input class="sheet-inputfield52 sheet-dropdown sheet-blue-color sheet-center" value="0" type="number" name="attr_skillartifactbonus">                                                
          <input class="sheet-inputfield52 sheet-blue-color sheet-center sheet-center"   value="0" type="number" name="attr_skillnamelevel" title="This should be 1/5 the points field, rounded down.">
          <input class="sheet-inputfield52 sheet-dropdown sheet-blue-color sheet-center" value="0" type="number" name="attr_skillpoints">                                    
          <input class="sheet-inputfield sheet-dropdown sheet-blue-color sheet-center"   value="0" type="text" name="attr_skilldice" style="font-size: x-small; width: 75px;" title="Dice, if any, are rolled from here.">
      </div>
    </fieldset>          
  </div>

<div class="sheet-equipped">
    <div class="sheet-equipped-grid">
      <div class="sheet-equipped-armor sheet-block" style="width: 822px;"> 
          <h2 style="width: 822px;">Equipped Armor</h2>                                    
<!-- ROW 1 -->
              <span class="sheet-blue-color sheet-center">Armor Name</span>    
              <span class="sheet-red-color sheet-center">Current HP</span>             
              <span class="sheet-red-color sheet-center">Max HP</span>                
              <span class="sheet-blue-color sheet-center">P+</span>                    
              <span class="sheet-blue-color sheet-center" title="Damage Reduction per turn.">Dmg-</span>
              <span class="sheet-blue-color sheet-center" title="Always Per Hour.">Regen</span>
              <span class="sheet-blue-color sheet-center" title="Bonus to defense from design or electronics.">Def+</span>                
              <span class="sheet-blue-color sheet-center" title="Bonus to defense of EMP or other electrical attacks such as hacking.">CDS</span>
              <span class="sheet-green-color sheet-center" title="This adds to or subtracts from your attribute. Anything adding is powered armor.">STR</span>                
              <span class="sheet-green-color sheet-center" title="This adds to or subtracts from your attribute. Anything adding is powered armor.">DEX</span>                
              <span class="sheet-green-color sheet-center" title="This adds to or subtracts from your attribute. Anything adding is powered armor.">CON</span>                
              <span class="sheet-blue-color sheet-center" title="This adds to or subtracts from your attribute. Anything adding is powered armor.">Move+</span>        

<!-- ROW 2 -->                                
              <input class="sheet-inputfield120 sheet-center sheet-blue-color" name="attr_equipped_armor_name" value="" type="text" title="Name for your armor.">
              <input class="sheet-inputfield120 sheet-center sheet-blue-color" name="attr_equipped_armor_name" type="hidden" disabled>
              <input class="sheet-inputfield75 sheet-center sheet-red-color"   name="attr_equipped_armor_current_health" value="0" type="text" style="width: 75px;" title="Your Armor's Current HP MONKEYS.">   
              <input class="sheet-inputfield75 sheet-center sheet-red-color"   name="attr_equipped_armor_max_health" type="text" title="Your Armor's HP Maximum." >
              <input class="sheet-inputfield52 sheet-center sheet-blue-color"  name="attr_equipped_armor_p_plus" value="0" type="number" title="Your armor's P+ Rating.">                                
              <input class="sheet-inputfield52 sheet-center sheet-blue-color"  name="attr_equipped_armor_damage_reduction" value="0" type="text" title="Your armor's Damage Reduction.">
              <input class="sheet-inputfield52 sheet-center sheet-blue-color"  name="attr_equipped_armor_regeneration" value="0" type="text" title="Your armor's Regeneration.">
              <input class="sheet-inputfield52 sheet-center sheet-blue-color"  name="attr_equipped_def_bonus" value="0" type="text" title="Your armor's Defense Bonus.">    
              <input class="sheet-inputfield52 sheet-center sheet-blue-color"  name="attr_equipped_armor_cds" value="0" type="text" title="Your armor's Computer Defense Score.">              
              <input class="sheet-inputfield52 sheet-center sheet-green-color" name="attr_equipped_armor_strength"  value="0" type="text" title="Your armor's Strength Score.">
              <input class="sheet-inputfield52 sheet-center sheet-green-color" name="attr_equipped_armor_dexterity" value="0" type="text" title="Your armor's Dexterity Score">
              <input class="sheet-inputfield52 sheet-center sheet-green-color" name="attr_equipped_armor_constitution" value="0" type="text" title="Your armor's Constitution Score.">                
              <input class="sheet-inputfield52 sheet-center sheet-blue-color"  name="attr_equipped_armor_movement" value="0" type="text" title="Your armor's movement in 5' increments.">

<!-- ROW 3 -->                 
              <span class="sheet-blue-color sheet-center">Notes</span>                                         
              <span class="sheet-blue-color sheet-center" style="font-size: x-small">Hard Points</span>    
              <span class="sheet-blue-color sheet-center" style="font-size: x-small">Weight</span>             
              <span class="sheet-blue-color sheet-center" style="font-size: x-small">Misc</span>                
              <span class="sheet-blue-color sheet-center sheet-pink-color" style="font-size: x-small">Shield HP</span>           
              <span class="sheet-blue-color sheet-center sheet-pink-color" style="font-size: x-small">HP MAX</span>                
              <span class="sheet-blue-color sheet-center sheet-pink-color" style="font-size: x-small">Shield P+</span>
              <span class="sheet-blue-color sheet-center sheet-pink-color" style="font-size: x-small">Shield DR</span>   
              <span class="sheet-blue-color sheet-center sheet-pink-color" style="font-size: x-small">Shield Reg</span>   
              <span class="sheet-blue-color sheet-center sheet-pink-color" style="font-size: x-small">Shield Def</span>                
              <span class="sheet-blue-color sheet-center sheet-pink-color" style="font-size: x-small">Shield CDS</span>     
              <span class="sheet-blue-color sheet-center sheet-pink-color" style="font-size: x-small">Shields TL</span>                                     
<!-- ROW 4 -->
              <input class="sheet-inputfield120 sheet-center sheet-blue-color" name="attr_equipped_armor_notes" value="Edit Me" type="text" title="Notes about armor?">                   
              <input class="sheet-inputfield52 sheet-center sheet-blue-color" name="attr_equipped_armor_hard_point" value="0" type="text" title="Your armor's number of Hard Points.">   
              <input class="sheet-inputfield60 sheet-center sheet-blue-color" name="attr_equipped_armor_weight" value="0" type="text" title="Your armor's weight.">                     
              <input class="sheet-inputfield52 sheet-center sheet-blue-color" name="attr_equipped_armor_misc_1" value="Edit Me" type="text" title="Misc boon.">       
              <input class="sheet-inputfield60 sheet-center sheet-pink-color" name="attr_equipped_armor_current_shields" type="text" title="Current Shields HP">                                     
              <input class="sheet-inputfield60 sheet-center sheet-pink-color" name="attr_equipped_armor_shields_max_hp" value="0" type="text" title="Your shields maximum HP.">
              <input class="sheet-inputfield52 sheet-center sheet-pink-color" name="attr_equipped_armor_shields_p_plus" value="0" type="text" title="Your shields P+">               
              <input class="sheet-inputfield52 sheet-center sheet-pink-color" name="attr_equipped_armor_shields_damage_reduction" value="0" type="text" title="Shield Damage Reduction">                 
              <input class="sheet-inputfield52 sheet-center sheet-pink-color" name="attr_equipped_armor_shield_regen" value="0" type="text" title="Armor's Shields Regeneration (HP)">  
              <input class="sheet-inputfield52 sheet-center sheet-pink-color" name="attr_equipped_armor_shields_ranged_defense" value="0" type="text" title="Armor's Shields Defense Bonus (Deflector)">                               
              <input class="sheet-inputfield52 sheet-center sheet-pink-color" name="attr_equipped_shield_cds_bonus" value="0" type="text" title="Armor's Shields CDS Bonus">
              <input class="sheet-inputfield52 sheet-center sheet-white-color" name="attr_equipped_shields_tech_level" value="0" type="text" title="Shields Tech Level">   
      </div>    
      <div class="sheet-equipped-combat-melee sheet-block" style="width: 822px;">
        <h2 class="sheet-center" style="width:820px;">Melee Combat</h2>                    
            <b class="sheet-center sheet-blue-color">Style Name</b>
            <b class="sheet-center sheet-blue-color">Attribute</b>     
            <b class="sheet-center sheet-blue-color">Level</b>           
            <b class="sheet-center sheet-blue-color">Damage</b>
            <b class="sheet-center sheet-blue-color">Dmg +</b>
            <b class="sheet-center sheet-blue-color">Mult</b>
            <b class="sheet-center sheet-blue-color">P+ </b>
            <b class="sheet-center sheet-blue-color">Atk +</b>
            <b class="sheet-center sheet-blue-color">Def +</b>                   
            <input class="sheet-inputfield75 sheet-blue-color sheet-center" name="attr_combat_style_dr_name_1" type="text" style="font-size: smaller" title="Name your DR skills here">     
            <input class="sheet-inputfield75 sheet-blue-color sheet-center" name="attr_combat_style_dr_name_2" type="text" style="font-size: smaller" title="Name your DR skills here">     
            
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_combat_style_name" type="text" style="width: 100px;">
            <select class="sheet-dropdown sheet-blue-color sheet-center sheet-blue-color" name="attr_combat_style_attribute" title="Attack Roll Attribute." style="font-size: smaller; width: 90px;">
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{strength}">Strength</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{dexterity}">Dexterity</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{constitution}">Constitution</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{intelligence}">Intelligence</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{wisdom}">Wisdom</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{charisma}">Charisma</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{attribute_dropdown_none}">None</option>
            </select>
            <!-- DISPLAY ROW -->
            <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_combat_style_level" value="0" type="text">
            <input class="sheet-inputfield75 sheet-blue-color sheet-center" name="attr_combat_style_dmg_dice" value="DMG DICE" type="text" style="font-size:smaller;"> 
            <span class="sheet-blue-color sheet-center" name="attr_combat_style_dmg_bonus"></span>

            <input class="sheet-inputfield52 sheet-blue-color sheet-center"  type="text" name="attr_combat_style_dmg_mult" value="floor(@{combat_style_points}/@{combat_style_dmg_mult_cost})" disabled>
            <input class="sheet-inputfield52 sheet-blue-color sheet-center"  type="text" name="attr_combat_style_pen_plus" value="floor(@{combat_style_points}/@{combat_style_pen_plus_cost})" disabled="true">
            <input class="sheet-inputfield52 sheet-blue-color sheet-center"  type="text" name="attr_combat_style_atk_bonus" value="floor(@{combat_style_points}/@{combat_style_atk_bonus_cost})" disabled="true">
            <input class="sheet-inputfield52 sheet-blue-color sheet-center"  type="text" name="attr_combat_style_def_bonus" value="floor(@{combat_style_points}/@{combat_style_def_bonus_cost})" disabled="true">
            <input class="sheet-inputfield75 sheet-blue-color sheet-center"  type="text" name="attr_combat_style_dr" value="floor(@{combat_style_points}/@{combat_style_dr_1_cost})" disabled="true">
            <input class="sheet-inputfield75 sheet-blue-color sheet-center"  type="text" name="attr_combat_style_dr_2" value="floor(@{combat_style_points}/@{combat_style_dr_2_cost})" disabled="true">

            <button class="sheet-button-roll sheet-center" style="width:60px;" type="roll" value="&{template:default} {{name=@{combat_style_name} Attacks!}} {{attack=[[1D20+@{combat_style_attribute}+@{combat_style_atk_bonus}]]}} {{Damage=[[floor(@{combat_style_dmg_dice}+@{combat_style_dmg_bonus}+@{combat_style_dmg_attribute})*@{combat_style_dmg_mult}]]}} {{P+=[[@{combat_style_pen_plus}]]}} {{Damage Multiplier=[[@{combat_style_dmg_mult}]] }} {{@{combat_style_dr_name_1}=[[10+@{combat_style_dr}]]}} {{@{combat_style_dr_name_2}=[[10+@{combat_style_dr_2}]]}}"><span class="sheet-center" style="font-size: small;"> Attack</span></button>
            <button class="sheet-button-roll sheet-center" style="width:65px;" type="roll" value="&{template:default} {{name=@{combat_style_name} Defends!}} {{defend=[[1D20+@{combat_style_attribute}+@{combat_style_def_bonus}]]}}"><span class="sheet-center" style="font-size: small;"> Defend</span></button>       

            <button class="sheet-button-roll sheet-center" style="width:50px;" type="roll" value="&{template:default} {{name=@{character_name} Ranged Quick Attack}} {{Ranged Combat Attack=[[1D20+@{combat_ranged_atk_bonus}]] }} {{Damage=[[(@{combat_ranged_dmg_dice}+@{combat_ranged_dmg_bonus})*@{combat_ranged_dmg_mult}]]}} {{Multiplier=@{combat_ranged_dmg_mult}}} {{P+=@{combat_ranged_pen_plus}}} {{Attack Bonus=@{combat_ranged_atk_bonus}}} {{Range=@{combat_ranged_range}}}" title="This is for a generic quick ranged attack. This is a secondary attack blueprint. Just a button close to the melee."><span class="sheet-center sheet-green-color" style="font-size: small;"> Atk </span></button>
            
            <input class="sheet-inputfield75 sheet-green-color sheet-center" name="attr_combat_ranged_dmg_dice" type="text" style="font-size:smaller;">                                    
            <input class="sheet-inputfield52 sheet-green-color sheet-center" name="attr_combat_ranged_dmg_bonus" value="0" type="text" title="Damage Bonus (Manually Determine This)">
            <input class="sheet-inputfield52 sheet-green-color sheet-center" value="0" type="text" name="attr_combat_ranged_dmg_mult" title="Damage Multiplier (Manually Determine This)">
            <input class="sheet-inputfield52 sheet-green-color sheet-center" value="0" type="text" name="attr_combat_ranged_pen_plus" title="Ranged P+ (Manually Determine This)">
            <input class="sheet-inputfield52 sheet-green-color sheet-center" value="0" type="text" name="attr_combat_ranged_atk_bonus" title="Your attack bonus (manually determine this)">
            <input class="sheet-inputfield52 sheet-green-color sheet-center" value="0" type="text" name="attr_combat_ranged_range" title="Range In Feet">
            <input class="sheet-inputfield52 sheet-green-color sheet-center" value="0" type="text" name="attr_combat_ranged_current_ammo" title="Current Ammunition">
            <input class="sheet-inputfield52 sheet-green-color sheet-center" value="0" type="text" name="attr_combat_ranged_max_ammo" title="Max Ammunition">
      </div>        

      <div class="sheet-equipped-repeating-ranged sheet-block">
        <h2 class="sheet-center">Ranged Combat</h2>   
        <fieldset class="repeating_equippedweapons">                          
          <div class="sheet-equipped-ranged-weapons sheet-center">  
              <!-- WEAPON 1 HEADERS -->
              <button class="sheet-button-roll" style="width: 100px;" type="roll" value="&{template:default} {{name=@{character_name} attacks with @{equippedweaponname}}} {{Attack Roll=[[1d20+@{equippedweaponattribute}+@{equippedweapontohit}]] }} {{Damage=[[(@{equippedweapondamage}+@{equippedweaponbonusdamage})*@{equippedweapondamagemultiplier}]]}} {{P+=@{equippedweaponpplus}}} {{RF Damage=[[((@{equippedweapondamage}+@{equippedweaponbonusdamage})*@{equippedweapondamagemultiplier})*@{equippedweaponrf}]]}} {{RoF=@{equippedweaponrof}}} {{Ammo=@{equippedweaponammo}}} {{Tech Level=@{equippedweapontechlevel}}} {{Notes=@{equippedweaponnotesdata} }}"><span class="sheet-blue-color sheet-center" style="color:#278bce; font-size: small;">Fire Weapon</span></button>
              <b class="sheet-blue-color sheet-center" title="This is damage determined from weapon's Tech Level on the Dice Progression Chart.">Damage</b>
              <b class="sheet-blue-color sheet-center" title="Damage Multiplier based on Tech Level and blueprint.">Multi.</b>
              <b class="sheet-blue-color sheet-center" title="Any Bonus Damage before multiplier" style="width: 90px;">Damage+</b>
              <b class="sheet-blue-color sheet-center" title="Weapons Penetration Plus">P+</b>
              <b class="sheet-blue-color sheet-center" title="Weapon's possible Rate of Fire">RoF</b>
              <b class="sheet-blue-color sheet-center" title="Rapid Fire - fires all remained rounds. +10 To Hit, 50% damage">R.F.</b>
              <b class="sheet-blue-color sheet-center" title="Your Current Ammo (Your max ammo should be listed in notes)">Ammo</b>
              <b class="sheet-blue-color sheet-center" title="Your Weapon's Effective Range">Range</b>
              <b class="sheet-blue-color sheet-center" title="Your Weapons To Hit Bonus (TH+)">TH+</b>            
              <b class="sheet-blue-color sheet-center" title="Your Weapon's TL (For quick reference)">TL</b>
              
        
              <!-- WEAPON TOTALS -->            
              <input class="sheet-inputfield120 sheet-red-color sheet-center" name="attr_equippedweaponname" value="Weapon Name" title="Weapons Name" type="text">
              <input class="sheet-inputfield75 sheet-blue-color sheet-center" name="attr_equippedweapondamage" value="0" title="Damage Dice" type="text" style="font-size: smaller;">
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_equippedweapondamagemultiplier" value="0" title="Multiplier"  type="number">
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_equippedweaponbonusdamage" value="0" title="Bonus Damage" type="number">
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_equippedweaponpplus" value="0" title="Weapon's P+" type="number">
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_equippedweaponrof" value="0" title="Weapon's Rate of Fire" type="text">
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_equippedweaponrf" value="0" title="Rapid Fire fires all available ammo as a dice multiplier. If there are 8 shots left, then it is 1D8. If there are 20 shots left, then it is 1D20. The +TH is a bonus to this +1TH = 1D8+1, is the dice size." type="text">
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_equippedweaponammo" value="0" title="Ammo/Charges" type="number">
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_equippedweaponrange" value="0" title="Weapon's Effective Range" type="text">
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_equippedweapontohit" value="0" title="Weapons inherent bonus to hit" type="text">            
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_equippedweapontechlevel" value="1" title="Tech Level for quick reference" type="text">
              <select class="sheet-dropdown sheet-blue-color sheet-center sheet-blue-color" name="attr_equippedweaponattribute" title="Attack Roll Attribute.">
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{strength}">Strength</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{dexterity}">Dexterity</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{constitution}">Constitution</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{intelligence}">Intelligence</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{wisdom}">Wisdom</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{charisma}">Charisma</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{attributedropdownnone}">None</option>
              </select>        
              <b class="sheet-blue-color sheet-center">Notes:</b>
              <input class="sheet-inputfield" name="attr_equippedweaponnotesdata" title="Description of weapon, any notes, etc." type="text" style="column-span: 2; width: 555px; color:#278bce;">
          </div>
        </fieldset>     
      </div>        
    </div>
</div>
  
<div class="sheet-editskills">       
<div class="sheet-edit-skills-grid-section">

  <div class="sheet-edit-melee sheet-block" style="width: 827px;">
      <h2>Melee Combat Style (& blueprint)</h2>                    
          <b class="sheet-center sheet-blue-color">Style Name</b>
          <b class="sheet-center sheet-blue-color">Attribute</b>                          
          <b class="sheet-center sheet-blue-color">Dice</b>
          <b class="sheet-center sheet-blue-color">Dmg +</b>
          <b class="sheet-center sheet-blue-color">Mult</b>
          <b class="sheet-center sheet-blue-color">P+ </b>
          <b class="sheet-center sheet-blue-color">Atk +</b>
          <b class="sheet-center sheet-blue-color">Def +</b>                   
          <input class="sheet-inputfield60 sheet-blue-color sheet-center" name="attr_combat_style_dr_name_1" value="DR 1" style="font-size: smaller" title="Name your DR skills here">     
          <input class="sheet-inputfield60 sheet-blue-color sheet-center" name="attr_combat_style_dr_name_2" value="DR 2" style="font-size: smaller" title="Name your DR skills here">     
          <b class="sheet-center sheet-blue-color">Level</b>
          <b class="sheet-center sheet-blue-color">Points</b>
          <!-- ROW 2 -->
          <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_combat_style_name" type="text">
          <select class="sheet-dropdown sheet-blue-color sheet-center sheet-blue-color" name="attr_combat_style_attribute" title="Attack Roll Attribute." style="font-size: x-small;">
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{strength}">Strength</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{dexterity}">Dexterity</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{constitution}">Constitution</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{intelligence}">Intelligence</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{wisdom}">Wisdom</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{charisma}">Charisma</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{attribute_dropdown_none}">None</option>
          </select>
          <!-- DISPLAY ROW -->          
          <input class="sheet-inputfield60 sheet-red-color sheet-center" name="attr_combat_style_dmg_dice" value="1d4" type="text" style="font-size: smaller;"/>
          <span class="sheet-red-color sheet-center" name="attr_combat_style_dmg_bonus" value="@{combat_style_dmg_bonus}" title="Your Combat Dmg Bonus."></span>
          <span class="sheet-red-color sheet-center" name="attr_combat_style_dmg_mult" value="@{combat_style_dmg_mult}" title="Your Combat Damage Multiplier"></span>
          <span class="sheet-red-color sheet-center"  type="number" name="attr_combat_style_pen_plus" value="@{combat_style_pen_plus}" title="Your Combat Style P+"></span> <!-- P+ -->
          <span class="sheet-red-color sheet-center"  type="number" name="attr_combat_style_atk_bonus" value="@{combat_style_atk_bonus}" title="Your Combat Style Attack Bonus"></span> <!-- ATK BONUS -->
          <span class="sheet-red-color sheet-center"  type="number" name="attr_combat_style_def_bonus" value="@{combat_style_def_bonus}" title="Your Combat Style Defense Bonus"></span> <!-- DEF BONUS -->                
          <span class="sheet-red-color sheet-center"  type="number" name="attr_combat_style_dr" value="@{combat_style_dr}" title="Your Combat DR"></span> <!-- DR 1 -->
          <span class="sheet-red-color sheet-center"  type="number" name="attr_combat_style_dr_2" value="@{combat_style_dr_2}" title="Your Combat 2nd DR"></span> <!-- DR 2 -->
          <span class="sheet-red-color sheet-center" name="attr_combat_style_level"></span> 
          <input class="sheet-inputfield75 sheet-blue-color sheet-center" name="attr_combat_style_points" value="0" type="number" style="font-size:smaller; width: 52px;"> <!-- POINTS -->
                   
          <!-- INPUT CALCULATIONS ROW --- HIDDEN -->                   

          <!-- COST PER BONUS ROW -->
          <b class="sheet-center sheet-blue-color" style="font-size: smaller;">Dmg Attribute</b>
          <select class="sheet-dropdown sheet-blue-color sheet-center sheet-blue-color" name="attr_combat_style_dmg_attribute" title="Damage attribute." style="font-size: x-small;">
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{strength}">Strength</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{dexterity}">Dexterity</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{constitution}">Constitution</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{intelligence}">Intelligence</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{wisdom}">Wisdom</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{charisma}">Charisma</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{attribute_dropdown_none}">None</option>
          </select>

          <!-- <span class="sheet-blue-color sheet-center" style="font-size: small;" title="How many levels to gain bonus.">Cost</span> -->
          <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_combat_style_dmg_dice_cost">
          <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_combat_style_dmg_bonus_cost"  style="font-size: smaller;" value="0" type="text">
          <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_combat_style_dmg_mult_cost"  value="0" type="text">
          <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_combat_style_pen_plus_cost"  value="0" type="text">
          <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_combat_style_atk_bonus_cost"  value="0" type="text">
          <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_combat_style_def_bonus_cost"  value="0" type="text">
          <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_combat_style_dr_1_cost"  value="0" type="text">
          <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_combat_style_dr_2_cost"  value="0" type="text">
          <span class="sheet-center sheet-blue-color">Cost:</span>
          <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_combat_style_progression"  value="16" type="text">
          <!-- <select class="sheet-dropdown sheet-center" name="attr_combat_style_progression" title="Progression Difficulty. Level Point Cost." style="font-size: small; width: 52px;">
            <option class="sheet-dropdown sheet-white-color" style="background-color:#000005;" value="1">1</option>
            <option class="sheet-dropdown sheet-white-color" style="background-color:#000005;" value="2">2</option>
            <option class="sheet-dropdown sheet-white-color" style="background-color:#000005;" value="3">3</option>
            <option class="sheet-dropdown sheet-white-color" style="background-color:#000005;" value="4">4</option>
            <option class="sheet-dropdown sheet-white-color" style="background-color:#000005;" value="5" selected>5</option>
            <option class="sheet-dropdown sheet-white-color" style="background-color:#000005;" value="10">10</option>
          </select> -->
          <button class="sheet-button-roll sheet-center" style="width:60px;" type="roll" value="&{template:default} {{name=@{combat_style_name} Attacks!}} {{attack=[[1D20+@{combat_style_attribute}+@{combat_style_atk_bonus_cost}]]}} {{Damage=[[floor(@{combat_style_dmg_dice}+@{combat_style_dmg_bonus}+@{combat_style_dmg_attribute})*@{combat_style_dmg_mult}]]}} {{P+=[[@{combat_style_pen_plus}]]}} {{@{combat_style_dr_name_1}=[[10+@{combat_style_dr}]]}} {{@{combat_style_dr_name_2}=[[10+@{combat_style_dr_2}]]}} {{Notes=@{melee_style_notes}}} {{RE / LE=@{melee_style_re} / @{melee_style_le}}}"><span style="font-size: small;"> Attack</span></button>
          <button class="sheet-button-roll sheet-center" style="width:60px;" type="roll" value="&{template:default} {{name=@{character_name} Defends with @{combat_style_name} }} {{defend=[[1D20+@{combat_style_attribute}+@{combat_style_def_bonus}]]}}"><span style="font-size: small"> Defend</span></button>            
          <span class="sheet-blue-color sheet-center"> Notes:</span>
          <input class="sheet-inputfield200 sheet-blue-color sheet-center" style="width: 270px; font-size: smaller; text-align: left;" type="text" name="attr_melee_style_notes">
          <span disabled></span>
          <span disabled></span>
          <span disabled></span>
          <span disabled></span>
          <span class="sheet-blue-color sheet-center"> RE: </span>
          <input class="sheet-inputfield52 sheet-blue-color sheet-center" type="text" name="attr_melee_style_re" value="0">
          <span class="sheet-blue-color sheet-center"> LE: </span>
          <input class="sheet-inputfield52 sheet-blue-color sheet-center" type="text" name="attr_melee_style_le" value="0">
  </div>
          
  <div class="sheet-edit-skill-headers">
      <span class="sheet-center sheet-gold-color sheet-center">Roll</span>
      <span class="sheet-center sheet-gold-color sheet-center">Skill Name</span>
      <span class="sheet-center sheet-gold-color sheet-center">Attribute</span>
      <span class="sheet-center sheet-gold-color sheet-center">Cyb</span>
      <span class="sheet-center sheet-gold-color sheet-center">Gen</span>
      <span class="sheet-center sheet-gold-color sheet-center">Psionic</span>
      <span class="sheet-center sheet-gold-color sheet-center">Misc</span>
      <span class="sheet-center sheet-gold-color sheet-center">Temp</span>
      <span class="sheet-center sheet-gold-color sheet-center">Art</span>                          
      <span class="sheet-center sheet-gold-color sheet-center">Level</span>        
      <span class="sheet-center sheet-gold-color sheet-center">Points</span>
      <span class="sheet-center sheet-gold-color sheet-center">Dice</span>
  </div>           
  
      <fieldset class="repeating_skills">
          <div class="sheet-edit-repeating-skills sheet-center">          
            <button class="sheet-button-roll sheet-center" style="width: 60px;"  type="roll" value="&{template:default} {{name=@{skillname}}} {{roll=[[1d20+@{skillattribute}+@{skillvibonus}+@{skillgeneticbonus}+@{skillpsionic}+@{skillmiscbonus}+@{skilltempbonus}+@{skillartifactbonus}+@{skillnamelevel}]]}} {{Dice=[[@{skilldice}]]}} {{Attribute=@{skillattribute}}} {{Cybernetic Bonus=@{skillvibonus}}} {{Genetic Bonus=@{skillgeneticbonus}}} {{Psionic=@{skillpsionic}}} {{Miscelaneous Bonus=@{skillmiscbonus}}} {{Temp Bonus=@{skilltempbonus}}} {{Artifact Bonus=@{skillartifactbonus}}} {{Skill Level=@{skillnamelevel}}"></button>
            <input class="sheet-inputfield120 sheet-blue-color sheet-center" type="text" name="attr_skillname" value="">
            <select class="sheet-dropdown sheet-inputfield sheet-blue-color sheet-center" name="attr_skillattribute" style="font-size: x-small; width: 90px;"> 
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Strength +@{strength}">Strength</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Dexterity +@{dexterity}">Dexterity</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Constitution +@{constitution}">Constitution</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Intelligence +@{intelligence}">Intelligence</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Wisdom +@{wisdom}">Wisdom</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Charisma +@{charisma}">Charisma</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{attribute_dropdown_none}">None</option>
            </select>          
            <input class="sheet-inputfield52 sheet-dropdown sheet-blue-color sheet-center" value="0" type="number" name="attr_skillvibonus">                        
            <input class="sheet-inputfield52 sheet-dropdown sheet-blue-color sheet-center" value="0" type="number" name="attr_skillgeneticbonus">          
            <select class="sheet-inputfield  sheet-dropdown sheet-blue-color sheet-center" name="attr_skillpsionic" style="font-size: x-small; width: 90px;"> 
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Body Disc +@{psi_body_discipline_level}">Body Disc</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Causation +@{psi_causation_level}">Causation</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Clairvoyance +@{psi_clairvoyance_level}">Clairvoyance</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Deflection +@{psi_deflection_level}">Deflection</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Domination +@{psi_domination_level}">Domination</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Energy Communion +@{psi_energy_communion_level}">Energy</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Molecular Alteration +@{psi_molecular_alteration_level}">Molecular</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Pyrokinesis +@{psi_pyrokinesis_level}">Pyro</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Subatomic Alteration +@{psi_subatomic_alteration_level}">Subatomic</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Telekinesis +@{psi_telekinesis_level}">Telekinesis</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Anti Psionics +@{psi_anti_psionics_level}">Anti Psi</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="NONE @{attribute_dropdown_none}">None</option>
            </select>          
            <input class="sheet-inputfield52 sheet-dropdown sheet-blue-color sheet-center" value="0" type="number" name="attr_skillmiscbonus">  
            <input class="sheet-inputfield52 sheet-dropdown sheet-blue-color sheet-center" value="0" type="number" name="attr_skilltempbonus">                        
            <input class="sheet-inputfield52 sheet-dropdown sheet-blue-color sheet-center" value="0" type="number" name="attr_skillartifactbonus">                                                
            <input class="sheet-inputfield52 sheet-blue-color sheet-center sheet-center"   value="0" type="number" name="attr_skillnamelevel" title="This should be 1/5 the points field, rounded down.">
            <input class="sheet-inputfield52 sheet-dropdown sheet-blue-color sheet-center" value="0" type="number" name="attr_skillpoints">                                    
            <input class="sheet-inputfield sheet-dropdown sheet-blue-color sheet-center"   value="0" type="text" name="attr_skilldice" style="font-size: x-small; width: 75px;" title="Dice, if any, are rolled from here.">                                    
          </div>          
      </fieldset>          
  </div>
</div>            

<div class="sheet-inventory">
    <div> <!-- MONEY AT TOP -->
        <!-- Galactic Credits -->
        <input class="sheet-inputfield sheet-purple-color" type="hidden" name="attr_galactic_credits_header" value="Galactic Credits">            
        <span class="sheet-purple-color" name="attr_galactic_credits_header" value="attr_galactic_credits_header" style="padding-left:7em;"></span>
        <input class="sheet-inputfield sheet-purple-color" style="width:10em;" value="0" type="number" title="Galactic Credits" name="attr_galactic_credits">        
        <!-- Gold Credits -->
        <input class="sheet-inputfield sheet-gold-color" type="hidden" name="attr_gold_credits_header" value="Gold Credits">            
        <span class="sheet-gold-color" name="attr_gold_credits_header" value="attr_gold_credits_header"></span>
        <input class="sheet-inputfield sheet-gold-color" style="width:10em;" value="0" type="number" title="Gold Credits" name="attr_gold_credits"> 
        <!-- Iron Credits -->
        <input class="sheet-inputfield sheet-silver-color" type="hidden" name="attr_iron_credits_header" value="Iron Credits">            
        <span class="sheet-silver-color" name="attr_iron_credits_header" value="attr_iron_credits_header"></span>
        <input class="sheet-inputfield sheet-silver-color" style="width:10em;" value="0" type="number" title="Iron Credits" name="attr_iron_credits"> 
    </div>     

    <div class="sheet-edit-inventory-grid-section">
        <!-- Hidden inputs to display the sections -->
        <input type="hidden" name="attr_armor-display" class="sheet-display_toggle" value="on">
        <input type="hidden" name="attr_melee-display" class="sheet-display_toggle" value="on">
        <input type="hidden" name="attr_ranged-display" class="sheet-display_toggle" value="on">
        <input type="hidden" name="attr_explosives-display" class="sheet-display_toggle" value="on">
        <input type="hidden" name="attr_items-display" class="sheet-display_toggle" value="on">
        <input type="hidden" name="attr_artifacts-display" class="sheet-display_toggle" value="on">
        <input type="hidden" name="attr_contacts-display" class="sheet-display_toggle" value="on">
            
        <div class="sheet-inventory-armor">
            <fieldset class="repeating_armor" display="grid" style="padding-top: 50px;">                
                <div class="sheet-edit-armor-entries sheet-block-2px" style="padding-top:5px;">
                    <!-- <span class="sheet-center sheet-gold-color" style="padding-left:385px;">ARMOR</span> -->
                    <h2>Armor | Shields</h2>
                    <!-- HEADERS -->  
                    <h3>Name</h3>
                    <h3>T.L.</h3>
                    <h3>Def</h3>
                    <h3>Armor HP</h3>            
                    <h3>Mult</h3>
                    <h3>P+</h3>
                    <h3>Dmg-</h3>                
                    <h3>Regen</h3>
                    <h3>CDS</h3>
                    <h3>STR</h3>
                    <h3>DEX</h3>
                    <h3>CON</h3>
                    <h3>Move</h3>
                    <h3>Misc</h3>

                    <!-- DISPLAY ROW -->
                    <input class="sheet-inputfield sheet-red-color sheet-center"  name="attr_armorname" style="width: 100px; font-size: smaller" type="text" title="A name for your armor or shields."/>     
                    <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_armortechlevel" value="16" type="number" title="The sum of all property Tech Levels."/>     
                    <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_armordefbonus" value="[[floor((@{armortechlevel} / @{armordefcost}) + @{armorartifactdefbonus}) ]]" type="number" title="Armor's Defense Score bonus." style="width: 45px;" disabled/>
                    <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_armorhealthmax" value="[[floor(((@{armortechlevel} / @{armorhealthmaxcost}) * @{armortechlevel}) * @{armorhealthmult})]]" type="text" title="Armor Health equals 10hp per TL" disabled/>     
                    <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_armorhealthmult" value="[[floor(@{armortechlevel} / @{armorhealthmultcost} +@{armorartifacthpmult})]]" type="number" title="Armor Multiplier when rolling HP Dice." style="width: 45px;" disabled/>                 
                    <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_armorpplus" value="[[floor(@{armortechlevel} / @{armorppluscost} +@{armorartifactpplusbonus})]]" title="Armor Penetration Plus" style="width: 45px;" disabled/>     
                    <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_armordamagereduction" value="[[floor(@{armortechlevel} / @{armordamagereductioncost}*10 +@{armorartifactdamagereductionbonus}*10)]]" title="Armor Damage Reduction"  style="width: 45px;" disabled/>                         
                    <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_armorregen" value="[[floor(@{armortechlevel} / @{armorregencost}) +@{armorartifactregenbonus}]]" title="Armor Regeneration per turn" style="width: 45px;" disabled/>     

                    <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_armorcds" value="[[floor(@{armortechlevel} / @{armorcdscost})]]" title="Armor Computer Defense Score" style="width: 45px;" disabled/>     
                    <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_armorstrength" value="floor(@{armortechlevel}/@{armorstrengthcost})" title="Armor Strength" style="width: 45px;" disabled/>     
                    <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_armordexterity" value="floor(@{armortechlevel}/@{armordexteritycost})" title="Armor Dexterity" style="width: 45px;" disabled/>     
                    <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_armorconstitution" value="floor(@{armortechlevel}/@{armorconstitutioncost})" title="Armor Constitution" style="width: 45px;" disabled/>     
                    <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_armormovement" value="floor(3+(@{armortechlevel}/@{armormovementcost}/5))" title="Armor Movement measured in squares, or 5 foot units." style="width: 45px;" disabled/>   
                    <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_armormisc" value="0" type="number" title="Misc" disabled/>   
                    
                    <!-- COST PER BONUS ROW     -->           
                    <span class="sheet-grey-color sheet-center sub-heading" style="font-size: smaller;" title="Defaults in place">Armor Dice D.P.C.</span>
                    <span disabled></span>
                    <!-- <input class="sheet-inputfield sheet-silver-color sheet-center" value="0" type="number" name="attr_armorhealthmaxcost" value="0" style="width: 75px;" title="Armor Dice cost in tech levels"/> -->
                    <input class="sheet-inputfield sheet-silver-color sheet-center" type="number" name="attr_armordefcost" value="16" title="Armor Defense Score cost in tech levels"/>                             
                    <input class="sheet-inputfield sheet-silver-color sheet-center" type="number" name="attr_armorhealthmaxcost" value="16" title="Armor Dice cost in tech levels"/>
                    <input class="sheet-inputfield sheet-silver-color sheet-center" type="number" name="attr_armorhealthmultcost" value="16" title="Armor Penetration Plus cost in Tech Levels"/>                 
                    <input class="sheet-inputfield sheet-silver-color sheet-center" type="number" name="attr_armorppluscost" value="16" title="Armor Penetration Plus cost in Tech Levels"/>     
                    <input class="sheet-inputfield sheet-silver-color sheet-center" type="number" name="attr_armordamagereductioncost" value="16" title="Armor Damage Reduction cost in Tech Levels"/>     
                    <input class="sheet-inputfield sheet-silver-color sheet-center" type="number" name="attr_armorregencost" value="16" title="Armor Regeneration per turn cost in Tech Levels"/>     
                    <input class="sheet-inputfield sheet-silver-color sheet-center" type="number" name="attr_armorcdscost" value="16" title="Armor Computer Defense Score cost in Tech Levels"/>     
                    <input class="sheet-inputfield sheet-silver-color sheet-center" type="number" name="attr_armorstrengthcost" value="16" title="Armor Strength cost in Tech Levels"/>     
                    <input class="sheet-inputfield sheet-silver-color sheet-center" type="number" name="attr_armordexteritycost" value="16" title="Armor Dexterity cost in Tech Levels"/>     
                    <input class="sheet-inputfield sheet-silver-color sheet-center" type="number" name="attr_armorconstitutioncost" value="16" title="Armor Constitution cost in Tech Levels"/>     
                    <input class="sheet-inputfield sheet-silver-color sheet-center" type="number" name="attr_armormovementcost" value="16" title="Armor Movement cost in Tech Levels"/>     
                    <input class="sheet-inputfield sheet-silver-color sheet-center" type="number" name="attr_armormisccost" value="16" title="Misc" style="width: 80px;"/>   
                    <!-- Row 3 -->                   
                    <span class="sheet-gold-color sheet-center sub-heading" title="Defaults in place">Artifacts</span>
                    <span class="sheet-blue-color sheet-center" title="Defaults in place">Def+</span>
                    <input class="sheet-inputfield52 sheet-gold-color sheet-center" title="Artifact Def + (From Artifacts tab)" name="attr_armorartifactdefbonus" value="0" type="number">
                    <span class="sheet-blue-color sheet-center" title="Defaults in place">Multiplier</span>
                    <input class="sheet-inputfield52 sheet-gold-color sheet-center" title="Artifact HP Multiplier adds +1 Multiplier" name="attr_armorartifacthpmult" value="0" type="number">
                    <span class="sheet-blue-color sheet-center" title="Defaults in place">P+</span>
                    <input class="sheet-inputfield sheet-gold-color sheet-center" title="Artifact P+ Bonus" name="attr_armorartifactpplusbonus" value="0" type="number">
                    <span class="sheet-blue-color sheet-center" title="Defaults in place">Regen+</span>
                    <input class="sheet-inputfield sheet-gold-color sheet-center" title="Artifact Regen Bonus" name="attr_armorartifactregenbonus" value="0" type="number">
                    <span class="sheet-blue-color sheet-center" title="Defaults in place">Damage-</span>
                    <input class="sheet-inputfield sheet-gold-color sheet-center" title="Artifact Damage Reduction Bonus" name="attr_armorartifactdamagereductionbonus" value="0" type="number">
                    <span class="sheet-blue-color sheet-center" title="Defaults in place">CDS+</span>
                    <input class="sheet-inputfield sheet-gold-color sheet-center" title="Artifact Computer Defense Bonus" name="attr_armorartifactdcdsbonus" value="0" type="number"></div>
            </fieldset>
        </div>
        
        <div class="sheet-edit-inventory-weapon-buttons">                 
                <input type="hidden" name="attr_armor-display">
                <label>
                    <h4>Armor</h4>
                    <input type="checkbox" name="attr_armor-display" title="Display Armor"/>
                </label>
                <input type="hidden" name="attr_melee-display">
                <label>
                    <h4>Melee</h4>
                    <input type="checkbox" name="attr_melee-display" title="Display Melee"/>
                </label>
                <input type="hidden" name="attr_ranged-display">
                <label>
                    <h4>Ranged</h4>
                    <input type="checkbox" name="attr_ranged-display" title="Display Ranged"/>  
                </label>
                <input type="hidden" name="attr_explosives-display">
                <label>
                    <h4>Explosives</h4>
                    <input type="checkbox" name="attr_explosives-display" title="Display Explosives"/>
                </label>
                <input type="hidden" name="attr_items-display">
                <label>
                    <h4>Items</h4>
                    <input type="checkbox" name="attr_items-display" title="Display Items"/>
                </label>
                <input type="hidden" name="attr_artifacts-display">
                <label>
                    <h4>Artifacts</h4>
                    <input type="checkbox" name="attr_artifacts-display" title="Display Artifacts"/>
                </label>
                <input type="hidden" name="attr_contacts-display">
                <label>
                    <h4>Notes</h4>
                    <input type="checkbox" name="attr_contacts-display" title="Display Contacts"/>
                </label>
        </div>
        <!-- Melee Block -->
        <div class="sheet-inventory-melee" >   
            
            <h2>Melee Weaponss</h2>
            <div class="sheet-inventory-melee" style="padding: 0 5px;"></div>       
                <fieldset class="repeating_melee" display="grid" style="padding-top: 50px;">                
                    <div class="sheet-edit-melee-entries sheet-block" style="padding-top:5px;">
                        <h3>Name</h3>    
                        <span disabled></span>                    
                        <h3>Attack+</h3>
                        <h3>D. Dice</h3>
                        <h3>Damage+</h3>
                        <h3>Dam. X</h3>                
                        <h3>P+</h3>                
                        <h3>Ammo</h3>
                        <h3>Type</h3>
                        <input class="sheet-inputfield60 sheet-red-color sheet-center" name="attr_inventorymeleeeffect1name" type="text" style="height: 24px; font-size: smaller;" title="melee Effect such as Stun DR">     
                        <input class="sheet-inputfield60 sheet-red-color sheet-center" name="attr_inventorymeleeeffect2name" type="text" style="height: 24px; font-size: smaller;" title="melee Effect such as Stun DR">
                        <h3>Points</h3>
                        <h3>T.L.</h3>
                    <!-- DISPLAY ROW -->                                         
                        <input class="sheet-inputfield sheet-red-color sheet-center" name="attr_meleename" type="text" value="Name" title="A name for your melee." style="width:100px"/>     
                        <span disabled></span>
                        <span class="sheet-red-color sheet-center" name="attr_inventorymeleeattackbonus" title="melee's attack bonus"></span>     
                        <span class="sheet-red-color sheet-center" name="attr_inventorymeleedamagedice" title="Dice based on Dice Progression Chart"></span>                        
                        <span class="sheet-red-color sheet-center" name="attr_inventorymeleedamagebonus" title="melee's bonus damage"></span>  
                        <span class="sheet-red-color sheet-center" name="attr_inventorymeleedamagemult" title="melee's damage multiplier"></span>                             
                        <span class="sheet-red-color sheet-center" name="attr_inventorymeleepplus" title="melee's P+"></span>                                                                
                        <span class="sheet-red-color sheet-center" name="attr_inventorymeleeammo" title="melee's Maximum Ammo"></span>     
                        <span class="sheet-red-color sheet-center" name="attr_inventorymeleetype" title="melee Type of Damage (projectile, energy, blade, etc.)"></span>     
                        <span class="sheet-red-color sheet-center" name="attr_inventorymeleeeffect1" title="melee Effect such as Stun DR"></span> 
                        <span class="sheet-red-color sheet-center" name="attr_inventorymeleeeffect2" title="melee Effect such as Stun DR"></span>
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_inventorymeleetechlevelpoints" title="Points invested by Engineer" type="number">                                                
                        <span class="sheet-red-color sheet-center" name="attr_inventorymeleetechlevel" type="number"></span>
                        
                        <span  class="sheet-center sheet-blue-color" style="width:100px; font-size: smaller;" title="Damage Dice position on Dice Progression Chart">Damage Dice D.P.C. </span> 
                        <span class="sheet-blue-color sheet-center" name="attr_inventorymeleedamagedpc" title="Damage Dice position on Dice Progression Chart" title="Damage Dice position on Dice Progression Chart"></span>                               
                        <input class="sheet-inputfield52 sheet-silver-color sheet-center" type="number" name="attr_inventorymeleeattackbonuscost" value="6" title="melee attack bonus cost in Tech Levels">
                        <input class="sheet-inputfield60 sheet-silver-color sheet-center" type="number" name="attr_inventorymeleedamagedicecost" title="Melee Damage cost in Tech Levels.">
                        <input class="sheet-inputfield60 sheet-silver-color sheet-center" type="number" name="attr_inventorymeleedamagebonuscost" value="3" title="melee Bonus Damage cost in Tech Levels.">   
                        <input class="sheet-inputfield52 sheet-silver-color sheet-center" type="number" name="attr_inventorymeleedamagemultcost" value="16" title="melee Multiplier cost in Tech Levels">                             
                        <input class="sheet-inputfield52 sheet-silver-color sheet-center" type="number" name="attr_inventorymeleeppluscost" value="16" title="melee P+ cost in Tech Levels">                                                     
                        <input class="sheet-inputfield52 sheet-silver-color sheet-center" type="number" name="attr_inventorymeleeammocost" value="2" title="melee Ammo cost in Tech Levels">     
                        <input class="sheet-inputfield60 sheet-silver-color sheet-center" type="text" name="attr_inventorymeleetypecost" value="1" title="Type of Damage (projectile, energy, blade, etc.)">       
                        <input class="sheet-inputfield60 sheet-silver-color sheet-center" type="number" name="attr_inventorymeleeeffect1cost" title="Effects that impose a DR">     
                        <input class="sheet-inputfield52 sheet-silver-color sheet-center" type="number" name="attr_inventorymeleeeffect2cost" title="Effects that impose a DR">                       
                        <span disabled></span>
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_inventorymeleetechlevelcost" title="The level cost of each TL in points before a level increase." type="number">
                    </div>
                </fieldset>
        </div>
        
        <div class="sheet-inventory-ranged">              
            <input type="hidden" class="sheet-tabstoggle2" name="attr_inventoryTab"  value="" />            
            <h2>Ranged Weapons</h2>
            <div class="sheet-edit-weapon-entries" style="padding: 0 5px;">
              
            </div>
            <!-- <fieldset class="repeating_inventory" style="display: grid; grid-template-columns: 125px 400px 52px 75px 75px 52px;"> -->
              <fieldset class="repeating_weapons" display="grid">
                <div class="sheet-edit-weapon-entries sheet-block" style="padding-top:5px;">
                    <!-- Headers -->
                    <h3>Name</h3>
                    <h3>Attack+</h3>
                    <h3>D. Dice</h3>
                    <h3>Damage+</h3>
                    <h3>Dam. X</h3>
                    <h3>P+</h3>
                    <h3>R.F.</h3>
                    <h3>Range</h3>
                    <h3>RoF</h3>
                    <h3>Ammo</h3>
                    <h3>Type</h3>
                    <h3>Effect 1</h3>
                    <h3>Effect 2</h3>
                    <h3>Points</h3>
                    <h3>T.L.</h3>
                    
                    <!-- Display Row -->
                    <input class="sheet-inputfield75 sheet-red-color sheet-center" name="attr_weaponname" type="text" title="A name for your weapon.">
                    <span class="sheet-red-color sheet-center" name="attr_weaponattackbonus" title="Weapon's attack bonus"></span>
                    <span class="sheet-red-color sheet-center" name="attr_weapondamagedice" title="Dice based on Dice Progression Chart"></span>
                    <span class="sheet-red-color sheet-center" name="attr_weapondamagebonus" title="Weapon's bonus damage"></span>
                    <span class="sheet-red-color sheet-center" name="attr_weapondamagemult" title="Weapon's damage multiplier"></span>
                    <span class="sheet-red-color sheet-center" name="attr_weaponpplus" title="Weapon's P+"></span>
                    <span class="sheet-red-color sheet-center" name="attr_weaponrf" title="Rapid Fire Dice"></span>
                    <span class="sheet-red-color sheet-center" name="attr_weaponrange" title="Weapon's Range"></span>
                    <span class="sheet-red-color sheet-center" name="attr_weaponrateoffire" title="Weapon's Rate of Fire"></span>
                    <span class="sheet-red-color sheet-center" name="attr_weaponammo" title="Weapon's Maximum Ammo"></span>
                    <span class="sheet-red-color sheet-center" name="attr_weapontype" title="Weapon Type of Damage (projectile, energy, blade, etc.)"></span>
                    <span class="sheet-red-color sheet-center" name="attr_weaponeffect1" title="Weapon Effect such as Stun DR"></span>
                    <span class="sheet-red-color sheet-center" name="attr_weaponeffect2" title="Weapon Effect such as Stun DR"></span>
                    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_weapontechlevelpoints" title="Points invested by Engineer" type="number">
                    <span class="sheet-red-color sheet-center" name="attr_weapontechlevel" type="number"></span>
                    
                    <!-- Blueprint Row -->
                    
                    <span class="sheet-blue-color sheet-center">D.P.C. <span class="sheet-center sheet-red-color" name="attr_weapondamagedpc" title="Damage Dice position on Dice Progression Chart"></span></span>
                    <!-- Costs -->
                    <input class="sheet-inputfield52 sheet-silver-color sheet-center" type="text" name="attr_weaponattackbonuscost" value="6" title="Weapon attack bonus cost in Tech Levels">
                    <input class="sheet-inputfield75 sheet-silver-color sheet-center" type="text" name="attr_weapondamagecost" value="4" title="Weapon Damage cost in Tech Levels.">
                    <input class="sheet-inputfield52 sheet-silver-color sheet-center" type="text" name="attr_weapondamagebonuscost" value="3" title="Weapon Bonus Damage cost in Tech Levels.">
                    <input class="sheet-inputfield52 sheet-silver-color sheet-center" type="text" name="attr_weapondamagemultcost" value="16" title="Weapon Multiplier cost in Tech Levels">
                    <input class="sheet-inputfield52 sheet-silver-color sheet-center" type="text" name="attr_weaponppluscost" value="16" title="Weapon P+ cost in Tech Levels">
                    <input class="sheet-inputfield52 sheet-silver-color sheet-center" type="text" name="attr_weaponrfcost" value="32" title="Weapon Rapid Fire cost in Tech Levels">
                    <input class="sheet-inputfield52 sheet-silver-color sheet-center" type="text" name="attr_weaponrangecost" value="3" title="Weapon Range cost in Tech Levels">
                    <input class="sheet-inputfield52 sheet-silver-color sheet-center" type="text" name="attr_weaponrateoffirecost" value="6" title="Weapon Rate of Fire cost in Tech Levels">
                    <input class="sheet-inputfield52 sheet-silver-color sheet-center" type="text" name="attr_weaponammocost" value="2" title="Weapon Ammo cost in Tech Levels">
                    <input class="sheet-inputfield52 sheet-silver-color sheet-center" type="text" name="attr_weapontypecost" value="?" title="The cost in levels per bonus, if any">
                    <input class="sheet-inputfield60 sheet-silver-color sheet-center" type="text" name="attr_weaponeffect1cost" value="0" title="Effects that impose a DR">
                    <input class="sheet-inputfield60 sheet-silver-color sheet-center" type="text" name="attr_weaponeffect2cost" value="0" title="Effects that impose a DR">
                    <span class="sheet-blue-color sheet-center">Cost:</span>
                    <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_weapontechlevelcost" type="number">
                </div>
            </fieldset>
            
                
        </div>

        <!-- Explosives Block -->
        <div class="sheet-inventory-explosives">   
          <h2>Explosives</h2>            
          <fieldset class="repeating_explosives" display="grid" style="padding-top: 50px;">
            <div class="sheet-edit-explosives-entries sheet-block" style="padding-top:5px;">
                <!-- Headers -->
                <h3 class="sheet-center">Name</h3>
                <h3 class="sheet-center">Type</h3>
                <h3 class="sheet-center">Damage</h3>
                <h3 class="sheet-center">Dmg+</h3>
                <h3 class="sheet-center">Multiplier</h3>
                <h3 class="sheet-center">P+</h3>
                <h3 class="sheet-center">Radius</h3>
                <input class="sheet-inputfield60 sheet-blue-color sheet-center" type="text" name="attr_explosive_effect" value="Effect/DR" style="height: 24px; font-size:smaller;">
                <input class="sheet-inputfield60 sheet-blue-color sheet-center" type="text" name="attr_explosive_effect" value="Effect/DR2" style="height: 24px; font-size:smaller;">
                <h3 class="sheet-center">Count</h3>
                <h3 class="sheet-center">Points</h3>
                <h3 class="sheet-center">T.L.</h3>
                <!-- Display Row -->
                <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_explosivename" type="text" title="A name for your explosive." style="width: 100px;">
                <input class="sheet-inputfield60 sheet-red-color sheet-center" name="attr_explosivetype" type="text" title="Incendary, plasma, etc.">
                <span class="sheet-red-color sheet-center" name="attr_explosivedamagedice" title="Damage dice."></span>
                <span class="sheet-red-color sheet-center" name="attr_explosivebonusdamage" title="Explosives Bonus Damage"></span>
                <span class="sheet-red-color sheet-center" name="attr_explosivemultiplier" title="Explosive's damage multiplier"></span>
                <span class="sheet-red-color sheet-center" name="attr_explosivepplus" title="Explosive's P+"></span>
                <span class="sheet-red-color sheet-center" name="attr_explosiveradius" title="Explosives range in radius, feet."></span>
                <span class="sheet-red-color sheet-center" name="attr_explosivedr1" title="Misc effects that impose a DR."></span>
                <span class="sheet-red-color sheet-center" name="attr_explosivedr2" title="Explosive effect DR."></span>
                <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_explosivecount" type="text" value="16" title="Quantity (Ammunition) of Explosives">
                <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_explosivetechlevelpoints" title="Points invested by Engineer" type="number">   
                <span class="sheet-red-color sheet-center" name="attr_explosivetechlevel" type="number"></span>

                <!-- Blueprint Row -->                
                <span class="sheet-blue-color sheet-center" title="Dice Progression Chart Reference">D.P.C.</span>                
                <!-- <input class="sheet-inputfield60 sheet-blue-color sheet-center" name="attr_explosivedamagedpc" value="floor(@{explosivetechlevel} / @{explosivedamagecost})" title="Damage Dice position on Dice Progression Chart" type="number" disabled> -->
                <!-- Costs -->                
                <span class="sheet-red-color sheet-center" name="attr_explosivedamagedpc"></span>
                <input class="sheet-inputfield60 sheet-blue-color sheet-center" name="attr_explosivedamagecost" value="0" type="number" title="Cost per dice progression">
                <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_explosivebonusdamagecost" type="text" value="4" title="Cost per bonus damage">
                <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_explosivemultipliercost" type="text" value="12" title="Cost per damage multiplier">
                <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_explosiveppluscost" type="text" value="16" title="Cost per P+">
                <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_explosiveradiuscost" type="text" value="12" title="Cost per radius increase.">
                <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_explosiveeffect1cost" type="text" value="16" title="Effect imposing DR">
                <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_explosiveeffect2cost" type="text" value="16" title="Effect imposing DR">                
                <span disabled></span>                
                <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_explosivetechlevelcost" title="Cost in points per TL level up." type="number">   
            </div>
        </fieldset>

        </div>

        <div class="sheet-edit-inventory-entries">
            <h2>ITEMS</h2>
            <div class="sheet-center">
                <span class="sheet-center sheet-gold-color" style="padding-left:45px;" name="repeating_itemnameheader" value="repeating_itemnameheader">NAME</span>
                <span class="sheet-center sheet-gold-color" style="padding-left:190px;" name="repeating_itemnamedescription" value="repeating_itemnamedescription">DESCRIPTION</span>
                <span class="sheet-center sheet-gold-color" style="padding-left:142px;" name="repeating_itemnamequantity" value="repeating_itemnamequantity">  COUNT</span>
                <span class="sheet-center sheet-gold-color" style="padding-left:15px;" name="repeating_itemnameweight" value="repeating_itemnameweight">  WEIGHT</span>
                <span class="sheet-center sheet-gold-color" style="padding-left:32px;" name="repeating_itemnamesize" value="repeating_itemnamesize">  SIZE</span>  
                <span class="sheet-center sheet-gold-color" style="padding-left:40px;" name="repeating_itemnametechlevel" value="repeating_itemnametechlevel">TL</span>
            </div>                        
            <div class="sheet-block-2px">
                <!-- <fieldset class="repeating_inventory" style="display: grid; grid-template-columns: 125px 400px 52px 75px 75px 52px;"> -->
                <fieldset class="repeating_inventory" >
                    <input type="text" class="sheet-center sheet-inputfield sheet-red-color" name="attr_itemname" value="Name" style="width: 125px;">
                    <input type="text" class="sheet-center sheet-inputfield sheet-blue-color" name="attr_itemnamedescription" value="Description" style="width: 375px;">
                    <input value="0" type="number" class="sheet-center sheet-inputfield sheet-blue-color" name="attr_itemnamequantity" style="width: 52px;">                    
                    <input value="0" type="number" class="sheet-center sheet-inputfield sheet-blue-color" name="attr_itemnameweight" style="width: 75px;">        
                    <input type="text" class="sheet-center sheet-inputfield sheet-blue-color" name="attr_itemnamesize" style="width: 75px;">        
                    <input value="0" type="number" class="sheet-center sheet-inputfield sheet-blue-color" name="attr_itemnametechlevel" style="width: 52px;">        
                </fieldset>
            </div>       
        </div>

        <!-- Artifact Block -->
        <div class="sheet-edit-inventory-artifacts">   
            <h2>Artifact Block</h2>
            <div class="sheet-edit-artifact-entries" style="padding: 0 5px;">
                <h3 class="sheet-center">Name / Effect / Skill</h3>
                <h3 class="sheet-center">T.L.</h3>
                <h3 class="sheet-center">Type</h3>
                <h3 class="sheet-center">Attribute</h3>
                <h3 class="sheet-center">Psionic</h3>
                <h3 class="sheet-center">Skill</h3>                                
                <h3 class="sheet-center">LE</h3>
                <h3 class="sheet-center">RE</h3>
                <h3 class="sheet-center">Sphere</h3>
                <h3 class="sheet-center">DR+</h3>                   
                <h3 class="sheet-center" style="font-size:xsmall;">Effect LE/RE</h3>                    
            </div>    
            <!-- <fieldset class="repeating_inventory" style="display: grid; grid-template-columns: 125px 400px 52px 75px 75px 52px;"> -->
                <fieldset class="repeating_artifacts" display="grid" style="padding-top: 50px;">
                
                    <div class="sheet-edit-artifact-entries sheet-block" style="padding-top:5px;">
                        <!-- DISPLAY ROW -->                                         
                        <input class="sheet-inputfield120 sheet-red-color sheet-center" name="attr_artifactname" type="text" value="Art Name" title="A name for your artifact." >     
                        <input class="sheet-inputfield60 sheet-blue-color sheet-center" name="attr_artifacttechlevel" type="number" style="width: 75px;" title="Tech level of Artifact." >                        
                        <input class="sheet-inputfield60 sheet-blue-color sheet-center" name="attr_artifacttype" type="text" value="Type" title="Type of Artifact: Belt, Broche, Necklace, etc." >     
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactattribute" type="text" value="[[floor(@{artifacttechlevel}/@{artifactattributecost})]]" title="If the Artifact effects Core Attributes, select one. 1 Artifact, 1 Attribute." disabled>                        
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactpsionic" type="number" value="[[floor(@{artifacttechlevel}/@{artifactpsionicbonuslevelcost})]]" title="Artifacts Psionic Augmentation" disabled>  
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactskill" type="number" value="[[floor(@{artifacttechlevel}/@{artifactskillcost})]]" title="Skill bonus." disabled>     
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactle" type="number" value="[[floor(@{artifacttechlevel}/@{artifactlecost}*100)]]" title="Artifact's Life Cord Maximum" style="font-size: smaller;" disabled>     
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactre" type="number" value="[[floor(@{artifacttechlevel}/@{artifactspherecost})]]" title="Artifact grants bonus Raw Energy when burning LE." disabled>                
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactsphere" type="number" value="[[floor(@{artifacttechlevel}/@{artifactattributecost})]]" title="Artifact grants additional Sphere of Influence." disabled>     
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactdr" type="number" value="[[floor(@{artifacttechlevel}/@{artifactdrbonuscost})]]" title="Artifact grants bonus toa DR based skill." disabled>     
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactleuse" type="number" title="Artifact uses this much LE when used, auto burn. May pull from Artifacts LE if Artifact has LE Storage." >     
                                           
                        <!-- BLUEPRINT ROW -->
                        <input class="sheet-inputfield120 sheet-blue-color sheet-center" name="attr_artifacteffect" title="artifact Effect such as Stun DR" type="text">         
                        
                        <select class="sheet-dropdown sheet-blue-color sheet-center sheet-blue-color" name="attr_artifactattributedisplay" title="Attribute Artifact" style="width:75px; font-size: smaller;">
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >STR</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >DEX</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >CON</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >INT</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >WIS</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >CHA</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Movement</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >MDS</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >CDS</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >P+</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Regen</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >DR-/+</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Dmg-/+</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" selected>Attribute</option>
                        </select>
                        <select class="sheet-dropdown sheet-blue-color sheet-center sheet-blue-color" name="attr_artifactpsionicdisplay" title="Attribute Artifact" style="width:90px; font-size: smaller;">
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Body Discipline</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Causation</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Clairvoyance</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Deflection</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Domination</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Energy Communion</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Molecular Alteration</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Pyrokinesis</option>
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Subatomic Ateration</option>                            
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Telekinesis</option>         
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Anti Psionics</option>          
                            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" selected>Pick Psi</option>
                        </select>      
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactattributecost" type="number" title="Artifact Atribute Bonus Cost">    
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactpsionicbonuslevelcost" type="number" title="Artifact Psionic Bonus Level Cost">              
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactskillcost" type="number"  title="Artifact Skill Bonus Level Cost">     
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactlecost" type="number" title="Artifact LE Bonus Level Cost" style="font-size: smaller;">     
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactrecost" type="number" title="Artifact RE Bonus Level Cost" >                
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactspherecost" type="number" title="Artifact Sphere Bonus Cost." >     
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactdrbonuscost" type="number" title="Psionic skill bonus cost. " >   
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifacteffectreuse" type="number" title="Artifact uses this much RE when used automatically.">    
<!-- ROW 3 -->                        
                        <span class="sheet-red-color sheet-center" title="This section is the combat section for Artifacts" style="font-weight: bold;">Combat Section</span>
                        <b class="sheet-red-color sheet-center">Dmg Dice</b> 
                        <b class="sheet-red-color sheet-center">P+</b> 
                        <b class="sheet-red-color sheet-center">Mult.</b> 
                        <b class="sheet-red-color sheet-center">Dmg+</b> 
                        <b class="sheet-red-color sheet-center">Range</b>                         
                        <b class="sheet-center sheet-blue-color">MDS+:</b>                        
                        <b class="sheet-center sheet-blue-color">Armor+</b>                        
                        <b class="sheet-center sheet-blue-color">ArmorP+</b>                        
                        <b class="sheet-center sheet-blue-color">A.Regen</b>                        
                        <b class="sheet-center sheet-blue-color">A.Def+</b>
<!-- ROW 4 -->                            
                        <button class="sheet-button-roll sheet-red-color"  type="roll" value="&{template:default} {{name=@{artifactname} }} {{Attack Roll=[[1D20+@{ranged_attack_bonus}]] }} {{Damage=[[(@{artifactdmg}*@{artifactdamagemult})]]}} {{Multiplier=x@{artifactdamagemult}}} {{P+=@{artifactpplusbonus}}} {{Range=@{artifactrange}ft}}" style="width: 115px; height:25px;"></button>
                        <!-- <input class="sheet-inputfield75 sheet-red-color sheet-center" name="attr_artifactdmg" value="DICE HERE" type="text" style="font-size: smaller;" title="Artifact Dmg Dice From Dice PRogression Chart"> -->
                        <span class="sheet-red-color sheet-center" name="attr_artifactdmgdice"></span>
                        <span class="sheet-red-color sheet-center" name="attr_artifactpplusbonus" title="P+ Bonus to item, or the Artifact weapon."></span>
                        <span class="sheet-red-color sheet-center" name="attr_artifactdamagemult" title="Damage multiplier to item, or to the Artifact weapon."></span>
                        <span class="sheet-red-color sheet-center" name="attr_artifactdmgbonus" title="Bonus damage to item or to the Artifact weapon."></span>
                        <span class="sheet-red-color sheet-center" name="attr_artifactrange" title="Bonus range to item, or the range of the Artifact weapon."></span>
                        
                        <span class="sheet-blue-color sheet-center" name="attr_artifactmdsbonus" title="Artifact grants MDS bonus to holder."></span>
                        <span class="sheet-blue-color sheet-center" name="attr_artifactarmorhpmult" title="Artifact adds a multiplier to your HP."></span>
                        <span class="sheet-blue-color sheet-center" name="attr_artifactarmorpplus" title="Adds Penetration Plus to your Armor."></span>
                        <span class="sheet-blue-color sheet-center" name="attr_artifactarmorregenbonus" title="Adds regeneration to your Armor."></span>
                        <span class="sheet-blue-color sheet-center" name="attr_artifactarmordefbonus" title="Adds defense bonus. Person, Armor, Vehicle. Not spacecraft"></span>
                        
                      <!-- 
                        <span class="sheet-red-color sheet-center" name="attr_artifactdmg"></span>
                        <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_artifactpplusbonus" value="floor(@{artifacttechlevel}/@{artifactppluscost}+1)" type="text" title="P+ Bonus to item, or the Artifact weapon." disabled/>
                        <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_artifactdamagemult" value="floor(@{artifacttechlevel}/@{artifactdamagemultcost}+1)" type="text" title="Damage multiplier to item, or to the Artifact weapon." disabled/>
                        <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_artifactdmgbonus" value="floor(@{artifacttechlevel}/@{artifactdamagebonuscost}*10)" type="text" title="Bonus damage to item or to the Artifact weapon." disabled/>
                        <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_artifactrange" value="floor(@{artifacttechlevel}/@{artifactrangecost})" type="text" title="Bonus range to item, or the range of the Artifact weapon." disabled/>

                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactmdsbonus" value="floor(@{artifacttechlevel}/@{artifactmdsbonuscost})" type="text" title="Artifact grants MDS bonus to holder." disabled/>
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactarmorhpmult" value="floor(@{artifacttechlevel}/@{artifactarmorhpmultcost}+1)" type="text" title="Artifact adds a multiplier to your HP." disabled/>
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactarmorpplus" value="floor(@{artifacttechlevel}/@{artifactarmorppluscost})" type="text" title="Adds Penetration Plus to your Armor." disabled/>
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactarmorregenbonus" value="floor(@{artifacttechlevel}/@{artifactarmorregenbonuscost})" type="text" title="Adds regeneration to your Armor." disabled/>
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactarmordefbonus" value="floor(@{artifacttechlevel}/@{artifactarmordefbonuscost})" type="text" title="Adds defense bonus. Person, Armor, Vehicle. Not spacecraft" disabled/>
                      -->
<!-- ROW 5 -->
                        <span class="sheet-blue-color sheet-center">Bonus Per x Level</span> 
                        <input class="sheet-inputfield75 sheet-red-color sheet-center" name="attr_artifactdmgcost"  value="0" type="number" title="Artifact Dmg Dice" />     
                        <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_artifactppluscost"  value="0" type="number" title="Artifact P+ Cost" />    
                        <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_artifactdamagemultcost"  value="0" type="number" title="Artifact P+ Cost" />    
                        <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_artifactdamagebonuscost"  value="0" type="number" title="Artifact P+ Cost" />    
                        <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_artifactrangecost"  value="0" type="number" title="Artifact Range Cost" />      
                        
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactmdsbonuscost"   value="0" type="number" minimum="0" title="Artifact grants Mental Defense Bonus to Holder."/>                        
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactarmorhpmultcost"  value="0" type="number" minimum="0" title="Bonus Armor health to whatever you are wearing."/>
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactarmorppluscost"  value="0" type="number" minimum="0" title="Bonus Armor P+ to whatever you are wearing."/>                                                  
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactarmorregenbonuscost"  value="0" type="number" minimum="0" title="Bonus Armor Regen to whatever you are wearing."/>
                        <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_artifactarmordefbonuscost"  value="0" type="number" minimum="0" title="Bonus Armor health to whatever you are wearing."/>
<!-- ROW 6 -->                        
                        <span class="sheet-blue-color sheet-center">Health / Cost</span> 
                        <input class="sheet-inputfield75 sheet-red-color sheet-center"  name="attr_artifacthealthbonus" value="floor((@{artifacttechlevel}/@{artifacthealthbonuscost})*10)" disabled>
                        <input class="sheet-inputfield75 sheet-red-color sheet-center"  name="attr_artifacthealthbonuscost" value="0" type="number" >
                        <span class="sheet-blue-color sheet-center">Attack+</span>
                        <input type="text" class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_artifactatkbonus" value="@{artifactatkbonus}" title=":LAKJFOIE" disabled>
                        <input class="sheet-inputfield75 sheet-red-color sheet-center" name="attr_artifactatkbonuscost" value="0" type="number">
                        
                    </div>
                </fieldset>
        </div>

        <div class="sheet-edit-inventory-contact-entries sheet-block">
            <h2>CONTACTS | NOTES</h2>
            <div class="edit-contacts" style="padding-top: 10px;">
                <fieldset class="sheet-block repeating_contacts">                
                    <input class="sheet-inputfield sheet-red-color" type="text" name="attr_contact" value="Name" style="width: 150px;">
                    <input class="sheet-inputfield sheet-blue-color" type="text" name="attr_contactdata" value="Data" style="width: 660px;">
                </fieldset>
            </div>            
        </div>
        
    </div>
</div>        
        

<div class="sheet-editcharacter">    
    <!-- START OF EDIT SHEET -->
    <div class="sheet-edit-character-header">
        
    </div>
    <!-- STATS -->    
    <!-- <div class="sheet-edit-character-grid-section"> -->
        <div class="sheet-edit-character-core-stats sheet-block">
            <span class="sheet-blue-color sheet-center">Race</span>
            <select class="sheet-dropdown" type="text" name="attr_race">
                <option disabled hidden selected></option>
                <option style="color:white;background:#000000;">Human</option>
                <option style="color:white;background:#000000;">Sollox</option>
                <option style="color:white;background:#000000;">Talaxian</option>
                <option style="color:white;background:#000000;">Thorn</option>
                <option style="color:white;background:#000000;">Custom</option>
            </select>

            <span disabled></span>
            <span disabled></span>
            <span class="sheet-center sheet-silver-color" style="width: 100px" title="Note that the attribute scores may be effected by any armor attribute mods +/-.">Power Armor +'s</span> 
            <span disabled></span>
            <span class="sheet-center sheet-silver-color" title="Note that the attribute scores may be effected by any armor attribute mods +/-.">Str:</span> 
            <span class="sheet-center sheet-silver-color" title="Note that the attribute scores may be effected by any armor attribute mods +/-." name="attr_equipped_armor_strength"></span>
            <span class="sheet-center sheet-silver-color" title="Note that the attribute scores may be effected by any armor attribute mods +/-.">Dex:</span>             
            <span class="sheet-center sheet-silver-color" title="Note that the attribute scores may be effected by any armor attribute mods +/-." name="attr_equipped_armor_dexterity"></span>
            <span class="sheet-center sheet-silver-color" title="Note that the attribute scores may be effected by any armor attribute mods +/-.">Con:</span>             
            <span class="sheet-center sheet-silver-color" title="Note that the attribute scores may be effected by any armor attribute mods +/-." name="attr_equipped_armor_constitution"></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            
            
            
            
            

            <b class="sheet-center">Attr</b>                
            <b class="sheet-center">Score</b>
            <b class="sheet-center">Racial+</b>
            <b class="sheet-center">Cyb.</b>                
            <b class="sheet-center">Gen.</b>
            <b class="sheet-center">Art.</b>                
            <b class="sheet-center">Misc.</b>
            <b class="sheet-center">Temp</b>
            <span class="sheet-core-bd sheet-center">Psi BD</span>                              
            <span class="sheet-core-tk sheet-center">Psi TK</span>
            <span class="sheet-core-ca sheet-center">Psi CA</span>
            <span class="sheet-core-cl sheet-center">Psi CL</span>
            <span class="sheet-core-dm sheet-center">Psi DM</span>
            <span class="sheet-core-df sheet-center">Psi DF</span>
            <span class="sheet-core-q sheet-center">Quirk</span>
            
                <b class="sheet-center">STR</b>            
                    <span class="sheet-red-color sheet-center" title="Strength Score" name="attr_strength"type="text"></span>            
                    <span class="sheet-purple-color sheet-center" value="0" type="text" name="attr_racial_str"></span>
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_strength_cyb">
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_strength_gen">
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_strength_art">
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_strength_misc">
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_strength_temp">                        
                    
                    <!-- PSI AUGMENTATION SECTION -->                                
                    <input class="sheet-inputfield52  sheet-core-bd" value="0" type="text" name="attr_psi_body_discipline_adaption_str_bonus"  title="Str Bonus from Body Discipline Adaptation">
                    <input class="sheet-inputfield52  sheet-core-tk" value="0" type="text" name="attr_psi_telekinesis_str_bonus"               title="Str Bonus from Telekinesis Strength Bonus">
                    <input class="sheet-inputfield52  sheet-core-ca" value="0" type="text" name="attr_psi_causation_strength"                           title="Str Bonus from Causation">
                    <span disabled></span>
                    <span disabled></span>              
                    <span disabled></span>              
                    <input class="sheet-inputfield52 sheet-core-q"  value="0" type="text" name="attr_quirk_strength_bonus">   
                    <!-- <input class="sheet-inputfield52 sheet-core-q"  value="0" type="text" name="attr_artifact_strength_bonus" title="Artifact Str Bonus"> -->

                <b class="sheet-center">DEX</b>            
                    <span class="sheet-red-color sheet-center" name="attr_dexterity"></span>
                    <span class="sheet-purple-color sheet-center"  value="0" type="text" name="attr_racial_dex"></span>
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_dexterity_cyb" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_dexterity_gen" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_dexterity_art" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_dexterity_misc" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_dexterity_temp" >
                    
                    <!-- PSI AUGMENTATION SECTION -->                                
                    <input class="sheet-inputfield52 sheet-core-bd" value="0" type="text" name="attr_psi_body_discipline_adaption_dex_bonus" title="Body Discipline Adaptation Dex Bonus">
                    <input class="sheet-inputfield52 sheet-core-tk" value="0" type="text" name="attr_psi_telekinesis_dex_bonus" title="Bonus from Telekinesis Movement">
                    <span title="blank" disabled></span>
                    <span title="blank" disabled></span>
                    <span title="blank" disabled></span>
                    <input class="sheet-inputfield52 sheet-core-df" value="0" type="text" name="attr_psi_deflection_dex_bonus" title="Deflection Dex Bonus">
                    <input class="sheet-inputfield52 sheet-core-q"  value="0" type="text" name="attr_quirk_dexterity_bonus">
                   <!-- <input class="sheet-inputfield52 sheet-core-q"  value="0" type="text" name="attr_artifact_dexterity_bonus" title="Artifact Dex Bonus"> -->

                <b class="sheet-center">CON</b>            
                    <span class="sheet-red-color sheet-center" name="attr_constitution"></span>
                    <span class="sheet-purple-color sheet-center"  value="0" type="text" name="attr_racial_con"></span>
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_constitution_cyb" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_constitution_gen" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_constitution_art" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_constitution_misc" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_constitution_temp" >
                    
                    <!-- PSI AUGMENTATION SECTION-->                
                    <input class="sheet-inputfield52 sheet-core-bd"  value="0" type="text" name="attr_psi_body_discipline_adaption_con_bonus" title="Body Discipline Adaptation Con Bonus">
                    <input class="sheet-inputfield52 sheet-core-tk"  value="0" type="text" name="attr_psi_telekinesis_con_bonus" title="Telekinesis Con Adaptation Con Bonus">
                    <input class="sheet-inputfield52 sheet-core-ca"  value="0" type="text" name="attr_psi_causation" title="Telekinesis Con Adaptation Con Bonus">
                    <span title="blank" disabled></span>
                    <span title="blank" disabled></span>
                    <input class="sheet-inputfield52 sheet-core-df" value="0" type="text" name="attr_psi_deflection_con_bonus" title="Deflection Con Bonus">
                    <input class="sheet-inputfield52 sheet-core-q"  value="0" type="text" name="attr_quirk_constitution_bonus" title="Quirk Con Bonus">
                    <!-- <input class="sheet-inputfield52 sheet-core-q"  value="0" type="text" name="attr_artifact_constitution_bonus" title="Artifact Con Bonus"> -->

                <b class="sheet-center">INT</b>            
                    <span class="sheet-red-color sheet-center" name="attr_intelligence"></span>
                    <span class="sheet-purple-color sheet-center"  value="0" type="text" name="attr_racial_int"></span>
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_intelligence_cyb" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_intelligence_gen" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_intelligence_art" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_intelligence_misc" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_intelligence_temp" >
                    
                    <!-- PSI AUGMENTATION SECTION -->                
                    <span title="blank" disabled></span>
                    <span title="blank" disabled></span>           
                    <span title="blank" disabled></span>
                    <input class="sheet-inputfield52 sheet-core-cl" value="0" type="text" name="attr_psi_clairvoyance_int_bonus" title="Clairvoyance Int Bonus">
                    <span title="blank" disabled></span>
                    <span title="blank" disabled></span>
                    <input class="sheet-inputfield52 sheet-core-q"  value="0" type="text" name="attr_quirk_intelligence_bonus" title="Quirk Int Bonus">                
                    <!-- <input class="sheet-inputfield52 sheet-core-q"  value="0" type="text" name="attr_artifact_intelligence_bonus" title="Artifact Int Bonus"> -->

                <b class="sheet-center">WIS</b>            
                    <span class="sheet-red-color sheet-center" name="attr_wisdom" value="attr_wisdom"></span>
                    <span class="sheet-purple-color sheet-center"  value="0" type="text" name="attr_racial_wis"></span>
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_wisdom_cyb" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_wisdom_gen" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_wisdom_art" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_wisdom_misc" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_wisdom_temp" >

                    <!-- PSI AUGMENTATION SECTION -->                
                    <span title="blank" disabled></span>
                    <span title="blank" disabled></span>
                    <span title="blank" disabled></span>
                    <input class="sheet-inputfield52 sheet-core-cl"  value="0" type="text" name="attr_psi_clairvoyance_wis_bonus">
                    <span title="blank" disabled></span>
                    <span title="blank" disabled></span>
                    <input class="sheet-inputfield52 sheet-core-q"  value="0" type="text" name="attr_quirk_wisdom_bonus" title="Quirk Wis Bonus">                                  
                    <!-- <input class="sheet-inputfield52 sheet-core-q"  value="0" type="text" name="attr_artifact_wisdom_bonus" title="Artifact Wis Bonus"> -->

                <b class="sheet-center">CHA</b>            
                    <span class="sheet-red-color sheet-center" name="attr_charisma" value="attr_charisma"></span>
                    <span class="sheet-purple-color sheet-center"  value="0" type="text" name="attr_racial_cha"></span>
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_charisma_cyb" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_charisma_gen" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_charisma_art" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_charisma_misc" >
                    <input class="sheet-inputfield52 sheet-blue-color"  value="0" type="text" name="attr_charisma_temp" >
                    
                    <!-- PSI AUGMENTATION SECTION -->       
                    <span title="blank" disabled></span>
                    <span title="blank" disabled></span>         
                    <input class="sheet-inputfield52 sheet-core-ca"  value="0" type="text" name="attr_psi_causation_cha_bonus" title="Causation Charisma Bonus">
                    <span title="blank" disabled></span>
                    <input class="sheet-inputfield52 sheet-core-dm"  value="0" type="text" name="attr_psi_domination_cha_bonus"  title="Domination Charisma Bonus">
                    <span title="blank" disabled></span>                 
                    <input class="sheet-inputfield52 sheet-core-q"  value="0" type="text" name="attr_quirk_charisma_bonus" title="Quirk Charisma Bonus">        
            </div>
    <!-- </div> -->

  <!-- <div class="sheet-edit-character-grid-section"> -->
      <div class="sheet-edit-character-health sheet-block">
          <h2 class="sheet-gold-color" title="These are direct bonuses and do not boost Attribute Scores." >Health Stat Bonuses | P+ Bonuses</h2>
              <b class="sheet-blue-color sheet-center"  title="Sum of attributes + Various HP buffs and additional armors, etc."> Health</b>
              <b class="sheet-blue-color sheet-center"   title="Sum of attributes + Various HP buffs and additional armors, etc."> Cyb </b>
              <b class="sheet-blue-color sheet-center"   title="Sum of attributes + Various HP buffs and additional armors, etc."> Gen </b>
              <b class="sheet-blue-color sheet-center"   title="Sum of attributes + Various HP buffs and additional armors, etc."> Art </b>
              <b class="sheet-blue-color sheet-center"   title="Sum of attributes + Various HP buffs and additional armors, etc."> Misc </b>                        
              <b class="sheet-blue-color sheet-center"   title="Sum of attributes + Various HP buffs and additional armors, etc."> Quirk </b>
              <b class="sheet-blue-color sheet-center"   title="Sum of attributes + Various HP buffs and additional armors, etc." style="width:75px"> Temp HP</b>
              <span class="sheet-blue-color sheet-center"></span>

              <b class="sheet-blue-color sheet-center" title="Sum of attributes + Various HP buffs and additional armors, etc.">P+</b>                        
              <b class="sheet-blue-color sheet-center" title="Sum of attributes + Various HP buffs and additional armors, etc."> Cyb </b>
              <b class="sheet-blue-color sheet-center" title="Sum of attributes + Various HP buffs and additional armors, etc."> Gen </b>
              <b class="sheet-blue-color sheet-center" title="Sum of attributes + Various HP buffs and additional armors, etc."> Art </b>
              <b class="sheet-blue-color sheet-center" title="Sum of attributes + Various HP buffs and additional armors, etc."> Misc </b>                          
              <b class="sheet-blue-color sheet-center" title="Sum of attributes + Various HP buffs and additional armors, etc."> Temp </b> 
              <b class="sheet-blue-color sheet-center" title="Sum of attributes + Various HP buffs and additional armors, etc."> Quirk </b> 
                
              <!-- row 2 -->
              <span class="sheet-red-color sheet-center" style="text-align: center; font-size: large;" title="Misc Health Total" type="text" name="attr_misc_health" value="[[floor(@{cyb_misc_health_bonus}+@{gen_misc_health_bonus})]]"></span>
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_cyb_misc_health_bonus" value="0" type="text" style="width: 60px">                        
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_gen_misc_health_bonus" value="0" type="text" style="width: 60px">                        
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_art_misc_health_bonus" value="0" type="text" style="width: 60px">                        
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_misc_misc_health_bonus" value="0" type="text" style="width: 60px">                                                              
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_quirk_misc_health_bonus" value="0" type="text" style="width: 60px">                      
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_temp_misc_health_bonus" value="0" type="text" style="width: 75px">
                                      
              <span class="sheet-blue-color sheet-center"></span>
              <span class="sheet-red-color sheet-center" style="text-align: center; font-size: large;" title="Sum of all P+ except for armor and shields." name="attr_misc_p_plus"></span>                                            
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_cyb_misc_pen_plus_bonus" value="0" type="text" title="Misc P+ from cybernetic bonus.">                    
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_gen_misc_pen_plus_bonus" value="0" type="text" title="Misc P+ from genetic engineering bonus.">                    
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_art_misc_pen_plus_bonus" value="0" type="text" title="Misc Artifact P+. Not from Artifact Tab">                    
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_misc_pen_plus_bonus" value="0" type="text" title="Misc P+.">                     
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_temp_pen_plus_bonus" value="0" type="text" title="Temp Misc P+">                       
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_quirk_pen_plus_bonus" value="0" type="text" title="Quirk Misc P+">  
          
              <!-- REGEN & Damage Reduction -->
              <h2 class="sheet-gold-color sub-heading"  title="These are direct bonuses and do not boost Attribute Scores."> Body Regeneration | Damage Reduction</h2>
              <b class="sheet-blue-color sheet-blue-color sheet-center"  title="These are direct bonuses and do not boost Attribute Scores.">Regen</b>
              <b class="sheet-blue-color sheet-blue-color sheet-center"  title="These are direct bonuses and do not boost Attribute Scores."> Cyb </b>
              <b class="sheet-blue-color sheet-blue-color sheet-center"  title="These are direct bonuses and do not boost Attribute Scores."> Gen </b>
              <b class="sheet-blue-color sheet-blue-color sheet-center"  title="These are direct bonuses and do not boost Attribute Scores."> Art </b>
              <b class="sheet-blue-color sheet-blue-color sheet-center"  title="These are direct bonuses and do not boost Attribute Scores."> Misc </b>  
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="These are direct bonuses and do not boost Attribute Scores."> Temp </b>  
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="These are direct bonuses and do not boost Attribute Scores."> Quirk </b>

              <span class="sheet-blue-color sheet-blue-color sheet-center"></span>
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Damage Reduction stat array">Dmg R</b>
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Damage Reduction from Cybernetics."> Cyb </b>
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Damage Reduction from Genetic Engineering."> Gen </b>
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Damage Reduction from Artisan Artifacts."> Art </b>
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Damage Reduction from Misc sources."> Misc </b>
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Sum of attributes + Various HP buffs and additional armors, etc."> Temp </b>  
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Sum of attributes + Various HP buffs and additional armors, etc."> Quirk </b> 
              <!-- Regen -->
              <span class="sheet-red-color" style="font-size: large;" title="This is Misc Regeneration (daily)." value="0" type="text" name="attr_misc_regen"></span>                                                            
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_cyb_misc_regen_bonus" value="0" type="text">                        
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_gen_misc_regen_bonus" value="0" type="text">                        
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_art_misc_regen_bonus" value="0" type="text">                        
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_misc_regen_bonus" value="0" type="text">                              
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_temp_misc_regen_bonus" value="0" type="text" title="Temp Regen Bonus.">                             
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_quirk_misc_regen_bonus" value="0" type="text" title="Quirk Regen Bonus.">

              <span class="sheet-blue-color sheet-blue-color sheet-center"></span>
              <span class="sheet-red-color sheet-blue-color sheet-center" style="font-size: large;" title="This is your Misc Damage Reduction." name="attr_misc_damage_reduction"></span>                        
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_cyb_misc_dmg_red" value="0" type="text" >                        
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_gen_misc_dmg_red" value="0" type="text">                        
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_art_misc_dmg_red" value="0" type="text">                        
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_misc_dmg_red" value="0" type="text">                                
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_temp_misc_damage_reduction_bonus" value="0" type="text" title="Temp Damage Reduction Bonus">                            
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_quirk_misc_damage_reduction_bonus" value="0" type="text" title="Quirk Damage Reduction Bonus">                          
          
            <!-- Ranged and Melee Defense -->
              <h2 class="sheet-gold-color sub-heading" title="These are direct bonuses and do not boost Attribute Scores.">Computer Defense | Mental Defense </h2>
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Computer Defense Bonus from">CDS</b>
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Computer Defense Bonus from Cyb"> Cyb </b>                        
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Computer Defense Bonus from Artifacts"> Art </b>
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Computer Defense Bonus from Misc"> Misc </b>  
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Computer Defense Bonus from Temps"> Temp </b>  
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Computer Defense Bonus from Quirks"> Quirk </b>

              <span disabled></span>
              <span disabled></span>
              <span disabled></span>
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Mental Defense Bonus from Quirks"> MDS </b>
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Mental Defense Bonus from Miscs"> Cyb </b>  
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Mental Defense Bonus from Misc"> Art </b>  
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Mental Defense Bonus from Temps"> Misc </b>  
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Mental Defense Bonus from Quirks"> Temp </b>
              <b class="sheet-blue-color sheet-blue-color sheet-center" title="Mental Defense Bonus from Quirks"> Quirk </b>
              
              <!-- CDS & MDS-->                    
              <span class="sheet-red-color sheet-blue-color sheet-center" style="font-size: large;" title="This is your Misc Computer Defense Bonuses." name="attr_misc_cds"></span>                                                            
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_cyb_misc_cds_bonus" value="0" type="text">                                                
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_art_misc_cds_bonus" value="0" type="text">                        
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_misc_cds_bonus" value="0" type="text">                              
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_temp_misc_cds_bonus" value="0" type="text">                             
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_quirk_misc_cds_bonus" value="0" type="text">                                                

              <span disabled></span>
              <span disabled></span>     
              <span disabled></span>
              <span class="sheet-red-color sheet-blue-color sheet-center" style="font-size: large;" title="This is your Misc Mental Defense Bonuses." name="attr_misc_mds"></span>                                                            
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_cyb_misc_mds_bonus" value="0" type="text">   
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_art_misc_mds_bonus" value="0" type="text">                                                
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_misc_mds_bonus" value="0" type="text">                        
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_temp_misc_mds_bonus" value="0" type="text">                              
              <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_quirk_misc_mds_bonus" value="0" type="text">                      
      </div>
</div>

<!-- Start of Psionics Edit Sheet -->
<div class="sheet-editpsionics">
    <!-- <h3 style="grid-column: 1 / -1; text-align:center; padding-top: 10px;">PSIONICS EDIT PAGE</h3> -->

    <!-- PAGE HEADER BELOW BUTTONS -->
    <!-- Add your HTML HERE -->
    <div class="sheet-edit-psionics-grid-section">
        <div class="sheet-edit-life-energy sheet-block">
            <h2 style="width: 827px;">LIFE CORD</h2>
            <span class="sheet-blue-color sheet-center">Life Energy</span>
            <input class="sheet-inputfield sheet-red-color" style="height: 25px; width: 75px;" title="Your Current Life Energy" type="number" name="attr_life_energy">
            <span class="sheet-red-color sheet-center">/</span>
            <input class="sheet-inputfield sheet-red-color" style="height: 25px; width: 75px;" title="Your Maximum Life Energy" value="0" type="number" name="attr_life_energy_full">            
            <span class="sheet-blue-color sheet-center">Psi LE+</span>
            <span class="sheet-red-color sheet-center" title="LE Bonus From Psionic Levels" name="attr_psi_le_bonus"></span>
            <span class="sheet-blue-color sheet-center">RE</span>
            <input class="sheet-inputfield sheet-red-color" style="height: 25px; width: 52px;" title="Your Current Raw Energy Output" value="0" type="number" name="attr_raw_energy" readonly="readonly" />
            <span class="sheet-blue-color sheet-center">Sphere</span>
            <input class="sheet-inputfield sheet-red-color" style="height: 25px; width: 52px;" title="Your Sphere of Influence. See sphere chart." value="0" type="number" name="attr_psi_sphere"/>
            <span class="sheet-blue-color sheet-center">Regen %</span>
            <input class="sheet-inputfield sheet-red-color" style="height: 25px; width: 52px;" title="Percentage your LC regenerates (of max)" type="number" name="attr_life_energy_regen_percent" value="10" />
            <input class="sheet-inputfield sheet-red-color" style="color: red; height: 25px; width: 52px;" title="Actual Life Energy per day" value="0" type="number" name="attr_life_energy_regenerated" readonly/>
            <span class="sheet-blue-color sheet-center" style="text-align: left;">/day</span>
        </div>
    </div>
    
    <div class="sheet-edit-psionics-grid-section">
        <div class="sheet-edit-psi-buttons" style="width: 827px">
            <button class="sheet-button-roll" type="action" name="act_body-discipline">Body Disc</button>
            <button class="sheet-button-roll" type="action" name="act_causation">Causation</button>
            <button class="sheet-button-roll" type="action" name="act_clairvoyance">Clairvoyance</button>
            <button class="sheet-button-roll" type="action" name="act_deflection">Deflection</button>
            <button class="sheet-button-roll" type="action" name="act_domination">Domination</button>
            <button class="sheet-button-roll" type="action" name="act_energy-communion">E.Comm</button>
            <button class="sheet-button-roll" type="action" name="act_molecular-alteration">Molecular</button>
            <button class="sheet-button-roll" type="action" name="act_pyrokinesis">Pyrokinesis</button>
            <button class="sheet-button-roll" type="action" name="act_subatomic-alteration">Subatomic</button>
            <button class="sheet-button-roll" type="action" name="act_telekinesis">Telekinesis</button>
            <button class="sheet-button-roll" type="action" name="act_anti-psionics">Anti Psi</button>
        </div>        
    </div>

    <input type="hidden" class="sheet-tabstoggle1" name="attr_psiTab" value="" />
    
    <div class="sheet-body-discipline">
        <h2 style="width:827px;">Body Discipline</h2>
        <div class="sheet-edit-psi-body-discipline sheet-block sheet-psi-scrollable-130">       
            <!-- ROW 1-->
            <b class="sheet-gold-color sheet-center"> Roll </b>
            <b class="sheet-gold-color sheet-center"> Ability </b>
            <b class="sheet-gold-color sheet-center"> Level </b>
            <b class="sheet-gold-color sheet-center"> Points </b>
            <b class="sheet-gold-color sheet-center"> RE: </b>
            <b class="sheet-gold-color sheet-center"> LE: </b>
            <b class="sheet-gold-color sheet-center"> Available </b>
            <b class="sheet-silver-color sheet-center" title="Adaptation Strength Bonus"> STR</b>
            <b class="sheet-silver-color sheet-center" title="Adaptation Dexterity Bonus"> DEX </b>
            <b class="sheet-silver-color sheet-center" title="Adaptation Constitution Bonus"> CON </b>
            <b class="sheet-silver-color sheet-center" title="Adaptation P+ Bonus"> P+ </b>
            <b class="sheet-silver-color sheet-center" title="Adaptation Regeneration Bonus"> REGEN </b>   

            <!-- ROW 2 -->            
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name= Body Discipline}} {{STR Bonus=[[@{psi_body_discipline}]]}} {{RE Used=@{psi_body_discipline_re}}} {{LE Used=@{psi_body_discipline_le}}}" ></button>
            <span class="sheet-gold-color sheet-center"> Body Discipline</span>
            <span class="sheet-gold-color sheet-center" name="attr_psi_body_discipline_level"></span>
            <input class="sheet-inputfield sheet-gold-color sheet-center" name="attr_psi_body_discipline_points" value="0" type="number" title="Your earned points go here">
            <input class="sheet-inputfield sheet-gold-color sheet-center" name="attr_psi_body_discipline_re" value="0" type="number" title="RE Investment into Body Discipline">
            <input class="sheet-inputfield sheet-gold-color sheet-center" name="attr_psi_body_discipline_le" value="0" type="number" title="LE Investment into Body Discipline">
            <span class="sheet-gold-color sheet-center" name="attr_psi_body_discipline_available_points" title="Available points after investing - should be 0"></span>
            <input class="sheet-inputfield sheet-silver-color sheet-center" value="0" type="number" name="attr_psi_body_discipline_adapt_str_bonus">
            <input class="sheet-inputfield sheet-silver-color sheet-center" value="0" type="number" name="attr_psi_body_discipline_adapt_dex_bonus">
            <input class="sheet-inputfield sheet-silver-color sheet-center" value="0" type="number" name="attr_psi_body_discipline_adapt_con_bonus">
            <input class="sheet-inputfield sheet-silver-color sheet-center" value="0" type="number" name="attr_psi_body_discipline_adapt_pplus_bonus">
            <input class="sheet-inputfield sheet-silver-color sheet-center" value="0" type="number" name="attr_psi_body_discipline_adapt_regen_bonus" title="Bonus to regeneration per day.">
            
            <!-- ROW 3 -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name= Strength Boost}} {{STR Bonus=[[@{psi_body_discipline_boost_str}]]}} {{RE Used=@{psi_body_discipline_boost_str_re}}}" ></button>
            <span class="sheet-blue-color sheet-center">Boost STR</span>
            <span class="sheet-red-color sheet-center" name="attr_psi_body_discipline_boost_str_level"></span>
            <input class="sheet-inputfield sheet-red-color sheet-center" value="0" type="number" name="attr_psi_body_discipline_boost_str_points" >
            <input class="sheet-inputfield sheet-red-color sheet-center" value="0" type="number" name="attr_psi_body_discipline_boost_str_re" >
            <input class="sheet-inputfield sheet-red-color sheet-center" value="0" type="number" name="attr_psi_body_discipline_boost_str_le" >
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            
            <!-- ROW 4 -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name= Dexterity Boost}} {{DEX Bonus=[[@{psi_body_discipline_boost_dex}]]}} {{RE Used=@{psi_body_discipline_boost_dex_re}}}" ></button>
            <span class="sheet-blue-color sheet-center">Boost DEX</span>
            <span class="sheet-red-color sheet-center" name="attr_psi_body_discipline_boost_dex_level"></span>
            <input class="sheet-inputfield sheet-red-color sheet-center" value="0" type="number" name="attr_psi_body_discipline_boost_dex_points">
            <input class="sheet-inputfield sheet-red-color sheet-center" value="0" type="number" name="attr_psi_body_discipline_boost_dex_re">
            <input class="sheet-inputfield sheet-red-color sheet-center" value="0" type="number" name="attr_psi_body_discipline_boost_dex_le">
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            
            <!-- ROW 5 -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name= Constitution Boost}} {{CON Bonus=[[@{psi_body_discipline_boost_con}]]}} {{RE Used=@{psi_body_discipline_boost_con_re}}} " ></button>
            <span class="sheet-blue-color sheet-center">Boost CON</span>
            <span class="sheet-red-color sheet-center" name="attr_psi_body_discipline_boost_con_level"></span>
            <input class="sheet-inputfield sheet-red-color sheet-center" value="0" type="number" name="attr_psi_body_discipline_boost_con_points">
            <input class="sheet-inputfield sheet-red-color sheet-center" value="0" type="number" name="attr_psi_body_discipline_boost_con_re">
            <input class="sheet-inputfield sheet-red-color sheet-center" value="0" type="number" name="attr_psi_body_discipline_boost_con_le">
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            
            <!-- Row 6 -->
            <button class="sheet-button-roll sheet-red-color sheet-center" type="roll" value="&{template:default} {{name= Self Healing }}  {{HP Healed=[[@{psi_body_discipline_heal_dice}]]}} {{Action Cost= 1}} {{Raw Energy Used=@{psi_body_discipline_heal_re}}} [[Life Energy Used=@{psi_body_discipline_heal_le}}}" ></button>
            <span class="sheet-green-color sheet-center"> Self Heal</span>
            <span class="sheet-red-color sheet-center" name="attr_psi_body_discipline_heal_level"></span>
            <input class="sheet-inputfield sheet-red-color sheet-center" value="0" type="number" name="attr_psi_body_discipline_heal_points" >
            <input class="sheet-inputfield sheet-red-color sheet-center" value="0" type="number" name="attr_psi_body_discipline_heal_re">
            <input class="sheet-inputfield sheet-red-color sheet-center" value="0" type="number" name="attr_psi_body_discipline_heal_le">
            <span class="sheet-red-color sheet-center" name="attr_psi_body_discipline_heal_dice"></span>       
        </div>

        <fieldset class="repeating_bodydisciplinequirks">
          <div class="sheet-edit-repeating-body-discipline">
            <b class="sheet-gold-color sheet-center"> Roll </b>
            <b class="sheet-gold-color sheet-center"> Ability </b>
            <b class="sheet-gold-color sheet-center"> Level </b>
            <b class="sheet-gold-color sheet-center"> Points </b>
            <b class="sheet-gold-color sheet-center"> RE: </b>
            <b class="sheet-gold-color sheet-center"> LE: </b>
            <b class="sheet-gold-color sheet-center"> Dice </b>
            <b class="sheet-gold-color sheet-center"> Custom </b>
            <b class="sheet-gold-color sheet-center"> Notes </b>
            
            <button class="sheet-button-roll sheet-blue-color" type="roll" value="&{template:default} {{name=@{character_name} uses @{bdsubskillname}}} {{@{bdsubskillname} Roll= [[1D20+floor(@{psi_body_discipline_level}+@{bdsubskillllevel})]]}} {{@{bdsubskillname} level=@{bdsubskillllevel}}} {{RE Used=@{bdsubskillre} }} {{LE Used=@{bdsubskillle}}} {{Relevant Dice=[[@{bdsubskillldice}]] }} {{Custom Dice or DR=@{bdsubskillcustom}}} {{Notes=@{bdsubskillnotes}}}"></button>
            <input class="sheet-inputfield120 sheet-blue-color sheet-center" name="attr_bdsubskillname" type="text">
            <input class="sheet-inputfield60 sheet-blue-color sheet-center" name="attr_bdsubskillllevel" value="floor((@{bdsubskilllpoints})/2)" disabled/>
            <input class="sheet-inputfield60 sheet-blue-color sheet-center" name="attr_bdsubskilllpoints" value="0" type="number" >
            <input class="sheet-inputfield60 sheet-blue-color sheet-center" name="attr_bdsubskillre" value="0" type="number">
            <input class="sheet-inputfield75 sheet-blue-color sheet-center" name="attr_bdsubskillle" value="0" type="number">  
            <input class="sheet-inputfield75 sheet-blue-color sheet-center" name="attr_bdsubskillldice" type="text" style="font-size: x-small;">
            <input class="sheet-inputfield75 sheet-blue-color sheet-center" name="attr_bdsubskillcustom" type="text" style="width:75px"> 
            <input class="sheet-inputfield200 sheet-blue-color sheet-center" name="attr_bdsubskillnotes" type="text"> 
          </div>
        </fieldset>
    </div>

    <div class="sheet-causation sheet-block">
        <h2>Causation</h2>
        <fieldset class="repeating_causationquirks">
          <div class="sheet-edit-repeating-causation sheet-psi-scrollable-400">
              <span class="sheet-gold-color sheet-center">Quirk Name</span>
              <span class="sheet-gold-color sheet-center">Psionic</span> 
              <span class="sheet-gold-color sheet-center">Psi+</span> 
              <span class="sheet-gold-color sheet-center">Attribute</span> 
              <span class="sheet-gold-color sheet-center">Attr+</span> 
              <span class="sheet-gold-color sheet-center">Custom</span> 
              <span class="sheet-gold-color sheet-center">Cust +</span> 
              <span class="sheet-gold-color sheet-center">Notes</span> 

              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_quirkname" type="text" style="width: 120px">
              <select class="sheet-dropdown sheet-center sheet-blue-color" name="attr_quirkpsi" title="Quirk Psionic" style="font-size: x-small; height: 25px; width: 110px">
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Body Discipline</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Causation</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Clairvoyance</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Deflection</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Domination</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Energy Communion</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Molecular Alteration</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Pyrokinesis</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Subatomic Alteration</option>                            
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Telekinesis</option>         
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" >Anti Psionics</option>          
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" selected>Pick Psi</option>
            </select>      
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_quirkpsibonus" value="0" type="number"  style="width:52px;">            
            <select class="sheet-dropdown sheet-blue-color sheet-center" name="attr_quirkttribute" style="height: 25px; width:90px"> 
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{strength}">Strength</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{dexterity}">Dexterity</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{constitution}">Constitution</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{intelligence}">Intelligence</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{wisdom}">Wisdom</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{charisma}">Charisma</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{attribute_dropdown_none}">None</option>
            </select>          
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_quirkattributebonus" value="0" type="number" style="width: 52px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_quirkcustom" type="text" style="width: 75px;">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_quirkcustombonus" value="0" type="number" style="width: 75px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_quirknotes" type="text" style="width: 190px; font-size: x-small;"> 
          </div>
        </fieldset>
        
        <!-- Add your HTML HERE -->
    </div>

    <div class="sheet-clairvoyance">
        <h2>Clairvoyance</h2>
        <!-- Add your HTML HERE -->    
        <div class="sheet-edit-psi-clairvoyance sheet-block-2px sheet-psi-scrollable-130">
            <b class="sheet-gold-color sheet-center"> Roll </b>
            <b class="sheet-gold-color sheet-center"> Ability </b>
            <b class="sheet-gold-color sheet-center"> Level </b>
            <b class="sheet-gold-color sheet-center"> Points </b>
            <b class="sheet-gold-color sheet-center"> RE: </b>
            <b class="sheet-gold-color sheet-center"> LE: </b>
            <b class="sheet-gold-color sheet-center"> Available </b>
            <b class="sheet-gold-color sheet-center" title="Points Earned From Increasing Level Of Primary Psionic"> SubPoints </b>
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_clairvoyance_sub_points" value="0" type="number" title="Manually Update Your Sub Skill Level Sum">   
            <b class="sheet-gold-color sheet-center" title="Points Gained Elsewhere Rather Than Psionic Level Increase"> CustPts + </b>
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_clairvoyance_sub_custom_points" value="0" type="number" title="Points not earned from leveling up main Psionic">   

            <!-- ROW 2 -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name= Clairvoyance}} {{Clairvoyance Roll=[[1D20+@{psi_clairvoyance_level}+@{wisdom}]]}} {{RE Used=@{psi_clairvoyance_re}}} {{LE Used=@{psi_clairvoyance_le}}}" ></button>
            <span class="sheet-gold-color sheet-center"> Clairvoyance </span>
            <span class="sheet-red-color sheet-center" name="attr_psi_clairvoyance_level" value="0" type="number"></span>                                          
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_clairvoyance_points" value="0" type="number" title="Your earned points go here">   
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_clairvoyance_re" value="0" type="number" title="Your Clairvoyance RE Used">                  
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_clairvoyance_le" value="0" type="number" title="Clairvoyance LE Used">                  
            <span class="sheet-red-color sheet-center" name="attr_psi_clairvoyance_available" value="@{psi_clairvoyance_available}" title="Available points to invest"></span>                     
            <span class="sheet-green-color sheet-center"> Disc. HP</span>
            <span class="sheet-green-color sheet-center" name="attr_psi_clairvoyance_health"></span>            
            <span disabled></span>
            <span disabled></span>
            
            <!-- Heightened Awareness3 -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{Name=Heighted Awareness}} {{Roll=[[1D20+@{attr_psi_clairvoyance_awareness_bonus}]]}} {{Notes= Standard Awareness does not include supernatural perception, such as spirits. Heightened Awareness includes this.}}"></button>
            <span class="sheet-blue-color sheet-center"> Awareness </span>
            <span class="sheet-red-color sheet-center" name="attr_psi_clairvoyance_heightened_awareness_level"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_awareness_points" value="0" type="number" title="Heightened Awareness Points">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_awareness_re" value="0" type="number" title="Heightened Awareness RE">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_awareness_le" value="0" type="number" title="Heightened Awareness LE">
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>


            <!--Astral Projection -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name=Astral Projection}} {{Astral Roll=[[1D20+@{psi_clairvoyance_astral_projection_level}]]}} {{DR=[[@{psi_clairvoyance_astral_projection_dr}]]}} {{RE Used=@{psi_clairvoyance_astral_projection_re}}} {{LE Used=@{psi_clairvoyance_astral_projection_le}}} {{Astral LE=@{psi_clairvoyance_astral_projection_le_percent}}} {{Note=The DR is 10 + distance from body in Feet. Walls count as double their thickness. The DR is rolled each turn.}}"></button>
            <span class="sheet-blue-color sheet-center">Astral Projection</span>
            <span class="sheet-red-color sheet-center" name="attr_psi_clairvoyance_astral_projection_level"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_astral_projection_points" value="0" type="number" title="Astral Projection Points">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_astral_projection_re" value="0" type="number" title="Astral Projection RE">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_astral_projection_le" value="0" type="number" title="Astral Projection LE">
            <span class="sheet-blue-color sheet-center"> DR Ft:</span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_astral_projection_distance" value="0" type="number" title="Place distance, in feet here">
            <span class="sheet-blue-color sheet-center"> Astral LE/RE</span>
            <span class="sheet-red-color sheet-center" name="attr_psi_clairvoyance_astral_projection_le_percent" title="This is the amount of current LE you can take with you when leaving the body, percent is based on level"></span> 
            <span class="sheet-red-color sheet-center" name="attr_psi_clairvoyance_astral_passive_re" value="0" type="number" title="Astral Passive RE"></span>

            <!-- History -->
            <span disabled></span>
            <span class="sheet-gold-color sheet-center sheet-subheading">History</span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Past  -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name= Past}} {{History: Past=[[1D20+@{psi_clairvoyance_history_past_level}]]}} {{DR=[[20+@{psi_clairvoyance_history_past_time_dr}]]}} {{RE Used=@{psi_clairvoyance_history_past_re}}} {{LE Used=@{psi_clairvoyance_history_past_le}}} {{Range= Within Sphere}} {{Difficulty Rating=[[10+@{psi_clairvoyance_history_past_time_dr}]]}}" title="Viewing the past in an immediate area."><span style="font-size: small; padding-left: 2px;">Past</span></button>
            <span class="sheet-blue-color sheet-center">History</span>
            <span class="sheet-blue-color sheet-center" name="attr_psi_clairvoyance_history_past_level"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_history_past_points" value="0" type="number" title="History Past Points">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_history_past_re" value="0" type="number" title="History Past RE">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_history_past_le" value="0" type="number" title="History Past LE">
            <span class="sheet-blue-color sheet-center" style="font-size: small;">History DR</span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_history_past_time_dr" value="0" type="number" title="History Past Time DR">
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Remove View -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name= Remote View}} {{History: Remote View=[[1D20+@{psi_clairvoyance_history_remote_view_level}]]}} {{DR=[[20+@{psi_clairvoyance_history_remote_view_dr}]]}} {{RE Used=@{psi_clairvoyance_history_remote_view_re}}} {{LE Used=@{psi_clairvoyance_history_remote_view_le}}} {{Range= Within Sphere}} {{Difficulty Rating=[[10+@{psi_clairvoyance_history_remote_view_dr}]]}}" title="Remotely view nearby areas."><span style="font-size: small; padding-left: 2px;">View</span></button>
            <span class="sheet-blue-color sheet-center">Remote View</span>
            <span class="sheet-blue-color sheet-center" name="attr_psi_clairvoyance_history_remote_view_level"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_history_remote_view_points" value="0" type="number" title="Remote View Points">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_history_remote_view_re" value="0" type="number" title="Remote View RE">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_history_remote_view_le" value="0" type="number" title="Remote View LE">
            <span class="sheet-blue-color sheet-center" style="font-size: small;">Remote DR</span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_history_remote_view_dr" value="0" type="number" title="Remote View DR">
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Future -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name= Premonition}} {{History: Premonition=[[1D20+@{psi_clairvoyance_history_premonition_level}]]}} {{DR=[[20+@{psi_clairvoyance_history_premonition_dr}]]}} {{RE Used=@{psi_clairvoyance_history_premonition_re}}} {{LE Used=@{psi_clairvoyance_history_premonition_le}}} {{Range= Within Sphere}} {{Difficulty Rating=[[10+@{psi_clairvoyance_history_premonition_dr}]]}}" title="Premonition of the Future.."><span style="font-size: small; padding-left: 2px;">Vision</span></button>
            <span class="sheet-blue-color sheet-center">Premonition</span>
            <span class="sheet-blue-color sheet-center" name="attr_psi_clairvoyance_history_premonition_level"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_history_premonition_points" value="0" type="number" title="Premonition Points">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_history_premonition_re" value="0" type="number" title="Premonition RE">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_history_premonition_le" value="0" type="number" title="Premonition LE">
            <span class="sheet-blue-color sheet-center" style="font-size: smaller;">Premonition DR</span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_clairvoyance_history_premonition_dr" value="0" type="number" title="Premonition DR">
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>

        </div>
        <!-- <div style="display: grid; grid-template-columns: 55px 110px 52px 52px 110px 60px 60px 75px 190px; grid-gap: 5px;"> -->
          <div class="sheet-edit-repeating-clairvoyance sheet-center">
          <b class="sheet-gold-color sheet-center"> Roll </b>
          <b class="sheet-gold-color sheet-center"> Ability </b>
          <b class="sheet-gold-color sheet-center"> Level </b>
          <b class="sheet-gold-color sheet-center"> Points </b>
          <b class="sheet-gold-color sheet-center"> Attribute</b>
          <b class="sheet-gold-color sheet-center"> RE: </b>
          <b class="sheet-gold-color sheet-center"> LE: </b>
          <b class="sheet-gold-color sheet-center"> Dice </b>
          <b class="sheet-gold-color sheet-center"> Notes </b>
        </div>
        <fieldset class="repeating_clairvoyancesubskills">
          
          <div class="sheet-edit-repeating-clairvoyance" style="padding-bottom:10px;">
            <button class="sheet-button-roll sheet-blue-color sheet-center" style="width: 60px;" type="roll" value="&{template:default} {{@{character_name} Activates = @{clairvoyancesubskillname}}} {{@{clairvoyancesubskillname}=[[1D20+(@{clairvoyancesubskilllevel}+@{clairvoyancesubskillattribute})]]}} {{RE Used=@{clairvoyancesubskillre}}} {{LE Used=@{clairvoyancesubskillle}}} {{Effect Dice=[[@{clairvoyancesubskilldice}]]}} {{Notes=@{clairvoyancesubskillnotes}}}" ></button>
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_clairvoyancesubskillname" type="text" style="width: 100px;">
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_clairvoyancesubskilllevel" value="floor(@{clairvoyancesubskillpoints}/2)" type="number" style="width:52px" disabled/>
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_clairvoyancesubskillpoints" value="0" type="number" style="width:52px">  
            <select class="sheet-dropdown sheet-blue-color sheet-center" name="attr_clairvoyancesubskillattribute" style="height: 25px; width:110px;"> 
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{strength}">Strength</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{dexterity}">Dexterity</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{constitution}">Constitution</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{intelligence}">Intelligence</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{wisdom}">Wisdom</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{charisma}">Charisma</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{attribute_dropdown_none}">None</option>
            </select>          
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_clairvoyancesubskillre" value="0" type="number" style="width: 52px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_clairvoyancesubskillle" type="text" style="width: 52px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_clairvoyancesubskilldice" type="text" style="font-size: x-small; width: 75px">
            <input class="sheet-inputfield200 sheet-blue-color sheet-center" name="attr_clairvoyancesubskillnotes" type="text" style="width: 230px; font-size: small;"> 
          </div>
        </fieldset> 
    </div>
    
    <div class="sheet-deflection">
      <h2>Deflection</h2>
        <div class="sheet-edit-psi-deflection sheet-block-2px ssheet-psi-scrollable-130" style="padding-bottom: 15px;">
          <b class="sheet-gold-color sheet-center"> Ability </b>
          <b class="sheet-gold-color sheet-center"> Level</b>
          <b class="sheet-gold-color sheet-center"> Points</b>      
          <b class="sheet-gold-color sheet-center"> Available </b>                                             
          <b class="sheet-gold-color sheet-center"> SubPoints </b>                                   
          <b class="sheet-gold-color sheet-center"> CustPts+ </b>         

          <!-- ROW 2-->
          <b class="sheet-gold-color sheet-center"> Deflection </b>                                                        
          <span class="sheet-gold-color sheet-center" name="attr_psi_deflection_level" value="@{psi_deflection_level}"></span>
          <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_deflection_points" value="0" type="number" title="Your earned points go here">                            
          <span class="sheet-red-color sheet-center" name="attr_psi_deflection_points_available" title="Available points assignable to the various Defense Bonuses from Deflection."></span>   
          <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_deflection_sub_points" value="0" type="number">
          <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_deflection_custom_sub_points" value="0" type="number">

          <b class="sheet-blue-color sheet-center"> Melee Def+</b>                                   
          <span class="sheet-red-color sheet-center" name="attr_psi_deflection_melee_defense_bonus" value="@{psi_deflection_melee_defense_bonus}"></span>
          <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_deflection_melee_def_points" value="0" type="number" title="You get one point to place into one defensive Every Deflection Level">                                      
          
          
          <!-- ROW 3 -->
          <b class="sheet-blue-color sheet-center"> Ranged Def+</b>    
          <span class="sheet-red-color sheet-center" name="attr_psi_deflection_ranged_defense_bonus" value="@{psi_deflection_ranged_defense_bonus}"></span>
          <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_deflection_ranged_def_points" value="0" type="number" title="You get one point to place into one defensive Every Deflection Level">                      
          

          <!-- ROW 4 -->
          <b class="sheet-blue-color sheet-center"> Mental Def+</b>    
          <span class="sheet-red-color sheet-center" name="attr_psi_deflection_mentals_defense_bonus" value="@{psi_deflection_mentals_defense_bonus}"></span>
          <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_deflection_mental_def_points" value="0" type="number" title="You get one point to place into one defensive Every Deflection Level">                      
          

          <!-- ROW 5 -->
          <b class="sheet-blue-color sheet-center"> Ship Def+</b> 
          <span class="sheet-red-color sheet-center" name="attr_psi_deflection_ship_defense_bonus" value="@{psi_deflection_ship_defense_bonus}"></span>
          <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_deflection_ship_def_points" value="0" type="number" title="You get one point to place into one defensive Every Deflection Level">                
        </div>
        <fieldset class="repeating_deflectionsubskills">
        <div class="sheet-edit-repeating-deflection">
          <b class="sheet-gold-color sheet-center"> Roll </b>
          <b class="sheet-gold-color sheet-center"> Ability </b>
          <b class="sheet-gold-color sheet-center"> Level </b>
          <b class="sheet-gold-color sheet-center"> Points </b>
          <b class="sheet-gold-color sheet-center"> Attribute</b>
          <b class="sheet-gold-color sheet-center"> RE: </b>
          <b class="sheet-gold-color sheet-center"> LE: </b>
          <b class="sheet-gold-color sheet-center"> Dice </b>
          <b class="sheet-gold-color sheet-center"> Notes </b>            
          <!-- ROW 2 -->
          <button class="sheet-button-roll sheet-blue-color sheet-center" style="width: 55px;" type="roll" value="&{template:default} {{name= @{deflectionsubskillname}}} {{@{deflectionsubskillname} Roll=[[1D20+@{deflectionsubskilllevel}+@{deflectionsubskillattribute}]]}} {{RE Used=@{deflectionsubskillre}}} {{LE Used=@{deflectionsubskillle}}} {{Effect Dice= [[@{deflectionsubskilldice}]]}} {{@{deflectionsubskillname} Notes=@{deflectionsubskillnotes}}}" ></button>
          <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_deflectionsubskillname" type="text" style="width: 110px;">
          <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_deflectionsubskilllevel" value="floor(@{deflectionsubskillpoints} / 2)" type="number" style="width:52px" disabled/>
          <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_deflectionsubskillpoints" value="0" type="number" style="width:52px">  
          <select class="sheet-dropdown sheet-blue-color sheet-center" name="attr_deflectionsubskillattribute" style="height: 25px; width:110px;"> 
            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{strength}">Strength</option>
            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{dexterity}">Dexterity</option>
            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{constitution}">Constitution</option>
            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{intelligence}">Intelligence</option>
            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{wisdom}">Wisdom</option>
            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{charisma}">Charisma</option>
            <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{attribute_dropdown_none}">None</option>
          </select>          
          <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_deflectionsubskillre" value="0" type="number" style="width: 52px">
          <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_deflectionsubskillle" type="text" style="width: 52px">
          <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_deflectionsubskilldice" type="text" style="width: 75px; font-size: x-small;">
          <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_deflectionsubskillnotes" type="text" style="width: 230px; font-size: small;"> 
        </div>
      </fieldset> 
     </div>

    <div class="sheet-domination">
        <h2>Domination</h2>
        <div class="sheet-edit-psi-domination sheet-block-2px sheet-psi-scrollable-130">
            <b class="sheet-gold-color sheet-center"> Roll </b>   
            <b class="sheet-gold-color sheet-center"> Ability </b>   
            <b class="sheet-gold-color sheet-center"> Level </b>   
            <b class="sheet-gold-color sheet-center"> Points </b>   
            <b class="sheet-gold-color sheet-center"> RE: </b>   
            <b class="sheet-gold-color sheet-center"> LE: </b>   
            <b class="sheet-gold-color sheet-center"> Available </b>
            <span disabled></span>
            <span disabled></span>
    
            <!-- Row 1 -->
            <button class="sheet-button-roll sheet-red-color"  type="roll" value="&{template:default} {{name= Domination}} {{Domination Roll=[[1D20+@{psi_domination_level}+@{charisma}+floor(@{psi_domination_re}/10)]]}} {{RE Used=@{psi_domination_re}}}" ></button>
            <b class="sheet-gold-color sheet-center"> Domination </b>     
            <span class="sheet-red-color sheet-center" name="attr_psi_domination_level" value="@{psi_domination_level}"></span>            
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_domination_points" value="0" type="number" title="Your earned points go here">                  
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_re" value="0" type="number" title="RE Invested into Domination.">    
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_le" value="0" type="number" title="LE Invested into Domination.">                              
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_points_available" value="[[(@{psi_domination_level}-(@{psi_domination_empathy_insight_bonus_points}))]]" type="number" title="Available points assignable to the various Defense Bonuses from Deflection." disabled>               
            <span disabled></span>
            <span disabled></span>

            <!-- ROW 2 -->            
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name= Empathy}} {{Empathy Roll=[[1D20+@{psi_domination_empathy_insight_bonus}+@{wisdom}]]}} {{RE Used=@{psi_domination_empathy_insight_bonus_re}}}"></button>
            <b class="sheet-blue-color sheet-center"> Empathy </b>
            <span class="sheet-red-color sheet-center" name="attr_psi_domination_empathy_insight_bonus" value="@{psi_domination_empathy_insight_bonus}"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_empathy_insight_bonus_points" value="0" type="number" title="">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_empathy_insight_bonus_re" value="0" type="number" title="RE Invested into boosting Empathy">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_empathy_insight_bonus_le" value="0" type="number" title="LE Invested into boosting Empathy">
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>

            <!-- ROW 3 -->
            <button class="sheet-button-roll sheet-red-color"  type="roll" value="&{template:default} {{name= Read Thoughts}} {{Read Thoughts Roll=[[1D20+@{psi_domination_read_thoughts_bonus}+@{wisdom}]]}} {{RE Used=@{psi_domination_read_thoughts_bonus_re}}}" ></button>
            <b class="sheet-blue-color sheet-center"> Read Thoughts </b>                                   
            <span class="sheet-red-color sheet-center" name="attr_psi_domination_read_thoughts_bonus" value="@{psi_domination_read_thoughts_bonus}"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_read_thoughts_bonus_points" value="0" type="number" title="">                  
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_read_thoughts_bonus_re" value="0" type="number" title="RE Invested into boosting Reading Thoughts">                  
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_read_thoughts_bonus_le" value="0" type="number" title="LE Invested into boosting Reading Thoughts">                              
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>

            <!-- ROW 4 -->
            <button class="sheet-button-roll sheet-red-color"  type="roll" value="&{template:default} {{name= Charm}} {{Charm Roll=[[1D20+@{psi_domination_charm_bonus}+@{wisdom}]]}} {{RE Used=@{psi_domination_charm_bonus_re}}}"></button>
            <b class="sheet-blue-color sheet-center"> Charm </b>                                   
            <span class="sheet-red-color sheet-center" name="attr_psi_domination_charm_bonus" value="@{psi_domination_charm_bonus}"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_charm_bonus_points" value="0" type="number" title="">                  
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_charm_bonus_re" value="0" type="number" title="RE Invested into boosting Charm">                  
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_charm_bonus_le" value="0" type="number" title="LE Invested into boosting Charm">                              
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
 
            <!-- Suggestion -->
            <button class="sheet-button-roll sheet-red-color"  type="roll" value="&{template:default} {{name= Suggestion}} {{Suggestion Roll=[[1D20+@{psi_domination_suggestion_bonus}+@{wisdom}+floor(@{psi_domination_suggestion_bonus_re}/5)]]}} {{RE Used=@{psi_domination_suggestion_bonus_re}}}" ></button>
            <b class="sheet-blue-color sheet-center"> Suggestion </b>                                   
            <span class="sheet-red-color sheet-center" name="attr_psi_domination_suggestion_bonus" value="@{psi_domination_suggestion_bonus}"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_suggestion_bonus_points" value="0" type="number" title="">                  
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_suggestion_bonus_re" value="0" type="number" title="RE Invested into boosting Suggestion">                  
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_suggestion_bonus_le" value="0" type="number" title="LE Invested into boosting Suggestion">                  
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Command -->
            <button class="sheet-button-roll sheet-red-color"  type="roll" value="&{template:default} {{name= Command}} {{Command Roll=[[1D20+@{psi_domination_command_bonus}+@{wisdom}+floor(@{psi_domination_command_bonus_re}/5)]]}} {{RE Used=@{psi_domination_command_bonus_re}}}" ></button>
            <b class="sheet-blue-color sheet-center"> Command </b>                                   
            <span class="sheet-red-color sheet-center" name="attr_psi_domination_command_bonus" value="@{psi_domination_command_bonus}"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_command_bonus_points" value="0" type="number" title="">                  
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_command_bonus_re" value="0" type="number" title="RE Invested into boosting Command">                  
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_command_bonus_re" value="0" type="number" title="RE Invested into boosting Command">      
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
 
            <!-- Hallucination -->
            <button class="sheet-button-roll sheet-red-color"  type="roll" value="&{template:default} {{name= Hallucination}} {{Hallucination Roll=[[1D20+@{psi_domination_hallucination_bonus}+@{wisdom}+floor(@{psi_domination_hallucination_bonus_re}/5)]]}} {{RE Used=@{psi_domination_hallucination_bonus_re}}}" ></button>
            <b class="sheet-blue-color sheet-center"> Hallucination </b>                                   
            <span class="sheet-red-color sheet-center" name="attr_psi_domination_hallucination_bonus" value="@{psi_domination_hallucination_bonus}"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_hallucination_bonus_points" value="0" type="number" title="">                  
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_hallucination_bonus_re" value="0" type="number" title="RE Invested into boosting Hallucination">                  
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_hallucination_bonus_le" value="0" type="number" title="RE Invested into boosting Hallucination">                  
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Mind Spike -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name=Mind Spike}} {{Attack Roll=[[1D20+@{charisma}+@{psi_domination_mind_spike_bonus_points}]]}} {{Damage=[[@{psi_domination_mind_spike_bonus}]]}} {{RE Used=@{psi_domination_mind_spike_re}}} {{LE Used=@{psi_domination_mind_spike_le}}} {{Saving Throw= Mind Spike Attack roll vs Mental Defense. Failure does Intelligence damage. Multiple targets may be targeted, maximum targets equal to 1/4 your intelligence score. The attack roll and damage is then divided among all the targets. Those who succeed are safe. -1 Intelligence is a vegatative state from Mind Spike}} "></button>
            <b class="sheet-blue-color sheet-center" style="font-size: small;" title="Mind Spike deals Intelligence damage.">Mind Spike</b>
            <span class="sheet-red-color sheet-center" name="attr_psi_domination_mind_spike_level" value="0" type="number" title=""></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_mind_spike_points" value="0" type="number" title="">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_mind_spike_re" value="0" type="number">               
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_mind_spike_le" value="0" type="number">
            <span class="sheet-red-color sheet-center" name="attr_psi_domination_mind_spike_bonus" value="@{psi_domination_mind_spike_bonus}"></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Remote Heal -->                                                                                                                                                                                 
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name=Remote Healing}} {{Remote Healing Roll=[[1d1+@{psi_domination_remote_heal_formula}]]}} {{LE Used=@{psi_domination_remote_heal_le}}} {{Range=Touch (Sphere with Clairvoyance)}}" ></button>
            <b class="sheet-blue-color sheet-center" style="font-size: small;"> Remote Healing </b>                                   
            <span class="sheet-red-color sheet-center" name="attr_psi_domination_remote_heal_level" value="0" type="number" title=""></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_remote_heal_points" value="0" type="number" title="">                  
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_remote_heal_re" value="0" type="number">               
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_domination_remote_heal_le" value="0" type="number">
            <span class="sheet-red-color sheet-center" name="attr_psi_domination_remote_heal_dice" value=""></span>
            <span disabled></span>
            <span disabled></span>
                
        
            
        </div>
        <fieldset class="repeating_dominationsubskills">
          <div class="sheet-edit-repeating-domination">
            <b class="sheet-gold-color sheet-center"> Roll </b>
            <b class="sheet-gold-color sheet-center"> Ability </b>
            <b class="sheet-gold-color sheet-center"> Level </b>
            <b class="sheet-gold-color sheet-center"> Points </b>
            <b class="sheet-gold-color sheet-center"> Attribute</b>
            <b class="sheet-gold-color sheet-center"> RE: </b>
            <b class="sheet-gold-color sheet-center"> LE: </b>
            <b class="sheet-gold-color sheet-center"> Dice </b>
            <b class="sheet-gold-color sheet-center"> Notes </b>
            

            <button class="sheet-button-roll sheet-blue-color sheet-center" style="width: 60px;" type="roll" value="&{template:default} {{name= @{dominationsubskillname}}} {{@{dominationsubskillname} Roll=[[1D20+@{dominationsubskilllevel}+@{dominationsubskillattribute}]]}} {{RE Used=@{dominationsubskillre}}} {{LE Used=@{dominationsubskillle}}} {{Effect Dice=[[@{dominationsubskilldice}]]}} {{@{dominationsubskillname} Notes= @{dominationsubskillnotes}}}" ></button>
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_dominationsubskillname" type="text" style="width: 100px;">
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_dominationsubskilllevel" value="floor(@{dominationsubskillpoints} /2)" type="number" style="width:52px" disabled/>
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_dominationsubskillpoints" value="0" type="number" style="width:52px">  
            <select class="sheet-dropdown sheet-blue-color sheet-center" name="attr_dominationsubskillattribute" style="height: 25px; width:110px;"> 
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{strength}">Strength</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{dexterity}">Dexterity</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{constitution}">Constitution</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{intelligence}">Intelligence</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{wisdom}">Wisdom</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{charisma}">Charisma</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{attribute_dropdown_none}">None</option>
            </select>          
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_dominationsubskillre" value="0" type="number" style="width: 52px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_dominationsubskillle" type="text" style="width: 52px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_dominationsubskilldice" type="text" style="width: 75px; font-size: x-small;">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_dominationsubskillnotes" type="text" style="width: 230px; font-size: small;"> 
          </div>
        </fieldset> 
    </div>

    <div class="sheet-energy-communion">
        <h2>Energy Communion</h2>
        <!-- Add your HTML HERE -->
        <div class="sheet-edit-psi-energy-communion sheet-block-2px sheet-psi-scrollable-130">
            <b class="sheet-gold-color sheet-center"> Roll </b>   
            <b class="sheet-gold-color sheet-center"> Ability </b>   
            <b class="sheet-gold-color sheet-center"> Level </b>   
            <b class="sheet-gold-color sheet-center"> Points </b>   
            <b class="sheet-gold-color sheet-center"> RE: </b>   
            <b class="sheet-gold-color sheet-center"> LE: </b>   
            <b class="sheet-gold-color sheet-center"> Available </b>
            <span disabled></span>
            <span disabled></span>
              
            <button class="sheet-button-roll sheet-red-color"  type="roll" value="&{template:default} {{name= Energy Communion}} {{Energy Communion Roll=[[1D20+@{psi_energy_communion_level}+@{intelligence}+floor(@{psi_energy_communion_re}/10)]]}} {{RE Used=@{psi_energy_communion_re}}}" ></button>
            <b class="sheet-gold-color sheet-center" style="font-size: small;"> E.Comm Level </b>
            <span class="sheet-red-color sheet-center" name="attr_psi_energy_communion_level" value="@{psi_energy_communion_level}"></span>                              
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_energy_communion_points" value="0" type="number" title="Your earned points go here">                  
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_energy_communion_re" value="0" type="number" title="RE invested into Energy Communion.">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_energy_communion_le" value="0" type="number" title="Life Energy invested into Energy Communion.">            
            <span class="sheet-red-color sheet-center" name="attr_psi_energy_communion_points_available" value="@psi_energy_communion_points_available"></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Energize -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name=Energize}} {{Energize Roll=[[1D20+@{psi_energy_communion_energize_watts_bonus}+@{intelligence}]]}} {{Power per Turn=[[@{psi_energy_communion_energize_turn}+floor(@{psi_energy_communion_energize_watts_bonus_re}/10)]]}} {{Power per Minute=[[@{psi_energy_communion_energize_min}]]}} {{kWH=[[@{psi_energy_communion_energize_hour}]]}}  {{RE Used=@{psi_energy_communion_energize_watts_bonus_re}}} {{LE Used=@{psi_energy_communion_energize_le}}}" ></button>
            <b class="sheet-blue-color sheet-center">Energize</b>
            <span class="sheet-red-color sheet-center" name="attr_psi_energy_communion_energize_watts_bonus"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_energy_communion_energize_bonus_points" value="0" type="number" title="Upgrade Power Output">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_energy_communion_energize_watts_bonus_re" value="0" type="number" title="Boost Watts With RE">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_energy_communion_energize_watts_bonus_le" value="0" type="number" title="Life Energy invested into Energize.">
            <span class="sheet-blue-color sheet-center">Turn: <span class="sheet-red-color sheet-center" name="attr_psi_energy_communion_energize_turn" value="[[@{psi_energy_communion_energize_turn}]]"></span></span>
            <span class="sheet-blue-color sheet-center">Min:  <span class="sheet-red-color sheet-center" name="attr_psi_energy_communion_energize_min" value="[[@{psi_energy_communion_energize_min}]]"></span></span>
            <span class="sheet-blue-color sheet-center">kWH:  <span class="sheet-red-color sheet-center" name="attr_psi_energy_communion_energize_hour" value="[[@{psi_energy_communion_energize_hour}]]"></span></span>

            <!-- Disable -->
            <button class="sheet-button-roll sheet-red-color"  type="roll" value="&{template:default} {{name=Disable}} {{DisableRoll=[[1D20+@{psi_energy_communion_disable_bonus}+@{intelligence}+floor(@{psi_energy_communion_disable_bonus_re}/10)]]}} {{RE Used=@{psi_energy_communion_disable_bonus_re}}}" ></button>
            <b class="sheet-blue-color sheet-center"> Disable </b>                                   
            <span class="sheet-red-color sheet-center" name="attr_psi_energy_communion_disable_bonus"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_energy_communion_disable_bonus_points" value="0" type="number" title="Disable Device Power Output">                  
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_energy_communion_disable_bonus_re" value="0" type="number" title="Boost Attack With RE">                  
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_energy_communion_disable_bonus_le" value="0" type="number" title="Life Energy invested into Disable">
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Electrocute -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name=Electrocute}} {{Electrocute Attack Roll=[[1D20+@{intelligence}+@{psi_energy_communion_level}]]}} {{Electrocute Damage=[[@{psi_energy_communion_electrocute_dice}+@{intelligence}]]}} {{RE Used=@{psi_energy_communion_electrocute_re}}} {{LE Used=@{psi_energy_communion_electrocute_le}}}"></button>
            <b class="sheet-blue-color sheet-center" style="font-size: small;"> Electrocute </b>                                   
            <span class="sheet-red-color sheet-center" name="attr_psi_energy_communion_electrocute_level" ></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_energy_communion_electrocute_points" value="0" type="number" title="">                  
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_energy_communion_electrocute_re" value="0" type="number">  
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_energy_communion_electrocute_le" value="0" type="number">            
            <span class="sheet-red-color sheet-center" name="attr_psi_energy_communion_electrocute_dice"></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Energy Shield -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name=Energy Shield}} {{Energy Shield HP=[[@{psi_energy_communion_energy_shield_dice}]]}} {{Shield P+= @{psi_energy_communion_energy_shield_p_plus}}} {{Shield Damage Reduction=@{psi_energy_communion_energy_shield_damage_reduction}}} {{RE Used=@{psi_energy_communion_energy_shield_re}}} {{LE Used=@{psi_energy_communion_energy_shield_le}}}" ></button>
            <b class="sheet-blue-color sheet-center" style="font-size: small;">Energy Shield</b>                                   
            <span class="sheet-red-color sheet-center" name="attr_psi_energy_communion_energy_shield_level" value="0" type="number"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_energy_communion_energy_shield_points" value="0" type="number" title="Your shield level">                  
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_energy_communion_energy_shield_re" value="0" type="number">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_energy_communion_energy_shield_le" value="0" type="number" title="Boosts Shield P+, HP, and Damage Reduction with Life Energy">   
            <span class="sheet-red-color sheet-center" name="attr_psi_energy_communion_energy_shield_dice" data-attr="psi_energy_communion_energy_shield_dice"></span>
            <span class="sheet-blue-color sheet-center">P+ <span class="sheet-red-color sheet-center" name="attr_psi_energy_communion_energy_shield_p_plus"></span></span>
            <span class="sheet-blue-color sheet-center">Dmg-  <span class="sheet-red-color sheet-center" name="attr_psi_energy_communion_energy_shield_damage_reduction"></span></span>
            <span disabled></span>
         
        </div>       
        <fieldset class="repeating_energycommunionsubskills">
          <div class="sheet-edit-repeating-energy-communion">
            <b class="sheet-gold-color sheet-center"> Roll </b>
            <b class="sheet-gold-color sheet-center"> Ability </b>
            <b class="sheet-gold-color sheet-center"> Level </b>
            <b class="sheet-gold-color sheet-center"> Points </b>
            <b class="sheet-gold-color sheet-center"> Attribute</b>
            <b class="sheet-gold-color sheet-center"> RE: </b>
            <b class="sheet-gold-color sheet-center"> LE: </b>
            <b class="sheet-gold-color sheet-center"> Dice </b>
            <b class="sheet-gold-color sheet-center"> Notes </b>
            

            <button class="sheet-button-roll sheet-blue-color sheet-center" style="width: 60px;" type="roll" value="&{template:default} {{name= @{energycommunionsubskillname}}} {{@{energycommunionsubskillname} Roll=[[1D20+@{energycommunionsubskilllevel}+@{energycommunionsubskillattribute}]]}} {{RE Used=@{energycommunionsubskillre}}} {{LE Used=@{energycommunionsubskillle}}} {{Effect Dice=[[@{energycommunionsubskilldice}]]}} {{@{energycommunionsubskillname} Notes=@{energycommunionsubskillnotes}}}" ></button>
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_energycommunionsubskillname" type="text" style="width: 100px;">
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_energycommunionsubskilllevel" value="floor(@{energycommunionsubskillpoints} /2)" type="number" style="width:52px" disabled/>
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_energycommunionsubskillpoints" value="0" type="number" style="width:52px">  
            <select class="sheet-dropdown sheet-blue-color sheet-center" name="attr_energycommunionsubskillattribute" style="height: 28px; width: 110px;"> 
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{strength}">Strength</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{dexterity}">Dexterity</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{constitution}">Constitution</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{intelligence}">Intelligence</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{wisdom}">Wisdom</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{charisma}">Charisma</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{attribute_dropdown_none}">None</option>
            </select>          
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_energycommunionsubskillre" value="0" type="number" style="width: 52px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_energycommunionsubskillle" type="text" style="width: 52px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_energycommunionsubskilldice" type="text" style="width: 75px; font-size: x-small;">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_energycommunionsubskillnotes" type="text" style="width: 230px; font-size: small;"> 
          </div>
        </fieldset>  
    </div>

    <div class="sheet-molecular-alteration">
        <h2>Molecular Alteration</h2>
        <div class="sheet-edit-psi-molecular-alteration sheet-block-2px sheet-psi-scrollable-130">
            <!-- HTML GOES HERE -->        
            <b class="sheet-gold-color sheet-center"> Roll </b>
            <b class="sheet-gold-color sheet-center"> Ability </b>
            <b class="sheet-gold-color sheet-center"> Level </b>
            <b class="sheet-gold-color sheet-center"> Points </b>
            <b class="sheet-gold-color sheet-center"> RE: </b>
            <b class="sheet-gold-color sheet-center"> LE: </b>
            <b class="sheet-gold-color sheet-center"> Available </b>
            <span disabled></span>
            <span disabled></span>
            
            <button class="sheet-button-roll sheet-gold-color" type="roll" value="&{template:default} {{name= Molecular Alteration}} {{Molecular Alteration Roll=[[1D20+@{psi_molecular_alteration_level}]]}} {{RE Used=@{psi_molecular_alteration_re}}} {{LE Used=@{psi_molecular_alteration_le}}}" ></button>
            <b class="sheet-gold-color sheet-center" style="font-size: small;"> M. Alter Level </b>
            <span class="sheet-gold-color sheet-center" name="attr_psi_molecular_alteration_level" value="@{psi_molecular_alteration_level}"></span>
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_molecular_alteration_points" value="0" type="number" title="Your earned points go here">
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_molecular_alteration_re" value="0" type="number" title="RE invested into Molecular Alteration.">
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_molecular_alteration_le" value="0" type="number" title="Life Energy invested into Molecular Alteration.">
            <span class="sheet-gold-color sheet-center" name="attr_psi_molecular_alteration_available_points" value="0" type="number" title="Available points assignable to the various Molecular Alteration abilities."></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Liquify -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name=Liquify}} {{Liquify Attack Roll=[[1D20+@{intelligence}+@{psi_molecular_alteration_level}]]}} {{Liquify Damage=[[@{psi_molecular_alteration_liquify_dice}+@{intelligence}]]}} {{RE Used=@{psi_molecular_alteration_liquify_re}}} {{LE Used=@{psi_molecular_alteration_liquify_le}}} {{Range=Touch}}" ></button>
            <b class="sheet-blue-color sheet-center" style="font-size: small;">Liquify</b>
            <span class="sheet-red-color sheet-center" name="attr_psi_molecular_alteration_liquify_level" value="@{psi_molecular_alteration_liquify_level}"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_molecular_alteration_liquify_points" value="0" type="number" title="">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_molecular_alteration_liquify_re" value="0" type="number">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_molecular_alteration_liquify_le" value="0" type="number">
            <span class="sheet-red-color sheet-center" name="attr_psi_molecular_alteration_liquify_dice"></span>
            <span disabled></span>
            <span disabled></span>       

            <!-- Repair -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name=Repair}} {{Repair Roll=[[1D20+@{intelligence}+@{psi_molecular_alteration_level}]]}} {{Repair Damage=[[@{psi_molecular_alteration_repair_armor_dice}+@{intelligence}]]}} {{RE Used=@{psi_molecular_alteration_repair_armor_re}}} {{LE Used=@{psi_molecular_alteration_mold_material_le}}} {{Range= Touch}}" ></button>
            <b class="sheet-blue-color sheet-center" style="font-size: small;">Repair</b>
            <span class="sheet-red-color sheet-center" name="attr_psi_molecular_alteration_repair_level" value="@{psi_molecular_alteration_repair_level}"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_molecular_alteration_repair_armor_points" value="0" type="number" title="">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_molecular_alteration_repair_armor_re" value="0" type="number">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_molecular_alteration_repair_armor_le" value="0" type="number">            
            <span class="sheet-red-color sheet-center" name="attr_psi_molecular_alteration_repair_armor_dice"></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Reshape -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name=Reshape}} {{Reshape Roll=[[1D20+@{psi_molecular_alteration_level}]]}} {{Reshape HP=[[@{psi_molecular_alteration_reshape_dice}+@{intelligence}]]}} {{RE Used=@{psi_molecular_alteration_reshape_re}}} {{LE Used=@{psi_molecular_alteration_mold_material_le}}} {{Range= Touch}}" ></button>
            <b class="sheet-blue-color sheet-center" style="font-size: small;">Reshape</b>
            <span class="sheet-red-color sheet-center" name="attr_psi_molecular_alteration_reshape_level" value="@{psi_molecular_alteration_reshape_level}"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_molecular_alteration_reshape_points" value="0" type="number" title="">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_molecular_alteration_reshape_re" value="0" type="number">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_molecular_alteration_reshape_le" value="0" type="number">
            <span class="sheet-red-color sheet-center" name="attr_psi_molecular_alteration_reshape_dice"></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Form -->
            <button class="sheet-button-roll sheet-blue-color" type="roll" value="&{template:default} {{name= Molecular Alteration}} {{Molecular Alteration Roll=[[1D20+@{psi_molecular_alteration_form_level}+@{intelligence}]]}} {{RE Used=@{psi_molecular_alteration_re}}} {{LE Used=@{psi_molecular_alteration_le}}}" ></button>
            <b class="sheet-blue-color sheet-center" style="font-size: small;"> Form </b>
            <span class="sheet-red-color sheet-center" name="attr_psi_molecular_alteration_form_level" title="Your form Blueprint Level can be used to reduce the Level Cost of your Blueprint. You may divide your Form Level across your properties, or focus."></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_molecular_alteration_form_points" value="0" type="number" title="Your earned points go here">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_molecular_alteration_form_re" value="0" type="number" title="RE invested into Molecular Alteration.">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_molecular_alteration_form_le" value="0" type="number" title="Life Energy invested into Molecular Alteration.">
            <span disabled></span>           
            <span disabled></span>
            <span disabled></span>
            <!-- Blueprints -->
            <span disabled></span>
            <b class="sheet-blue-color sheet-center" style="font-size: small;" title="Various Properties Of The Item Being Formed"> Property Names </b>
            <input class="sheet-inputfield120 sheet-blue-color sheet-center" name="attr_psi_molecular_alteration_form_blueprint_name_1" type="text" title="Name Of Property">
            <input class="sheet-inputfield75 sheet-blue-color sheet-center" name="attr_psi_molecular_alteration_form_blueprint_name_2" type="text" title="Name Of Property">
            <input class="sheet-inputfield75 sheet-blue-color sheet-center" name="attr_psi_molecular_alteration_form_blueprint_name_3" type="text" title="Name Of Property">
            <input class="sheet-inputfield75 sheet-blue-color sheet-center" name="attr_psi_molecular_alteration_form_blueprint_name_4" type="text" title="Name Of Property">
            <input class="sheet-inputfield75 sheet-blue-color sheet-center" name="attr_psi_molecular_alteration_form_blueprint_name_5" type="text" title="Name Of Property">
            <input class="sheet-inputfield75 sheet-blue-color sheet-center" name="attr_psi_molecular_alteration_form_blueprint_name_6" type="text" title="Name Of Property">
            <input class="sheet-inputfield75 sheet-blue-color sheet-center" name="attr_psi_molecular_alteration_form_blueprint_name_7" type="text" title="Name Of Property">

            <!-- Blueprint Bonus Row -->
            
            <b class="sheet-blue-color sheet-center" style="font-size: small;"> TL </b>
            <input class="sheet-inputfield75 sheet-red-color sheet-center" style="width:75px" name="attr_psi_molecular_alteration_form_tech_level" value="0" type="number" title="Name Of Property">
            <b class="sheet-red-color sheet-center" style="font-size: small;"> Bonuses: >>> </b>
            <span class="sheet-red-color sheet-center" name="attr_psi_molecular_alteration_form_blueprint_bonus_2" value="@{psi_molecular_alteration_form_blueprint_bonus_2}"  title="Property Bonus"></span>
            <span class="sheet-red-color sheet-center" name="attr_psi_molecular_alteration_form_blueprint_bonus_3" value="@{psi_molecular_alteration_form_blueprint_bonus_3}"  title="Name Of Property"></span>
            <span class="sheet-red-color sheet-center" name="attr_psi_molecular_alteration_form_blueprint_bonus_4" value="@{psi_molecular_alteration_form_blueprint_bonus_4}"  title="Name Of Property"></span>
            <span class="sheet-red-color sheet-center" name="attr_psi_molecular_alteration_form_blueprint_bonus_5" value="@{psi_molecular_alteration_form_blueprint_bonus_5}"  title="Name Of Property"></span>
            <span class="sheet-red-color sheet-center" name="attr_psi_molecular_alteration_form_blueprint_bonus_6" value="@{psi_molecular_alteration_form_blueprint_bonus_6}"  title="Name Of Property"></span>
            <span class="sheet-red-color sheet-center" name="attr_psi_molecular_alteration_form_blueprint_bonus_7" value="@{psi_molecular_alteration_form_blueprint_bonus_7}"  title="Name Of Property"></span>
           
            <!-- Blueprint Level Cost-->
            <span disabled></span>
            <span disabled></span>
            <b class="sheet-red-color sheet-center" style="font-size: small;"> Level Costs</b>
            <input class="sheet-inputfield75 sheet-red-color sheet-center"  name="attr_psi_molecular_alteration_form_blueprint_cost_2" value="0" type="number" title="Level cost (Base 16)">
            <input class="sheet-inputfield75 sheet-red-color sheet-center"  name="attr_psi_molecular_alteration_form_blueprint_cost_3" value="0" type="number" title="Level cost (Base 16)">
            <input class="sheet-inputfield75 sheet-red-color sheet-center"  name="attr_psi_molecular_alteration_form_blueprint_cost_4" value="0" type="number" title="Level cost (Base 16)">
            <input class="sheet-inputfield75 sheet-red-color sheet-center"  name="attr_psi_molecular_alteration_form_blueprint_cost_5" value="0" type="number" title="Level cost (Base 16)">
            <input class="sheet-inputfield75 sheet-red-color sheet-center"  name="attr_psi_molecular_alteration_form_blueprint_cost_6" value="0" type="number" title="Level cost (Base 16)">
            <input class="sheet-inputfield75 sheet-red-color sheet-center"  name="attr_psi_molecular_alteration_form_blueprint_cost_7" value="0" type="number" title="Level cost (Base 16)">
        </div>
        <fieldset class="repeating_molecularalterationsubskills">
          <div class="sheet-edit-repeating-molecular-alteration">
            <b class="sheet-gold-color sheet-center"> Roll </b>
            <b class="sheet-gold-color sheet-center"> Ability </b>
            <b class="sheet-gold-color sheet-center"> Level </b>
            <b class="sheet-gold-color sheet-center"> Points </b>
            <b class="sheet-gold-color sheet-center"> Attribute</b>
            <b class="sheet-gold-color sheet-center"> RE: </b>
            <b class="sheet-gold-color sheet-center"> LE: </b>
            <b class="sheet-gold-color sheet-center"> Dice </b>
            <b class="sheet-gold-color sheet-center"> Notes </b>
            

            <button class="sheet-button-roll sheet-blue-color sheet-center" style="width: 60px;" type="roll" value="&{template:default} {{name= @{molecularalterationsubskillname}}} {{@{molecularalterationsubskillname} Roll=[[1D20+@{molecularalterationsubskilllevel}+@{molecularalterationsubskillattribute}]]}} {{RE Used=@{molecularalterationsubskillre}}} {{LE Used=@{molecularalterationsubskillle}}} {{Effect Dice=[[@{molecularalterationsubskilldice}]]}} {{@{molecularalterationsubskillname} Notes=@{molecularalterationsubskillnotes}}}"></button>
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_molecularalterationsubskillname" type="text" style="width: 100px;">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_molecularalterationsubskilllevel" value="floor(@{molecularalterationsubskillpoints} / 2)" type="number" style="width: 52px" disabled/>
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_molecularalterationsubskillpoints" value="0" type="number" style="width: 52px">
            <select class="sheet-dropdown sheet-blue-color sheet-center" name="attr_molecularalterationsubskillattribute" style="height: 25px; width:110px;"> 
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{strength}">Strength</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{dexterity}">Dexterity</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{constitution}">Constitution</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{intelligence}">Intelligence</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{wisdom}">Wisdom</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{charisma}">Charisma</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{attribute_dropdown_none}">None</option>
            </select>          
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_molecularalterationsubskillre" value="0" type="number" style="width: 52px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_molecularalterationsubskillle" type="text" style="width: 52px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_molecularalterationsubskilldice" type="text" style="width: 75px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_molecularalterationsubskillnotes" type="text" style="width: 230px; font-size: x-small;"> 
          </div>
        </fieldset> 
    </div>

    <div class="sheet-pyrokinesis">
        <h2>Pyrokinesis</h2>       
        <div class="sheet-edit-psi-pyrokinesis sheet-block-2px sheet-psi-scrollable-130">        
            <b class="sheet-gold-color sheet-center"> Roll </b>
            <b class="sheet-gold-color sheet-center"> Ability </b>
            <b class="sheet-gold-color sheet-center"> Level </b>
            <b class="sheet-gold-color sheet-center"> Points </b>
            <b class="sheet-gold-color sheet-center"> RE: </b>
            <b class="sheet-gold-color sheet-center"> LE: </b>
            <b class="sheet-gold-color sheet-center"> Available </b>
            <span disabled></span>
            <span disabled></span>
            
            <button class="sheet-button-roll sheet-gold-color" type="roll" value="&{template:default} {{name= Pyrokinesis}} {{Pyrokinesis Roll=[[1D20+@{psi_pyrokinesis_level}]]}} {{RE Used=@{psi_pyrokinesis_re}}} {{LE Used=@{psi_pyrokinesis_le}}}" ></button>
            <b class="sheet-gold-color sheet-center" style="font-size: small;"> Pyrokinesis Level </b>
            <span class="sheet-gold-color sheet-center" name="attr_psi_pyrokinesis_level" value="@{psi_pyrokinesis_level}"></span>
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_pyrokinesis_points" value="0" type="number" title="Your earned points go here">
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_pyrokinesis_re" value="0" type="number" title="RE invested into Pyrokinesis.">
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_pyrokinesis_le" value="0" type="number" title="Life Energy invested into Pyrokinesis.">
            <span class="sheet-gold-color sheet-center" name="attr_psi_pyrokinesis_points_available"></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Temperature -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name=Temperature}} {{Temperature Roll=[[1D20+@{psi_pyrokinesis_temperature_level}]]}} {{Temperature=[[@{psi_pyrokinesis_temperature}+@{charisma}]]}} {{RE Used=@{psi_pyrokinesis_temperature_re}}} {{LE Used=@{psi_pyrokinesis_temperature_le}}} {{Range= Room up to 2x Sphere, if outside within Sphere}}" ></button>
            <b class="sheet-blue-color sheet-center" style="font-size: small;">Temperature</b>            
            <span class="sheet-red-color sheet-center" name="attr_psi_pyrokinesis_temperature"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_pyrokinesis_temperature_points" value="0" type="number" title="">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_pyrokinesis_temperature_re" value="0" type="number">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_pyrokinesis_temperature_le" value="0" type="number">
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Flame Tongue -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name=Flame Tongue}} {{Flame Tongue Attack Roll=[[1D20+@{psi_pyrokinesis_level}+@{dexterity}]]}} {{Flame Tongue Damage=[[@{psi_pyrokinesis_flame_tongue_dice}+@{charisma}]]}} {{RE Used=@{psi_pyrokinesis_flame_tongue_re}}} {{LE Used=@{psi_pyrokinesis_flame_tongue_le}}} {{Range=Sphere}}" ></button>
            <b class="sheet-blue-color sheet-center" style="font-size: small;">Flame Tongue</b>
            <span class="sheet-red-color sheet-center" name="attr_psi_pyrokinesis_flame_tongue_level"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_pyrokinesis_flame_tongue_points" value="0" type="number" title="">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_pyrokinesis_flame_tongue_re" value="0" type="number">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_pyrokinesis_flame_tongue_le" value="0" type="number">
            <span class="sheet-red-color sheet-center" name="attr_psi_pyrokinesis_flame_tongue_dice"></span>            
            <span disabled></span>
            <span disabled></span>       

            <!-- Freeze -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name=Freeze}} {{Freeze Roll=[[1D20+@{intelligence}+@{psi_pyrokinesis_level}]]}} {{Freeze Damage=[[@{psi_pyrokinesis_freeze_dice}+@{intelligence}]]}} {{RE Used=@{psi_pyrokinesis_freeze_re}}} {{LE Used=@{psi_pyrokinesis_mold_material_le}}} {{Range= Touch}}" ></button>
            <b class="sheet-blue-color sheet-center" style="font-size: small;">Freeze</b>
            <span class="sheet-red-color sheet-center" name="attr_psi_pyrokinesis_freeze_level"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_pyrokinesis_freeze_points" value="0" type="number" title="">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_pyrokinesis_freeze_re" value="0" type="number">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_pyrokinesis_freeze_le" value="0" type="number">
            <span class="sheet-red-color sheet-center" name="attr_psi_pyrokinesis_freeze_dice"></span>
            <span disabled></span>
            <span disabled></span>        
        </div>
        <fieldset class="repeating_pyrokinesissubskills">
          <div class="sheet-edit-repeating-pyrokinesis">
            <b class="sheet-gold-color sheet-center"> Roll </b>
            <b class="sheet-gold-color sheet-center"> Ability </b>
            <b class="sheet-gold-color sheet-center"> Level </b>
            <b class="sheet-gold-color sheet-center"> Points </b>
            <b class="sheet-gold-color sheet-center"> Attribute</b>
            <b class="sheet-gold-color sheet-center"> RE: </b>
            <b class="sheet-gold-color sheet-center"> LE: </b>
            <b class="sheet-gold-color sheet-center"> Dice </b>
            <b class="sheet-gold-color sheet-center"> Notes </b>
            

            <button class="sheet-button-roll sheet-blue-color sheet-center" style="width: 60px;" type="roll" value="&{template:default} {{name= @{pyrokinesissubskillname}}} {{@{pyrokinesissubskillname} Roll=[[1D20+@{pyrokinesissubskilllevel}+@{pyrokinesissubskillattribute}]]}} {{RE Used=@{pyrokinesissubskillre}}} {{LE Used=@{pyrokinesissubskillle}}} {{Effect Dice=[[@{pyrokinesissubskilldice}]] }} {{@{pyrokinesissubskillname} Notes=@{pyrokinesissubskillnotes}}}" ></button>
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_pyrokinesissubskillname" type="text" style="width: 100px;">
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_pyrokinesissubskilllevel" value="floor(@{pyrokinesissubskillpoints} /2)" type="number" style="width:52px" disabled/>
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_pyrokinesissubskillpoints" value="0" type="number" style="width:52px">  
            <select class="sheet-dropdown sheet-blue-color sheet-center" name="attr_pyrokinesissubskillattribute" style="height: 25px; width:110px;"> 
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{strength}">Strength</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{dexterity}">Dexterity</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{constitution}">Constitution</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{intelligence}">Intelligence</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{wisdom}">Wisdom</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{charisma}">Charisma</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{attribute_dropdown_none}">None</option>
            </select>          
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_pyrokinesissubskillre" value="0" type="number" style="width: 52px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_pyrokinesissubskillle" type="text" style="width: 52px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_pyrokinesissubskilldice" type="text" style="width: 75px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_pyrokinesissubskillnotes" type="text" style="width: 230px; font-size: x-small;"> 
          </div>
        </fieldset> 
    </div>

    <div class="sheet-subatomic-alteration">
        <h2>Subatomic Alteration</h2>        
        <div class="sheet-edit-psi-subatomic-alteration sheet-block-2px sheet-psi-scrollable-130">      
            <b class="sheet-gold-color sheet-center"> Roll </b>
            <b class="sheet-gold-color sheet-center"> Ability </b>
            <b class="sheet-gold-color sheet-center"> Level </b>
            <b class="sheet-gold-color sheet-center"> Points </b>
            <b class="sheet-gold-color sheet-center"> RE Used </b>
            <b class="sheet-gold-color sheet-center"> LE Used </b>
            <b class="sheet-gold-color sheet-center"> Available </b>
            <span class="sheet-red-color sheet-center">Element 1</span>
            <span class="sheet-red-color sheet-center">Mass</span>
            <span class="sheet-red-color sheet-center">Element 2</span>
            <span class="sheet-red-color sheet-center">Mass</span>
            
            <button class="sheet-button-roll sheet-gold-color" type="roll" value="&{template:default} {{name= Telekinesis}} {{Subatomic Level Roll=[[1D20+@{psi_subatomic_alteration_level}]]}} {{RE Used=@{psi_subatomic_alteration_re}}} {{LE Used=@{psi_subatomic_alteration_le}}}" ></button>
            <b class="sheet-gold-color sheet-center" style="font-size: small;"> Subatomic Level </b>
            <span class="sheet-gold-color sheet-center" name="attr_psi_subatomic_alteration_level"></span>
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_subatomic_alteration_points" value="0" type="number" title="Your earned points go here">
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_subatomic_alteration_re" value="0" type="number" title="RE invested into Subatomic Alteration.">
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_subatomic_alteration_le" value="0" type="number" title="Life Energy invested into Subatomic Alteration.">
            <span class="sheet-gold-color sheet-center" name="attr_psi_subatomic_alteration_points_available"></span>
            <select class="sheet-dropdown sheet-blue-color sheet-center sheet-blue-color" name="attr_psi_subatomic_alteration_conversion_element_1" title="Convert From" style="width:90px; font-size: small;">
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Actinium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Aluminum</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Americium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Antimony</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Argon</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Arsenic</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Astatine</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Barium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Berkelium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Beryllium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Bismuth</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Bohrium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Boron</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Bromine</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Cadmium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Calcium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Californium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Carbon</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Cerium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Cesium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Chlorine</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Chromium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Cobalt</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Copernicium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Copper</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Corbomite</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Curium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Darmstadtium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Dubnium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Dysprosium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Einsteinium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Erbium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Europium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Fermium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Fluorine</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Francium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Gadolinium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Gallium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Germanium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Gold</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Hafnium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Hassium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Helium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Holmium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Hydrogen</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Indium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Iodine</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Iridium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Iron</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Krypton</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Lanthanum</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Lawrencium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Lead</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Lithium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Livermorium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Lutetium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Magnesium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Manganese</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Meitnerium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Mendelevium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Mercury</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Molybdenum</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Moscovium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Neodymium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Neon</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Neptunium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Nickel</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Niobium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Nitrogen</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Nobelium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Oganesson</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Osmium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Oxygen</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Palladium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Phosphorus</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Platinum</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Plutonium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Polonium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Potassium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Praseodymium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Promethium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Protactinium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Radium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Radon</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Rhenium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Rhodium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Roentgenium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Rubidium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Ruthenium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Rutherfordium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Samarium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Scandium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Seaborgium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Selenium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Silicon</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Silver</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Sodium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Strontium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Sulfur</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Tantalum</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Technetium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Tellurium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Tennessine</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Terbium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Thallium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Thorium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Thulium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Tin</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Titanium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Tungsten</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Uranium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Vanadium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Xenon</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Ytterbium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Yttrium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Zinc</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Zirconium</option>   
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" selected>None</option>                
            </select>
            <span class="sheet-red-color sheet-center" name="attr_mass_1"></span>            

            <!-- Convert to -->
            <select class="sheet-dropdown sheet-blue-color sheet-center sheet-blue-color" name="attr_psi_subatomic_alteration_conversion_element_2" title="Convert to" style="width:90px; font-size: small;">
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Actinium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Aluminum</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Americium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Antimony</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Argon</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Arsenic</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Astatine</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Barium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Berkelium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Beryllium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Bismuth</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Bohrium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Boron</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Bromine</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Cadmium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Calcium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Californium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Carbon</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Cerium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Cesium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Chlorine</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Chromium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Cobalt</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Copernicium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Copper</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Corbomite</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Curium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Darmstadtium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Dubnium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Dysprosium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Einsteinium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Erbium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Europium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Fermium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Fluorine</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Francium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Gadolinium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Gallium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Germanium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Gold</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Hafnium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Hassium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Helium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Holmium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Hydrogen</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Indium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Iodine</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Iridium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Iron</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Krypton</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Lanthanum</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Lawrencium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Lead</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Lithium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Livermorium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Lutetium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Magnesium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Manganese</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Meitnerium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Mendelevium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Mercury</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Molybdenum</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Moscovium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Neodymium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Neon</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Neptunium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Nickel</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Niobium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Nitrogen</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Nobelium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Oganesson</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Osmium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Oxygen</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Palladium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Phosphorus</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Platinum</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Plutonium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Polonium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Potassium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Praseodymium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Promethium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Protactinium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Radium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Radon</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Rhenium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Rhodium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Roentgenium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Rubidium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Ruthenium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Rutherfordium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Samarium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Scandium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Seaborgium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Selenium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Silicon</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Silver</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Sodium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Strontium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Sulfur</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Tantalum</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Technetium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Tellurium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Tennessine</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Terbium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Thallium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Thorium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Thulium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Tin</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Titanium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Tungsten</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Uranium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Vanadium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Xenon</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Ytterbium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Yttrium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Zinc</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Zirconium</option>        
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" selected>None</option>               
            </select>
            <span class="sheet-red-color sheet-center" name="attr_mass_2"></span>


            <!-- Conversion -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name= Conversion}} {{Meditative State =[[1D20+@{constitution}+@{psi_subatomic_alteration_level}]]}} {{RE Used=@{psi_subatomic_alteration_conversion_re}}} {{LE Used=@{psi_subatomic_alteration_conversion_le}}} {{Conversion Data=You begin converting @{psi_subatomic_alteration_conversion_element_1} into @{psi_subatomic_alteration_conversion_element_2}}} {{Size=@{psi_subatomic_alteration_conversion_size}}} {{Time=@{psi_subatomic_alteration_conversion_time_needed} @{psi_subatomic_alteration_time_unit}}}" ></button>
            <b class="sheet-gold-color sheet-center" style="font-size: small;"> Create / Convert</b>
            <span class="sheet-red-color sheet-center" name="attr_psi_subatomic_alteration_conversion_level" value="@{psi_subatomic_alteration_conversion_level}"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_subatomic_alteration_conversion_points" value="0" type="number" title="Your earned points go here">
            <span class="sheet-red-color sheet-center" name="attr_psi_subatomic_alteration_conversion_re"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_subatomic_alteration_conversion_le" value="0" type="number" title="Life Energy invested into Subatomic Alteration Conversion.">
            
            <!-- ROW 2 -->

            <span disabled></span>
            <span class="sheet-red-color sheet-center">Difference:</span>
            <span class="sheet-red-color sheet-center" name="attr_mass_difference"></span>            
            <select class="sheet-dropdown sheet-blue-color sheet-center sheet-blue-color" name="attr_psi_subatomic_alteration_conversion_size" title="Size" style="width:90px; font-size: small;">
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Micro</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Tiny</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Small</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Medium</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Large</option>                
            </select>            
            <span class="sheet-red-color sheet-center" name="attr_size_multiplier"></span>      
        <!-- Conversion DR's -->
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>
            <span class="sheet-red-color sheet-center" >RE Needed:</span>
            <span class="sheet-red-color sheet-center" name="attr_psi_subatomic_alteration_conversion_re_needed"></span>    
            <select class="sheet-dropdown sheet-blue-color sheet-center sheet-blue-color" name="attr_psi_subatomic_alteration_time_unit" title="Size" style="width:90px; font-size: small;">
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Turns</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Minutes</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Hours</option>
                <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;">Days</option>                
            </select>              
            <span class="sheet-red-color sheet-center" name="attr_psi_subatomic_alteration_conversion_time_needed" title="How much time it takes. Ignore ' - ' symbol."></span>    
        </div>
        <fieldset class="repeating_subatomicalterationsubskills">
          <div class="sheet-edit-repeating-subatomic-alteration">
            <b class="sheet-gold-color sheet-center"> Roll </b>
            <b class="sheet-gold-color sheet-center"> Ability </b>
            <b class="sheet-gold-color sheet-center"> Level </b>
            <b class="sheet-gold-color sheet-center"> Points </b>
            <b class="sheet-gold-color sheet-center"> Attribute</b>
            <b class="sheet-gold-color sheet-center"> RE: </b>
            <b class="sheet-gold-color sheet-center"> LE: </b>
            <b class="sheet-gold-color sheet-center"> Dice </b>
            <b class="sheet-gold-color sheet-center"> Notes </b>            

            <button class="sheet-button-roll sheet-blue-color sheet-center" style="width: 60px; font-size: small;" type="roll" value="&{template:default} {{name= @{subatomicalterationsubskillname}}} {{@{subatomicalterationsubskillname} Roll=[[1D20+@{subatomicalterationsubskilllevel}+@{subatomicalterationsubskillattribute}]]}} {{RE Used=@{subatomicalterationsubskillre}}} {{LE Used=@{subatomicalterationsubskillle}}} {{Effect Dice=[[@{subatomicalterationsubskilldice}]]}} {{@{subatomicalterationsubskillname} Notes=@{subatomicalterationsubskillnotes}}}" ></button>
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_subatomicalterationsubskillname" type="text" style="width: 100px; font-size: small;">
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_subatomicalterationsubskilllevel" value="floor(@{subatomicalterationsubskillpoints} /2)" type="number" style="width:52px; font-size: small;" disabled/>
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_subatomicalterationsubskillpoints" value="0" type="number" style="width:52px; font-size: small;">  
            <select class="sheet-dropdown sheet-blue-color sheet-center" name="attr_subatomicalterationsubskillattribute" style="height: 25px; width:110px; font-size: small;"> 
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{strength}">Strength</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{dexterity}">Dexterity</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{constitution}">Constitution</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{intelligence}">Intelligence</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{wisdom}">Wisdom</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{charisma}">Charisma</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{attribute_dropdown_none}">None</option>
            </select>          
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_subatomicalterationsubskillre" value="0" type="number" style="width: 52px; font-size: small;">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_subatomicalterationsubskillle" type="text" style="width: 52px; font-size: small;">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_subatomicalterationsubskilldice" type="text" style="width: 75px; font-size: small;">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_subatomicalterationsubskillnotes" type="text" style="width: 230px; font-size: x-small;"> 
          </div>
        </fieldset> 
    </div>

    <div class="sheet-telekinesis">
        <h2>Telekinesis</h2>
        <div class="sheet-edit-psi-telekinesis sheet-block-2px sheet-psi-scrollable-130">      
            <b class="sheet-gold-color sheet-center"> Roll </b>
            <b class="sheet-gold-color sheet-center"> Ability </b>
            <b class="sheet-gold-color sheet-center"> Level </b>
            <b class="sheet-gold-color sheet-center"> Points </b>
            <b class="sheet-gold-color sheet-center"> RE: </b>
            <b class="sheet-gold-color sheet-center"> LE: </b>
            <b class="sheet-gold-color sheet-center"> Available </b>
            <span disabled></span>
            <span disabled></span>
            
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name= Telekinesis}} {{Telekinesis Roll=[[1D20+@{psi_telekinesis_level}]]}} {{RE Used=@{psi_telekinesis_re}}} {{LE Used=@{psi_telekinesis_le}}}" ></button>
            <b class="sheet-gold-color sheet-center" style="font-size: small;"> Telekinesis Level </b>
            <span class="sheet-red-color sheet-center" name="attr_psi_telekinesis_level" value="@{psi_telekinesis_level}"></span>
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_telekinesis_points" value="0" type="number" title="Your earned points go here">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_telekinesis_re" value="0" type="number" title="RE invested into Telekinesis.">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_telekinesis_le" value="0" type="number" title="Life Energy invested into Telekinesis.">
            <span class="sheet-red-color sheet-center" name="attr_psi_telekinesis_points_available"></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Telekinetic Blast -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name=Telekinetic Blast}} {{Telekinetic Blast Attack Roll=[[1D20+@{dexterity}+@{psi_telekinesis_level}]]}} {{Telekinetic Blast Damage=[[@{psi_telekinesis_blast_dice}+@{intelligence}]]}} {{RE Used=@{psi_telekinesis_blast_re}}} {{LE Used=@{psi_telekinesis_blast_le}}} {{Range=Double Sphere Radius}}" ></button>
            <b class="sheet-blue-color sheet-center" style="font-size: small;">Telekinetic Blast</b>
            <span class="sheet-red-color sheet-center" name="attr_psi_telekinesis_blast_level"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_telekinesis_blast_points" value="0" type="number" title="">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_telekinesis_blast_re" value="0" type="number">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_telekinesis_blast_le" value="0" type="number">
            <span class="sheet-red-color sheet-center" name="attr_psi_telekinesis_blast_dice"></span>
            <span disabled></span>
            <span disabled></span>       

            <!-- Telekinetic Lift -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name=Telekinetic Lift}} {{Telekinetic Passive Lift Roll=[[@{psi_telekinesis_lift_passive}]]}} {{Telekinetic Burn Lift Damage=@{psi_telekinesis_lift_burn}}} {{RE Used=@{psi_telekinesis_lift_re}}} {{LE Used=@{psi_telekinesis_lift_le}}} {{Range=Sphere}}" ></button>
            <b class="sheet-blue-color sheet-center" style="font-size: small;">Telekinetic Lift</b>
            <span class="sheet-red-color sheet-center" name="attr_psi_telekinesis_lift_passive"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_telekinesis_lift_points" value="0" type="number" title="">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_telekinesis_lift_re" value="0" type="number">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_telekinesis_lift_le" value="0" type="number">
            <span class="sheet-red-color sheet-center" name="attr_psi_telekinesis_lift_burn"></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Telekinetic Crush -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name=Telekinetic Crush}} {{Crush Con Save=[[1D20+@{intelligence}+@{psi_telekinesis_level}]]}} {{Telekinetic Crush Damage=[[@{psi_telekinesis_crush_dice}+@{intelligence}]]}} {{RE Used=@{psi_telekinesis_crush_re}}} {{LE Used=@{psi_telekinesis_crush_le}}} {{Range=Touch}}" ></button>
            <b class="sheet-blue-color sheet-center" style="font-size: small;">Telekinetic Crush</b>
            <span class="sheet-red-color sheet-center" name="attr_psi_telekinesis_crush_level"></span>
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_telekinesis_crush_points" value="0" type="number" title="">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_telekinesis_crush_re" value="0" type="number">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_telekinesis_crush_le" value="0" type="number">
            <span class="sheet-red-color sheet-center" name="attr_psi_telekinesis_crush_dice"></span>
            <span disabled></span>
            <span disabled></span> 

        </div>  
        <fieldset class="repeating_telekinesissubskills">
          <div class="sheet-edit-repeating-telekinesis">
            <b class="sheet-gold-color sheet-center"> Roll </b>
            <b class="sheet-gold-color sheet-center"> Ability </b>
            <b class="sheet-gold-color sheet-center"> Level </b>
            <b class="sheet-gold-color sheet-center"> Points </b>
            <b class="sheet-gold-color sheet-center"> Attribute</b>
            <b class="sheet-gold-color sheet-center"> RE: </b>
            <b class="sheet-gold-color sheet-center"> LE: </b>
            <b class="sheet-gold-color sheet-center"> Dice </b>
            <b class="sheet-gold-color sheet-center"> Notes </b>
            

            <button class="sheet-button-roll sheet-blue-color sheet-center" style="width: 60px;" type="roll" value="&{template:default} {{name= @{telekinesissubskillname}}} {{@{telekinesissubskillname} Roll=[[1D20+@{telekinesissubskilllevel}+@{telekinesissubskillattribute}]]}} {{RE Used=@{telekinesissubskillre}}} {{LE Used=@{telekinesissubskillle}}} {{Effect Dice=[[@{telekinesissubskilldice}]]}} {{@{telekinesissubskillname} Notes=@{telekinesissubskillnotes}}}" ></button>
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_telekinesissubskillname" type="text" style="width: 100px;">
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_telekinesissubskilllevel" value="floor(@{telekinesissubskillpoints} /2)" type="number" style="width:52px" disabled/>
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_telekinesissubskillpoints" value="0" type="number" style="width:52px">  
            <select class="sheet-dropdown sheet-blue-color sheet-center" name="attr_telekinesissubskillattribute" style="height: 25px; width:110px;"> 
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{strength}">Strength</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{dexterity}">Dexterity</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{constitution}">Constitution</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{intelligence}">Intelligence</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{wisdom}">Wisdom</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{charisma}">Charisma</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{attribute_dropdown_none}">None</option>
            </select>          
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_telekinesissubskillre" value="0" type="number" style="width: 52px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_telekinesissubskillle" type="text" style="width: 52px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_telekinesissubskilldice" type="text" style="width: 75px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_telekinesissubskillnotes" type="text" style="width: 230px; font-size: x-small;"> 
          </div>
        </fieldset> 
    </div>

    <div class="sheet-anti-psionics">
        <h2>Anti-Psionics</h2>
        <div class="sheet-edit-psi-anti-psionics sheet-block-2px sheet-psi-scrollable-130">      
            <b class="sheet-gold-color sheet-center"> Roll </b>
            <b class="sheet-gold-color sheet-center"> Ability </b>
            <b class="sheet-gold-color sheet-center"> Level </b>
            <b class="sheet-gold-color sheet-center"> Points </b>
            <b class="sheet-gold-color sheet-center"> RE: </b>
            <b class="sheet-gold-color sheet-center"> LE: </b>
            <b class="sheet-gold-color sheet-center"> Available </b>
            <span disabled></span>
            <span disabled></span>
            
            <!-- ROW 1 -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name= Anti Psionics}} {{Anti Psionics Roll=[[1D20+@{psi_anti_psionics_level}+@{charisma}]]}} {{RE Used=@{psi_anti_psionics_re}}} {{LE Used=@{psi_anti_psionics_le}}}" ></button>
            <b class="sheet-gold-color sheet-center" style="font-size: small;"> Anti Psionics </b>
            <span class="sheet-red-color sheet-center" name="attr_psi_anti_psionics_level" value="@{psi_anti_psionics_level}"></span>
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_anti_psionics_points" value="0" type="number" title="Your earned points go here">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_anti_psionics_re" value="0" type="number" title="RE invested into Telekinesis.">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_anti_psionics_le" value="0" type="number" title="Life Energy invested into Telekinesis.">
            <span class="sheet-red-color sheet-center" name="attr_psi_anti_psionics_available_points"></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Suppression -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name= Suppression}} {{Suppression Roll=[[1D20+@{psi_anti_psionics_level}]]}} {{RE Used=@{psi_anti_psionics_suppress_re}}} {{LE Used=@{psi_anti_psionics_suppress_le}}}" ></button>
            <b class="sheet-blue-color sheet-center" style="font-size: small;"> Suppression  </b>
            <span class="sheet-red-color sheet-center" name="attr_psi_anti_psionics_suppress_level" value="@{psi_anti_psionics_suppress_level}"></span>
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_anti_psionics_suppress_points" value="0" type="number" title="Your earned points go here">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_anti_psionics_suppress_re" value="0" type="number" title="RE invested into Suppression.">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_anti_psionics_suppress_le" value="0" type="number" title="Life Energy invested into Suppression.">
            <span class="sheet-red-color sheet-center" name="attr_psi_anti_psionics_suppress_total"></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Oppressive Aura -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name= Oppressive Aura}} {{Oppressive Aura Roll=[[1D20+@{psi_anti_psionics_oppression_roll}+@{psi_anti_psionics_oppress_re}]]}} {{RE Used=@{psi_anti_psionics_oppress_re}}} {{LE Used=@{psi_anti_psionics_oppress_le}}}" ></button>
            <b class="sheet-blue-color sheet-center" style="font-size: small;"> Oppressive Aura  </b>
            <span class="sheet-red-color sheet-center" name="attr_psi_anti_psionics_oppressive_aura_level" value="@{psi_anti_psionics_oppressive_aura_level}"></span>
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_anti_psionics_oppress_points" value="0" type="number" title="Your earned points go here">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_anti_psionics_oppress_re" value="0" type="number" title="RE invested into Oppressive Aura.">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_anti_psionics_oppress_le" value="0" type="number" title="Life Energy invested into Oppressive Aura.">
            <span disabled></span>
            <span disabled></span>
            <span disabled></span>

            <!-- Crush -->
            <button class="sheet-button-roll sheet-red-color" type="roll" value="&{template:default} {{name= Crush}} {{aTTACK Roll=[[1D20+@{psi_anti_psionics_level}]]}} {{Crush Damage= [[@{psi_anti_psionics_crush_dice}]]}} {{RE Used=@{psi_anti_psionics_crush_re}}} {{LE Used=@{psi_anti_psionics_crush_le}}}" ></button>
            <b class="sheet-blue-color sheet-center" style="font-size: small;"> Crush  </b>
            <span class="sheet-red-color sheet-center" name="attr_psi_anti_psionics_crush_level" value="@{psi_anti_psionics_crush_level}"></span>
            <input class="sheet-inputfield52 sheet-gold-color sheet-center" name="attr_psi_anti_psionics_crush_points" value="0" type="number" title="Your earned points go here">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_anti_psionics_crush_re" value="0" type="number" title="RE invested into Crush.">
            <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_psi_anti_psionics_crush_le" value="0" type="number" title="Life Energy invested into Crush.">
            <span class="sheet-red-color sheet-center" name="attr_psi_anti_psionics_crush_dice" title="Goes up 1 dice position on Dice Progression Chart for every level. Multiplier for every 10 LE."></span>
            <span disabled></span>
            <span disabled></span>
        </div>
        <fieldset class="repeating_antipsionicssubskills">
          <div class="sheet-edit-repeating-anti-psionics">
            <b class="sheet-gold-color sheet-center"> Roll </b>
            <b class="sheet-gold-color sheet-center"> Ability </b>
            <b class="sheet-gold-color sheet-center"> Level </b>
            <b class="sheet-gold-color sheet-center"> Points </b>
            <b class="sheet-gold-color sheet-center"> Attribute</b>
            <b class="sheet-gold-color sheet-center"> RE: </b>
            <b class="sheet-gold-color sheet-center"> LE: </b>
            <b class="sheet-gold-color sheet-center"> Dice </b>
            <b class="sheet-gold-color sheet-center"> Notes </b>
            

            <button class="sheet-button-roll sheet-blue-color sheet-center" style="width: 60px;" type="roll" value="&{template:default} {{name= @{antipsionicssubskillname}}} {{@{antipsionicssubskillname} Roll=[[1D20+@{antipsionicssubskilllevel}+@{antipsionicssubskillattribute}]]}} {{RE Used=@{antipsionicssubskillre}}} {{LE Used=@{antipsionicssubskillle}}} {{Effect Dice=[[@{antipsionicssubskilldice}]]}} {{@{antipsionicssubskillname} Notes=@{antipsionicssubskillnotes}}}" ></button>
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_antipsionicssubskillname" type="text" style="width: 100px;">
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_antipsionicssubskilllevel" value="floor(@{antipsionicssubskillpoints} /2)" type="number" style="width:52px" disabled/>
              <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_antipsionicssubskillpoints" value="0" type="number" style="width:52px">  
            <select class="sheet-dropdown sheet-blue-color sheet-center" name="attr_antipsionicssubskillattribute" style="height: 25px; width:110px;"> 
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{strength}">Strength</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{dexterity}">Dexterity</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{constitution}">Constitution</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{intelligence}">Intelligence</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{wisdom}">Wisdom</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{charisma}">Charisma</option>
              <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{attribute_dropdown_none}">None</option>
            </select>          
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_antipsionicssubskillre" value="0" type="number" style="width: 52px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_antipsionicssubskillle" type="text" style="width: 52px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_antipsionicssubskilldice" type="text" style="width: 75px">
            <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_antipsionicssubskillnotes" type="text" style="width: 230px; font-size: x-small;"> 
          </div>
        </fieldset> 
    </div>
  </div> 
    <!-- END OF Psi Edit SHEET -->    

<!-- End of 1st Div -->

<div class="sheet-editship">
  <div class="sheet-edit-ship sheet-green-color sheet-center">    

    <div class="sheet-ship-health sheet-block">            
      <input class="sheet-inputfield200 sheet-center sheet-green-color" type="text" name="attr_ship_name" title="Name your vessel">
      <h2 class="sheet-center" style="width: 525px;">Attributes</h2>
      <span class="sheet-center sheet-red-color" title="Your Ship's Ranged Defense Score"> RDS </span>
      <span class="sheet-center sheet-red-color" title="Misc Defense Bonus"> Misc Def </span>
      <span class="sheet-center sheet-red-color" title="Computer Defense Score"> CDS </span>      
      <span class="sheet-center sheet-red-color" title="Misc CDS Bonus"> CDS+ </span>
      <button class="sheet-ship-button sheet-red-color sheet-center" style="font-size:small;" type="roll" value="&{template:default} {{name=Piloting}} {{Roll=[[1D20+@{ship_pilot_bonus2}]] }}" >Pilot</button>
      <button class="sheet-ship-button sheet-red-color sheet-center" style="font-size:small;" type="roll" value="&{template:default} {{name=Ship Strength}} {{Roll=[[1D20+@{ship_strength_score}]] }}" >STR</button>
      <button class="sheet-ship-button sheet-red-color sheet-center" style="font-size:small;" type="roll" value="&{template:default} {{name=Ship Dexterity}} {{Roll=[[1D20+@{ship_dexterity_score}]] }}" >DEX</button>
      <button class="sheet-ship-button sheet-red-color sheet-center" style="font-size:small;" type="roll" value="&{template:default} {{name=Ship Constitution}} {{Roll=[[1D20+@{ship_constitution_score}+10]] }}" >CON</button>
      <span disabled></span>

      <span class="sheet-center sheet-green-color" name="attr_ship_defense_score"         title=" Your ship's Ranged Defense Score"></span>
      <input class="sheet-inputfield60 sheet-green-color sheet-center" name="attr_ship_misc_defense_bonus" type="text" title="Your ship's Misc Defense Bonus (Generic)">      
      <span class="sheet-center sheet-green-color" name="attr_ship_computer_defense_score" title="Your ship's Computer Defense Score"></span>
      <input class="sheet-inputfield52 sheet-green-color sheet-center" name="attr_ship_misc_computer_defense_bonus" type="number" title="Your ship's Misc CDS Bonus (Generic)">      
      <input class="sheet-inputfield52 sheet-green-color sheet-center" name="attr_ship_pilot_bonus1" type="number" title="Sum of all your piloting bonuses. This could be V.I., generic skill, etc.">      
      <input name="attr_ship_pilot_bonus2" value="@{ship_pilot_bonus1}" type="hidden" readonly>
      <input class="sheet-inputfield52 sheet-green-color sheet-center" name="attr_ship_strength_score" value="0" type="number" title="Your ship's Srength Bonus (Generic)">      
      <input class="sheet-inputfield52 sheet-green-color sheet-center" name="attr_ship_dexterity_score" value="0" type="number" title="Your ship's Dexterity Bonus (Generic)">      
      <input class="sheet-inputfield52 sheet-green-color sheet-center" name="attr_ship_constitution_score" value="0" type="number" title="Your ship's Constitution Bonus (Generic)">      

      <h2 class="sheet-center" style="width: 525px;"> SHIP ARMOR </h2>           
      <span class="sheet-center">Armor:</span>
      <span class="sheet-center"> HP </span>
      <span class="sheet-center"> Max</span>
      <span class="sheet-center"> Mult</span>
      <span class="sheet-center"> P+</span>
      <span class="sheet-center"> Dmg-</span>
      <span class="sheet-center"> Regen </span>
      <span class="sheet-center" title="Your Armor's Defense Bonus. This does not include your Shileds or Deflection Bonus"> ARDS </span>
      <span class="sheet-center" title="Points put into your armor's Tech Level."> TL|Pts </span>

      <span class="sheet-center">Bonuses</span>
      <input class="sheet-inputfield60 sheet-center" name="attr_ship_current_hp" title="Your ships current HP">
      <!-- Readonly Displays as spans -->
      <span class="sheet-center" name="attr_ship_max_hp" title="Your ship's current maximum HP"></span>
      <span class="sheet-center" name="attr_ship_armor_multiplier" title="Your ship's armor multiplier"></span>
      <span class="sheet-center" name="attr_ship_p_plus" title="Your ship's P+"></span>
      <span class="sheet-center" name="attr_ship_damage_reduction" title="Your ship's Damage Reduction"></span>
      <span class="sheet-center" name="attr_ship_regeneration" title="Your ship's Regeneration"></span>
      <span class="sheet-center" name="attr_ship_armor_defense_bonus" title="Your ship's armor Defense Bonus"></span>
      <span class="sheet-center" name="attr_ship_armor_tl" title="The Tech Level of your Armor"></span>     

      <!-- Level Costs as input fields -->
      <span class="sheet-center"> Cost</span>      
      <span disabled></span>    
      <input class="sheet-inputfield60 sheet-center sheet-blue-color" type="text" name="attr_ship_max_hp_cost" value="8" title="Your ship's current maximum HP Level Cost">
      <input class="sheet-inputfield52 sheet-center sheet-blue-color" type="number" name="attr_ship_armor_multiplier_cost" value="12" title="Your ship's Armor multiplier Level Cost">
      <input class="sheet-inputfield52 sheet-center sheet-blue-color" type="number" name="attr_ship_p_plus_cost" value="12" title="Your ship's P+ Level Cost">
      <input class="sheet-inputfield60 sheet-center sheet-blue-color" type="text" name="attr_ship_damage_reduction_cost" value="20" title="Your ship's Damage Reduction Level Cost">
      <input class="sheet-inputfield60 sheet-center sheet-blue-color" type="text" name="attr_ship_regeneration_cost" value="32" title="Your ship's Regeneration Level Cost">
      <input class="sheet-inputfield60 sheet-center sheet-blue-color" type="text" name="attr_ship_armor_defense_cost" value="32" title="Your ship's armor Defense Score Level Cost">
      <input class="sheet-inputfield60 sheet-center sheet-blue-color" type="number" name="attr_ship_armor_tl_points" value="0" title="Points invested by Engineers Level Cost">

      <h2 class="sheet-center" style="width: 525px;">SHIP Shields</h2>
      <!-- Readonly Displays as spans for Shields -->
      <span class="sheet-center sheet-pink-color">Shields:</span>
      <span class="sheet-center sheet-pink-color"> HP </span>
      <span class="sheet-center sheet-pink-color"> Max</span>
      <span class="sheet-center sheet-pink-color"> Mult</span>
      <span class="sheet-center sheet-pink-color"> P+</span>
      <span class="sheet-center sheet-pink-color"> Dmg-</span>
      <span class="sheet-center sheet-pink-color"> Regen </span>
      <span class="sheet-center sheet-pink-color" title="Your Armor's Defense Bonus. This does not include your Shileds or Deflection Bonus"> SRDS </span>
      <span class="sheet-center sheet-pink-color" title="Points put into your armor's Tech Level."> TL|Pts </span>

      <span class="sheet-center sheet-pink-color">Bonuses</span>
      <input class="sheet-inputfield60 sheet-center sheet-pink-color" type="text" name="attr_ship_shield_current_hp">
      <span class="sheet-center sheet-pink-color" name="attr_ship_max_shield_hp" title="Your ship's current maximum Shield HP"></span>
      <span class="sheet-center sheet-pink-color" name="attr_ship_shield_multiplier" title="Your ship's shield multiplier"></span>
      <span class="sheet-center sheet-pink-color" name="attr_ship_shield_p_plus" title="Your ship's Shield P+"></span>
      <span class="sheet-center sheet-pink-color" name="attr_ship_shield_damage_reduction" title="Your ship's Shield Damage Reduction"></span>
      <span class="sheet-center sheet-pink-color" name="attr_ship_shield_regeneration" title="Your ship's Shield Regeneration"></span>
      <span class="sheet-center sheet-pink-color" name="attr_ship_shield_defense_bonus" title="Your ship's shield Defense Bonus"></span>
      <span class="sheet-center sheet-pink-color" name="attr_ship_shield_tl" title="The Tech Level of your Shield"></span>

      <!-- Level Costs as input fields for Shields -->
      <span class="sheet-center sheet-pink-color">Level Cost</span>      
      <span disabled></span>    
      <input class="sheet-inputfield60 sheet-center sheet-pink-color" type="text" name="attr_ship_shield_hp_cost" value="8" title="Your ship's current maximum Shield HP Level Cost">
      <input class="sheet-inputfield52 sheet-center sheet-pink-color" type="number" name="attr_ship_shield_multiplier_cost" value="12" title="Your ship's Shield multiplier Level Cost">
      <input class="sheet-inputfield52 sheet-center sheet-pink-color" type="number" name="attr_ship_shield_p_plus_cost" value="12" title="Your ship's Shield P+ Level Cost">
      <input class="sheet-inputfield60 sheet-center sheet-pink-color" type="text" name="attr_ship_shield_damage_reduction_cost" value="20" title="Your ship's Shield Damage Reduction Level Cost">
      <input class="sheet-inputfield60 sheet-center sheet-pink-color" type="text" name="attr_ship_shield_regeneration_cost" value="32" title="Your ship's Shield Regeneration Level Cost">
      <input class="sheet-inputfield60 sheet-center sheet-pink-color" type="text" name="attr_ship_shield_defense_cost" value="32" title="Your ship's Shield Defense Score Level Cost">
      <input class="sheet-inputfield60 sheet-center sheet-pink-color" type="number" name="attr_ship_shield_tl_points" value="0" title="Points invested by Engineers in Shield Level Cost">

    </div>
  <!--
    <div class="sheet-ship-weapons sheet-block">
      <span class="sheet-green-color">Attack Blueprint, this should have 1. Button, 2. Name, 3. Span disabled, 4. Attack Bonus 5.Dice, 6. Dmg Bon, 7. Mult, 8. P+, 9. RoF, 10. Ammo, 11. DR Effect</span>
    </div>

    <div class="sheet-ship-defenses sheet-block">
      <span class="sheet-green-color">5 Col / Repeating</span>
    </div>
  -->
    <div class="sheet-ship sheet-block">
      <span class="sheet-green-color sheet-center">Ship Design</span>
      <img class="image-CSS" name="attr_image_url">
      <input class="sheet-inputfield sheet-green-color" style="width: 260px; height: 26px" type="text" name="attr_image_url" title="Place the URL in this field. Note, the best place is with GitHub, upload to Github and then copy the address to the image and paste into here.">
    </div>

<!--
    <div class="sheet-ship-equipment">
      
    </div>
-->

  </div>
  <div class="sheet-ship-drive sheet-block">
    <span class="sheet-center sheet-block sheet-green-color">Ship Drive</span>                            
      <select class="sheet-dropdown sheet-blue-color sheet-center" type="text" style="width: 100px;" name="attr_ship_drive"> 
        <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Atmo Prop.">Atmo Prop.</option>
        <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Rockets">Rockets</option>
        <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Ion 1">Ion 1</option>
        <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Nuclear">Nuclear</option>
        <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Ion 2">Ion 2</option>
        <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="EM Drive*">EM Drive*</option>
        <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="EM Drive**">EM Drive**</option>
        <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Fusion">Fusion</option>
        <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="EM Drive***">EM Drive***</option>
        <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Gravity Drive">Gravity Drive</option>
        <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="0" Selected>None</option>
        

      </select>              
      <span class="sheet-center sheet-block sheet-blue-color">Bonus:</span>  
      <input class="sheet-inputfield52 sheet-silver-color" type="text" name="attr_ship_drive_bonus">
      <span class="sheet-center sheet-block sheet-blue-color">Speed:</span>  
      <span class="sheet-silver-color" name="attr_ship_drive_speed"></span>
      <span class="sheet-center sheet-block sheet-blue-color">Power:</span>  
      <input class="sheet-inputfield120 sheet-silver-color" type="text" name="attr_ship_drive_watts">
      <span class="sheet-center sheet-block sheet-blue-color">Points:</span>  
      <input class="sheet-inputfield52 sheet-silver-color" type="text" name="attr_ship_drive_points">
      <span class="sheet-center sheet-block sheet-blue-color">TL:</span>  
      <span class="sheet-inputfield52 sheet-silver-color" type="text" name="attr_ship_drive_tl"></span>
      
  </div>
 
  <fieldset class="repeating_shipequipment">
    <input type="radio" name="attr_type" value="1" class="sheet-type" checked><span class="sheet-center sheet-silver-color">Weapon</span>
    <input type="radio" name="attr_type" value="0" class="sheet-type"><span class="sheet-center sheet-silver-color">Equipment</span>
    <div class="sheet-weapon">
      
      <button class="sheet-button-rollw sheet-red-color sheet-center" type="roll" value="&{template:default} {{name= @{ship_weaponname}}} {{Attack=[[1D20+@{ship_weapon_atk_bonus}]]}} {{Damage=[[(@{ship_weapon_damage_dice}+@{ship_weapondamagebonus})*@{ship_weapondamagemult}]]}} {{P+=@{ship_weaponpplus}}} {{Range=In Space @{ship_weaponrange} kilometers. In Atmosphere @{ship_weaponrange} meters}} {{Rate of Fire=@{ship_weaponrateoffire}:Turn}} {{@{ship_weaponeffect_name}= @{ship_weaponeffect1}}} {{@{ship_weaponeffect2_name}= @{ship_weaponeffect2}}}" ></button>
      <h3 class="sheet-center">Atk+</h3>
      <h3 class="sheet-center">D. Dice</h3>
      <h3 class="sheet-center">Damage+</h3>
      <h3 class="sheet-center">Dam. X</h3>
      <h3 class="sheet-center">P+</h3>
      <h3 class="sheet-center">Range</h3>
      <h3 class="sheet-center">RoF</h3>
      <h3 class="sheet-center">Ammo</h3>      
      <input class="sheet-inputfield60 sheet-red-color sheet-center" name="attr_ship_weaponeffect_name" type="text" title="Weapon Effect such as Stun DR" >
      <input class="sheet-inputfield60 sheet-red-color sheet-center" name="attr_ship_weaponeffect2_name" type="text" title="Weapon Effect such as Stun DR">      
      <h3 class="sheet-center">Points</h3>
      <h3 class="sheet-center">Cost</h3>      
      <h3 class="sheet-center">T.L.</h3>
      
      <!-- DISPLAY ROW -->                                         
      <input class="sheet-inputfield75 sheet-red-color sheet-center" name="attr_ship_weaponname" type="text" value="Name" title="A name for your weapon.">           
      <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_ship_weapon_atk_bonus" value="[[floor(@{ship_weapon_points}/@{ship_weapon_tl_cost} / @{ship_weaponattackbonuscost})]]" type="number" title="Weapon Attack Bonus." disabled>           
      <input class="sheet-inputfield75 sheet-red-color sheet-center" name="attr_ship_weapon_damage_dice" type="text" value="Dice" title="TL / Dmg Cost. Use this numeber to find it on the Dice Progression Chart.">                 
      <input class="sheet-inputfield60 sheet-red-color sheet-center" name="attr_ship_weapondamagebonus" type="text" value="[[floor((@{ship_weapon_points} / @{ship_weapon_tl_cost}) / (@{ship_weapondamagebonuscost})+10)]]" title="Weapon's Bonus Damage." style="color: red;" disabled>           
      <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_ship_weapondamagemult" type="text" value="[[floor((@{ship_weapon_points} / @{ship_weapon_tl_cost}) / (@{ship_weapondamagemultcost})+10)]]" title="Weapon's Damage Multiplier." disabled>           
      <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_ship_weaponpplus" type="text" value="[[floor((@{ship_weapon_points} / @{ship_weapon_tl_cost}) / (@{ship_weaponppluscost})+1)]]" title="Weapon's P+." disabled>           
      <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_ship_weaponrange" type="text" value="[[floor((@{ship_weapon_points} / @{ship_weapon_tl_cost}) / (@{ship_weaponrangecost})*10)]]" title="In Space, in kilometers. In Atmo it's meters" disabled>           
      <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_ship_weaponrateoffire" type="text" value="[[floor((@{ship_weapon_points} / @{ship_weapon_tl_cost}) / (@{ship_weaponrateoffirecost})+1)]]" title="Rate of Fire (Per Turn)" disabled>           
      <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_ship_weaponammo" type="text" value="[[floor((@{ship_weapon_points} / @{ship_weapon_tl_cost}) / (@{ship_weaponammocost})+1)]]" title="How many times it may be fired during combat. Energy recharges, projectiles need reloaded." disabled>             
      <input class="sheet-inputfield60 sheet-red-color sheet-center" name="attr_ship_weaponeffect1" type="text" value="[[floor((@{ship_weapon_points} / @{ship_weapon_tl_cost}) / (@{ship_weaponeffect1cost})+10)]]" title="Weapons DR-1 for effect." style="color:red;" disabled>           
      <input class="sheet-inputfield60 sheet-red-color sheet-center" name="attr_ship_weaponeffect2" type="text" value="[[floor((@{ship_weapon_points} / @{ship_weapon_tl_cost}) / (@{ship_weaponeffect2cost})+10)]]" title="Weapons DR-2 for effect." style="color:red;" disabled>                  
      <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_ship_weapon_points" value="8" type="number" title="Points invested by the engineer for upgrading.">
      <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_ship_weapon_tl_cost" value="1" type="number" title="Blueprint, Weapon Tech Level cost.">
      <input class="sheet-inputfield52 sheet-red-color sheet-center" name="attr_ship_weapon_tl" value="[[floor(@{ship_weapon_points}/@{ship_weapon_tl_cost})]]" type="number" title="Tech Level" disabled/>
      
      

      <!-- BLUEPRINT ROW -->      
      <span class="sheet-center sheet-silver-color" title="Damage Dice position on Dice Progression Chart"> D.P.C. </span>
      <!-- <input class="sheet-inputfield52 sheet-blue-color" name="attr_ship_weapondamagedpc" type="text" title="Damage Dice position on Dice Progression Chart" readonly> -->
      <input class="sheet-inputfield52 sheet-silver-color sheet-center" type="number" name="attr_ship_weaponattackbonuscost" value="6" title="Weapon attack bonus cost in Tech Levels">
      <input class="sheet-inputfield75 sheet-silver-color sheet-center" type="number" name="attr_ship_weapondamagecost" value="4" title="Weapon Damage cost in Tech Levels.">
      <input class="sheet-inputfield60 sheet-silver-color sheet-center" type="number" name="attr_ship_weapondamagebonuscost" value="3" title="Weapon Bonus Damage cost in Tech Levels." style="color:silver;">
      <input class="sheet-inputfield52 sheet-silver-color sheet-center" type="number" name="attr_ship_weapondamagemultcost" value="16" title="Weapon Multiplier cost in Tech Levels">
      <input class="sheet-inputfield52 sheet-silver-color sheet-center" type="number" name="attr_ship_weaponppluscost" value="16" title="Weapon P+ cost in Tech Levels">
      <input class="sheet-inputfield60 sheet-silver-color sheet-center" type="number" name="attr_ship_weaponrangecost" value="3" title="Weapon Range cost in Tech Levels" style="color:silver;">
      <input class="sheet-inputfield sheet-silver-color sheet-center" type="number" name="attr_ship_weaponrateoffirecost" value="6" title="Weapon Rate of Fire cost in Tech Levels">
      <input class="sheet-inputfield sheet-silver-color sheet-center" type="number" name="attr_ship_weaponammocost" value="2" title="Weapon Ammo cost in Tech Levels">      
      <input class="sheet-inputfield sheet-silver-color sheet-center" type="number" name="attr_ship_weaponeffect1cost" value="16" title="Effects that impose a DR">
      <input class="sheet-inputfield sheet-silver-color sheet-center" type="number" name="attr_ship_weaponeffect2cost" value="12" title="Effects that impose a DR">
      
    </div>
    <div class="sheet-equipment">
      <span class="sheet-green-color sheet-center">Roll</span>    
      <span class="sheet-green-color sheet-center">Equipment</span>      
      <span class="sheet-green-color sheet-center">Points</span>
      <span class="sheet-green-color sheet-center">TL Cost</span>
      <span class="sheet-green-color sheet-center">TL</span>
      <span class="sheet-green-color sheet-center">Notes</span>      

      <button class="sheet-ship-button sheet-blue-color" type="roll" value="&{template:default} {{name=@{ship_equipment_name}}} {{Roll=[[1D20+@{ship_equipment_tl}]]}} {{Tech Level=@{ship_equipment_tl}}} {{Notes=@{ship_equipment_notes}}}"></button>
      <input class="sheet-inputfield200 sheet-blue-color sheet-center" name="attr_ship_equipment_name" type="text" title="Equipment Name.">      
      <input class="sheet-inputfield60 sheet-blue-color sheet-center" name="attr_ship_equipment_points" type="number" title="Points invested, either by player or hired Engineer.">
      <input class="sheet-inputfield60 sheet-blue-color sheet-center" name="attr_ship_equipment_tl_cost" type="number" title="Blueprint feature to determine how many points it takes to upgrade the equipment by an engineer.">
      <input  class="sheet-inputfield60 sheet-blue-color sheet-center" name="attr_ship_equipment_tl" value="floor([[@{ship_equipment_points} / @{ship_equipment_tl_cost} ]])" type="number" title="Tech Level of the device is equal to points divided by TL Cost." disabled>      
      <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_ship_equipment_notes" style="width: 350px;" type="text" title="Notes about Attribute & Equipment bonuses.">       
    </div>
</fieldset>

</div>



  <!--
  <fieldset class="repeating_shipequipment">    
    <div class="sheet-ship-equipment sheet-blue-color sheet-center" style="padding-bottom: 5px;">      
      <button class="sheet-ship-button sheet-blue-color" type="roll" value="&{template:default} {{name=@{ship_equipment_name}}} {{Roll=[[ ]]}} {{Type=@{npcattacktype}}} {{Damage=[[ ]]}} {{P+ | RE=@{npc_attack_p_plus}}} {{Rate of Fire=@{npc_attack_rate_of_fire}}} {{Attack Bonus=[[(@{npc_attack_attack_bonus}+@{npcattackattribute})]]}} {{Tech or Skill Level=@{npc_attack_tl}}}" ></button>
      <input class="sheet-inputfield120 sheet-blue-color sheet-center"   name="attr_ship_equipment_name" type="text" title="Equipment Name">
      <select class="sheet-dropdown sheet-blue-color sheet-center" style="width: 75px;" name="attr_ship_attribute"> 
        <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{ship_str_bonus}">Strength</option> // MAKE IF STATEMENT, if str|dex|con then name = //
        <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{ship_dex_bonus}">Dexterity</option>
        <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{ship_con_bonus}">Constitution</option>
        <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{ship_int_bonus}">V.I.</option>
        <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{attribute_dropdown_none}" selected>None</option>
      </select>  
      <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_ship_attribute_bonus" type="text" title="Attribute Bonus">
    </div>    
  </fieldset>-->




<div class="sheet-npc">
  <div class="sheet-npc-defense-header sheet-center">
    <b class="sheet-gold-color sheet-center"> HP </b>
    <b class="sheet-gold-color sheet-center"> Max HP </b>
    <b class="sheet-gold-color sheet-center"> P+ </b>
    <b class="sheet-gold-color sheet-center"> Regen</b>
    <b class="sheet-gold-color sheet-center"> Dmg-</b>
    <b class="sheet-green-color sheet-center" style="font-size:smaller"> Actions </b>
    <b class="sheet-gold-color sheet-center"> Move. </b>
    <b class="sheet-gold-color sheet-center"> RDS </b>
    <b class="sheet-gold-color sheet-center"> MDS</b>
    <b class="sheet-gold-color sheet-center"> CDS</b>
    <b class="sheet-gold-color sheet-center"> RE</b>
    <b class="sheet-gold-color sheet-center"> LE</b>
    <b class="sheet-gold-color sheet-center"> Max LE</b>
  <!-- ROW 2-->  
  <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_npc_hp" value="0" type="text" style="width: 75px;">
  <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_npc_max_hp" type="text" style="width: 75px;">
  <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_p_plus" value="0" type="text">
  <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_regen" value="0" type="text">
  <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_dmg_reduction" value="0" type="text">
  <input class="sheet-inputfield52 sheet-green-color sheet-center" name="attr_npc_actions" value="0" type="text">
  <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_movement" value="0" type="text">
  <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_rds" value="0" type="text">
  <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_mds" value="0" type="text">
  <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_cds" value="0" type="text">
  <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_re" value="0" type="text">
  <input class="sheet-inputfield75 sheet-blue-color sheet-center" name="attr_npc_le" value="0" type="text" style="width: 75px;">
  <input class="sheet-inputfield75 sheet-blue-color sheet-center" name="attr_npc_max_le" value="0" type="text" style="width: 75px;">
  
  </div>

  <div class="sheet-npc-grid sheet-block">
    <b class="sheet-gold-color sheet-center"> Roll</b>
    <b class="sheet-gold-color sheet-center"> Attribute </b>
    <b class="sheet-gold-color sheet-center"> Total </b>
    <b class="sheet-gold-color sheet-center"> Cyb</b>
    <b class="sheet-gold-color sheet-center"> Gen</b>
    <b class="sheet-gold-color sheet-center"> Art</b>
    <b class="sheet-gold-color sheet-center"> Misc</b>
    <b class="sheet-gold-color sheet-center"> Temp</b>
    <b class="sheet-gold-color sheet-center"> Quirk</b>
    <b class="sheet-gold-color sheet-center"> Armor </b>
    <b class="sheet-gold-color sheet-center"> Psi+ </b>
    
    <!-- ROW 2 -->
    <button class="sheet-button-roll sheet-red-color sheet-center" style="width: 55px;" type="roll" value="&{template:default} {{name= @{character_name} Strength Roll}} {{Strength=[[1D20+@{npc_str_bonus}]]}}" ></button>
    <span class="sheet-blue-color sheet-center"> STR </span>
    <span class="sheet-blue-color sheet-center" name="attr_npc_str_bonus"></span>
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_cyb_str_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_gen_str_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_art_str_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_misc_str_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_temp_str_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_quirk_str_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_armor_str_mod"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_psi_str_bonus"  value="0" type="text">

    <!-- ROW 3 -->
    <button class="sheet-button-roll sheet-red-color sheet-center" style="width: 55px;" type="roll" value="&{template:default} {{name= @{character_name} Dexterity Roll}} {{Dexterity=[[1D20+@{npc_dex_bonus}]]}}" ></button>
    <span class="sheet-blue-color sheet-center"> DEX </span>
    <span class="sheet-blue-color sheet-center" name="attr_npc_dex_bonus"></span>
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_cyb_dex_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_gen_dex_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_art_dex_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_misc_dex_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_temp_dex_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_quirk_dex_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_armor_dex_mod"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_psi_dex_bonus"  value="0" type="text">

    <!-- ROW 4 -->
    <button class="sheet-button-roll sheet-red-color sheet-center" style="width: 55px;" type="roll" value="&{template:default} {{name= @{character_name} Constitution Roll}} {{Constitution=[[1D20+@{npc_con_bonus}]]}}" ></button>
    <span class="sheet-blue-color sheet-center"> CON </span>
    <span class="sheet-blue-color sheet-center" name="attr_npc_con_bonus"></span>
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_cyb_con_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_gen_con_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_art_con_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_misc_con_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_temp_con_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_quirk_con_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_armor_con_mod"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_psi_con_bonus"  value="0" type="text">

    <!-- ROW 5 -->
    <button class="sheet-button-roll sheet-red-color sheet-center" style="width: 55px;" type="roll" value="&{template:default} {{name= @{character_name} Intelligence Roll}} {{Intelligence=[[1D20+@{npc_int_bonus}]]}}" ></button>
    <span class="sheet-blue-color sheet-center"> INT </span>
    <span class="sheet-blue-color sheet-center" name="attr_npc_int_bonus"></span>
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_cyb_int_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_gen_int_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_art_int_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_misc_int_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_temp_int_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_quirk_int_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_armor_int_mod"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_psi_int_bonus"  value="0" type="text">

    <!-- ROW 6 -->
    <button class="sheet-button-roll sheet-red-color sheet-center" style="width: 55px;" type="roll" value="&{template:default} {{name= @{character_name} Wisdom Roll}} {{Wisdom=[[1D20+@{npc_wis_bonus}]]}}" ></button>
    <span class="sheet-blue-color sheet-center"> WIS </span>
    <span class="sheet-blue-color sheet-center" name="attr_npc_wis_bonus"></span>
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_cyb_wis_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_gen_wis_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_art_wis_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_misc_wis_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_temp_wis_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_quirk_wis_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_armor_wis_mod"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_psi_wis_bonus"  value="0" type="text">

    <!-- ROW 7 -->
    <button class="sheet-button-roll sheet-red-color sheet-center" style="width: 55px;" type="roll" value="&{template:default} {{name= @{character_name} Charisma Roll}} {{Charisma=[[1D20+@{npc_cha_bonus}]]}}" ></button>
    <span class="sheet-blue-color sheet-center"> CHA </span>
    <span class="sheet-blue-color sheet-center" name="attr_npc_cha_bonus"></span>
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_cyb_cha_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_gen_cha_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_art_cha_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_misc_cha_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_temp_cha_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_quirk_cha_bonus"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_armor_cha_mod"  value="0" type="text">
    <input class="sheet-inputfield52 sheet-blue-color sheet-center" name="attr_npc_psi_cha_bonus"  value="0" type="text">
  </div>  
  
  <div class="sheet-npc-attack-header sheet-center">
    <span class="sheet-gold-color sheet-center sheet-subheading sheet-subheading"> Roll </span>
    <span class="sheet-gold-color sheet-center sheet-subheading"> Name</span>
    <span class="sheet-gold-color sheet-center sheet-subheading"> Attribute </span>
    <span class="sheet-gold-color sheet-center sheet-subheading"> Type </span>
    <span class="sheet-gold-color sheet-center sheet-subheading"> Dmg</span>
    <span class="sheet-gold-color sheet-center sheet-subheading"> P+|RE</span>       
    <span class="sheet-gold-color sheet-center sheet-subheading"> Ammo</span>
    <span class="sheet-gold-color sheet-center sheet-subheading" style="font-size: small;"> MaxAmmo</span>
    <span class="sheet-gold-color sheet-center sheet-subheading"> RoF</span>
    <span class="sheet-gold-color sheet-center sheet-subheading"> Range</span> 
    <span class="sheet-gold-color sheet-center sheet-subheading"> Atk+</span>
    <span class="sheet-gold-color sheet-center sheet-subheading"> TL</span>
  </div>  

  <fieldset class="repeating_npcattack">    
    <div class="sheet-npc-attack sheet-blue-color sheet-center" style="padding-bottom: 5px;">      
        <button class="sheet-button-roll sheet-blue-color sheet-center" style="width: 50px;" type="roll" value="&{template:default} {{name=@{npcattackname}}} {{Attack Roll=[[1D20+@{npcattackattribute}+@{npc_attack_attack_bonus}]]}} {{Type=@{npcattacktype}}} {{Damage=[[@{npcattackdmg}+@{npcattackattribute}]]}} {{P+ | RE=@{npc_attack_p_plus}}} {{Rate of Fire=@{npc_attack_rate_of_fire}}} {{Attack Bonus=[[(@{npc_attack_attack_bonus}+@{npcattackattribute})]]}} {{Tech or Skill Level=@{npc_attack_tl}}}" ></button>
        <input class="sheet-inputfield sheet-blue-color sheet-center"   name="attr_npcattackname" type="text" title="Attack Name" style="width:110px;">
        <select class="sheet-dropdown sheet-blue-color sheet-center" name="attr_npcattackattribute" style="height: 25px; width:100px;"> 
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{npc_str_bonus}">Strength</option>
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{npc_dex_bonus}">Dexterity</option>
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{npc_con_bonus}">Constitution</option>
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{npc_int_bonus}">Intelligence</option>
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{npc_wis_bonus}">Wisdom</option>
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{npc_cha_bonus}">Charisma</option>
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="@{attribute_dropdown_none}">None</option>
        </select>          
        <select class="sheet-dropdown sheet-blue-color sheet-center" name="attr_npcattacktype" style="height: 25px; width:90px;"> 
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Ranged">Ranged</option>
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Melee">Melee</option>
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Explosive">Explosive</option>
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Body Disc">Body Disc</option>        
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Causation">Causation</option>        
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Clairvoyance">Clairvoyance</option>        
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Domination">Domination</option>        
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Energy Communion">Energy Communion</option>        
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Molecular Alteration">Molecular Alteration</option>        
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Pyrokinesis">Pyrokinesis</option>        
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Subatomic Alteration">Subatomic Alteration</option>        
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Telekinesis">Telekinesis</option>        
          <option class="sheet-dropdown sheet-blue-color" style="background-color:#000005;" value="Anti Psionics">Anti Psionics</option>                  
        </select>       
        <input class="sheet-inputfield sheet-blue-color sheet-center" name="attr_npcattackdmg" type="text" title="Damage Dice" style="width: 60px; font-size: 10px;">
        <input class="sheet-inputfield sheet-blue-color" name="attr_npc_attack_p_plus" value="0" type="text" title="Attack P+" style="width: 60px;">        
        <input class="sheet-inputfield sheet-blue-color" name="attr_npc_attack_current_ammo" value="0" type="text" title="Current Ammo" style="width: 60px;">
        <input class="sheet-inputfield sheet-blue-color" name="attr_npc_attack_max_ammo" value="0" type="text" title="Total Ammo" style="width: 60px;">
        <input class="sheet-inputfield sheet-blue-color" name="attr_npc_attack_rate_of_fire" value="0" type="text" title="Rate of Fire" style="width: 60px;">
        <input class="sheet-inputfield sheet-blue-color" name="attr_npc_attack_range" value="0" type="text" title="Attack Range" style="width: 60px;">        
        <input class="sheet-inputfield sheet-blue-color" name="attr_npc_attack_attack_bonus" value="0" type="text" title="Attack Bonus" style="width: 52px;">
        <input class="sheet-inputfield sheet-blue-color" name="attr_npc_attack_tl" value="0" type="text" title="Weapon TL or Skill Level" style="width: 52px;">
        
      </div>    
  </fieldset>
  
  <div class="sheet-npc-defense">    
    
  </div>
  <fieldset class="repeating_npc_notes">
    <div class="sheet-npc-notes">
      <h2 class="sheet-center"> NOTES </h2>
      <input class="sheet-inputfield" style="width: 800px;">
    </div>    
  </fieldset>
  
</div>


<script type="text/worker">

  /* This controls the button functions to switch PAGE tabs */
  
const buttonlist = ["character", "equipped", "editskills", "inventory", "editcharacter", "editpsionics", "editship", "npc"];
buttonlist.forEach(button => {
    on(`clicked:${button}`, function() {
        setAttrs({
            sheetTab: button
        });
    });
});


/* This controls the button functions to switch Psionic tabs */

const psibuttonlist = ["body-discipline", "causation", "clairvoyance", "deflection", "domination", "energy-communion", "molecular-alteration", "pyrokinesis", "subatomic-alteration", "telekinesis", "anti-psionics"];
psibuttonlist.forEach(button => {
    on(`clicked:${button}`, function() {
        setAttrs({
            psiTab: button
        });
    });
});
  
/* Updates various properties on Character Tab */
function updateMovement() {
    getAttrs(['dexterity','armor_movement', 'misc_movement', 'temp_movement'], function(values) {
        let dex = parseInt(values.dexterity) || 0;        
        let am = parseInt(values.armor_movement) || 0;
        let mm = parseInt(values.misc_movement) || 0;
        let artm = parseInt(values.artifact_movement) || 0;
        let move = 10 + dex + am + mm || 10 + dex || 0;
        setAttrs({ 
            movement: move
        });
    });
}
on('change:dexterity change:armor_movement change:misc_movement change:temp_movement', function(eventInfo) {
    updateMovement();
});
  
function updateActionPoints() {
    getAttrs(['dexterity', 'intelligence', 'raw_energy', 'psi_deflection_level'], function(values) {
        let dex = parseInt(values.dexterity) || 0;
        let int = parseInt(values.intelligence) || 0;
        let re = parseInt(values.raw_energy) || 0;
        let def = parseInt(values.psi_deflection_level) || 0;

        let points;

        if (def >= 1) {
            points = (Math.floor(re / 10) + dex + int) / 5 || 0;
        } else {
            points = (dex + int) / 2 || 0;
        }

        setAttrs({ 
            actions: points 
        });
    });
}
on('change:dexterity change:intelligence change:raw_energy change:psi_deflection_level', function(eventInfo) {
    updateActionPoints();
});
  
  
  
          
  /* EDIT CORE CHARACTER */
  
  /* UPDATE ATTACK BONUSES 
  
      These following bonuses come from all over the character sheet into one area, built into 2 types of attack: 
      1. Ranged Attacks
      2. Melee Attacks    
      3. Psionic Attacks are unique and are in each individual psionic.
  
      The attack bonuses should not include the attributes as these can change.  All bonuses, artifact, VI, misc, temp, etc. end here and are used.
  */
  
  function updateRangedAttack() {
      getAttrs(['psi_causation_ranged_attack_bonus', 'artifactatkbonus', 'cyb_ranged_attack_bonus', 'misc_ranged_attack_bonus', 'temp_ranged_attack_bonus'], function(values) {
          let c = parseInt(values.psi_causation_ranged_attack_bonus)  || 0;
          let a = parseInt(values.artifactatkbonus)                   || 0;
          let cyb = parseInt(values.cyb_ranged_attack_bonus)          || 0;
          let m = parseInt(values.misc_ranged_attack_bonus)           || 0;  // corrected here
          let t = parseInt(values.temp_ranged_attack_bonus)           || 0;
          setAttrs({
              ranged_attack_bonus: Math.floor( c + a + cyb + m + t )
          });
      });
  }
  on('change:psi_causation_ranged_attack_bonus change:artifactatkbonus change:cyb_ranged_attack_bonus change:misc_ranged_attack_bonus change:temp_ranged_attack_bonus', function(eventInfo) {
      updateRangedAttack();
  });
  
  /* Edit Character Defenses, Ranged - Melee - Ship - Defense */
  /* UPDATE INVENTORY MELEE */
  const dpc_values = [
  "1d4", "1d6", "1d8", "1d10", "1d12", "1d20",
  "1D20+1D4", "1D20+1D6", "1D20+1D8", "1D20+1D10", "1D20+1D12", "1D20+1D20",
  "2D20+1D4", "2D20+1D6", "2D20+1D8", "2D20+1D10", "2D20+1D12", "2D20+2D20",
  "3D20+1D4", "3D20+1D6", "3D20+1D8", "3D20+1D10", "3D20+1D12", "3D20+3D20",
  "4D20+1D4", "4D20+1D6", "4D20+1D8", "4D20+1D10", "4D20+1D12", "4D20+4D20",
  "5D20+1D4", "5D20+1D6", "5D20+1D8", "5D20+1D10", "5D20+1D12", "5D20+1D20",
  "6D20+1D4", "6D20+1D6", "6D20+1D8", "6D20+1D10", "6D20+1D12", "6D20+1D20",
  "7D20+1D4", "7D20+1D6", "7D20+1D8", "7D20+1D10", "7D20+1D12", "7D20+1D20",
  "8D20+1D4", "8D20+1D6", "8D20+1D8", "8D20+1D10", "8D20+1D12", "8D20+1D20",
  "9D20+1D4", "9D20+1D6", "9D20+1D8", "9D20+1D10", "9D20+1D12", "9D20+1D20",
  "10D20+1D4", "10D20+1D6", "10D20+1D8", "10D20+1D10", "10D20+1D12", "10D20+1D20",
  "11D20+1D4", "11D20+1D6", "11D20+1D8", "11D20+1D10", "11D20+1D12", "11D20+1D20",
  "12D20+1D4", "12D20+1D6", "12D20+1D8", "12D20+1D10", "12D20+1D12", "12D20+1D20",
  "13D20+1D4", "13D20+1D6", "13D20+1D8", "13D20+1D10", "13D20+1D12", "13D20+1D20",
  "14D20+1D4", "14D20+1D6", "14D20+1D8", "14D20+1D10", "14D20+1D12", "14D20+1D20",
  "15D20+1D4", "15D20+1D6", "15D20+1D8", "15D20+1D10", "15D20+1D12", "15D20+1D20",
  "16D20+1D4", "16D20+1D6", "16D20+1D8", "16D20+1D10", "16D20+1D12", "16D20+1D20",
  "17D20+1D4", "17D20+1D6", "17D20+1D8", "17D20+1D10", "17D20+1D12", "17D20+1D20",
  "18D20+1D4", "18D20+1D6", "18D20+1D8", "18D20+1D10", "18D20+1D12", "18D20+1D20",
  "19D20+1D4", "19D20+1D6", "19D20+1D8", "19D20+1D10", "19D20+1D12", "19D20+1D20",
  "20D20+1D4", "20D20+1D6", "20D20+1D8", "20D20+1D10", "20D20+1D12", "20D20+1D20",
  "20D20+1D100", "5D100", "6D100", "7D100", "8D100", "9D100", "10D100+100"
  ];
function updateInventoryMeleeItems(id) {
  const prefix = `repeating_melee_${id}_`;

  getAttrs([
      prefix + 'inventorymeleetechlevelpoints',
      prefix + 'inventorymeleetechlevelcost',
      prefix + 'inventorymeleeattackbonuscost',
      prefix + 'inventorymeleedamagedicecost',
      prefix + 'inventorymeleedamagebonuscost',
      prefix + 'inventorymeleedamagemultcost',
      prefix + 'inventorymeleeppluscost',
      prefix + 'inventorymeleeammocost',
      prefix + 'inventorymeleetypecost',
      prefix + 'inventorymeleeeffect1cost',
      prefix + 'inventorymeleeeffect2cost'
  ], function(values) {
      let tlpoints = parseInt(values[prefix + 'inventorymeleetechlevelpoints']) || 0;
      let tlcost = parseInt(values[prefix + 'inventorymeleetechlevelcost']) || 1;
      let tl = Math.floor(tlpoints / tlcost);
      
      let dpccost = parseInt(values[prefix + 'inventorymeleedamagedicecost']) || 1;
      let dpc = Math.floor(tl / dpccost);

      let diceIndex = Math.floor(tl / (parseInt(values[prefix + 'inventorymeleedamagedicecost']) || 0));
      let meleeDamageDice = dpc_values[diceIndex] || "1d4";

      let calculations = {
          [prefix + 'inventorymeleedamagedpc']: dpc, 
          [prefix + 'inventorymeleetechlevel']: tl,
          [prefix + 'inventorymeleedamagedice']: meleeDamageDice, // use calculated value instead of hardcoding to "1D4"
          [prefix + 'inventorymeleeattackbonus']: Math.floor(tl / (parseInt(values[prefix + 'inventorymeleeattackbonuscost']) || 1)),
          [prefix + 'inventorymeleedamagebonus']: Math.floor(tl / (parseInt(values[prefix + 'inventorymeleedamagebonuscost']) || 1)),
          [prefix + 'inventorymeleedamagemult']: Math.floor(tl / (parseInt(values[prefix + 'inventorymeleedamagemultcost']) || 1)),
          [prefix + 'inventorymeleepplus']: Math.floor(tl / (parseInt(values[prefix + 'inventorymeleeppluscost']) || 1)),
          [prefix + 'inventorymeleeammo']: Math.floor(tl / (parseInt(values[prefix + 'inventorymeleeammocost']) || 1)),
          [prefix + 'inventorymeleeeffect1']: Math.floor(tl / (parseInt(values[prefix + 'inventorymeleeeffect1cost']) || 1)),
          [prefix + 'inventorymeleeeffect2']: Math.floor(tl / (parseInt(values[prefix + 'inventorymeleeeffect2cost']) || 1))

      };

      setAttrs(calculations);
  });
}

on('change:repeating_melee', function(event) {
  const id = event.sourceAttribute.split('_')[2];
  updateInventoryMeleeItems(id);
});

/* UPDATE INVENTORY RANGED */
function updateInventoryWeaponItems(id) {
  const prefix = `repeating_weapons_${id}_`;

  getAttrs([
      prefix + 'weapontechlevelpoints',
      prefix + 'weapontechlevelcost',
      prefix + 'weaponattackbonuscost',
      prefix + 'weapondamagedicecost',
      prefix + 'weapondamagebonuscost',
      prefix + 'weapondamagemultcost',
      prefix + 'weaponppluscost',
      prefix + 'weaponrfcost',
      prefix + 'weaponrangecost',
      prefix + 'weaponrateoffirecost',
      prefix + 'weaponammocost',
      prefix + 'weapontypecost',
      prefix + 'weaponeffect1cost',
      prefix + 'weaponeffect2cost'
  ], function(values) {
      let tlpoints = parseInt(values[prefix + 'weapontechlevelpoints']) || 0;
      let tlcost = parseInt(values[prefix + 'weapontechlevelcost']) || 1;
      let tl = Math.floor(tlpoints / tlcost);

      let ddcost = parseInt(values[prefix + 'weapondamagedicecost']) || 4;
      let dpc = Math.floor(tl / ddcost);

      let diceIndex = Math.floor(tl / (parseInt(values[prefix + 'weapondamagedicecost']) || 1));
      let weaponDamageDice = dpc_values[diceIndex] || "1d4";

      let calculations = {
          [prefix + 'weapondamagedpc']: dpc,
          [prefix + 'weapontechlevel']: tl,
          [prefix + 'weapondamagedice']: weaponDamageDice,
          [prefix + 'weaponattackbonus']: Math.floor(tl / (parseInt(values[prefix + 'weaponattackbonuscost']) || 1)),
          [prefix + 'weapondamagebonus']: Math.floor(tl / (parseInt(values[prefix + 'weapondamagebonuscost']) || 1)),
          [prefix + 'weapondamagemult']: Math.floor(tl / (parseInt(values[prefix + 'weapondamagemultcost']) || 1)),
          [prefix + 'weaponpplus']: Math.floor(tl / (parseInt(values[prefix + 'weaponppluscost']) || 1)),
          [prefix + 'weaponrf']: "DICE",  // Placeholder, need formula or method to calculate Rapid Fire dice.
          [prefix + 'weaponrange']: Math.floor(tl / (parseInt(values[prefix + 'weaponrangecost']) || 1)),
          [prefix + 'weaponrateoffire']: Math.floor(tl / (parseInt(values[prefix + 'weaponrateoffirecost']) || 1)),
          [prefix + 'weaponammo']: Math.floor(tl / (parseInt(values[prefix + 'weaponammocost']) || 1)),
          [prefix + 'weapontype']: values[prefix + 'weapontypecost'] || "",  // This assumes the type is a string.
          [prefix + 'weaponeffect1']: Math.floor(tl / (parseInt(values[prefix + 'weaponeffect1cost']) || 1)),
          [prefix + 'weaponeffect2']: Math.floor(tl / (parseInt(values[prefix + 'weaponeffect2cost']) || 1))
      };

      setAttrs(calculations);
  });
}

on('change:repeating_weapons', function(event) {
  const id = event.sourceAttribute.split('_')[2];
  updateInventoryWeaponItems(id);
});

/* UPDATE INVENTORY EXPLOSIVES */
function updateInventoryExplosiveItems(id) {
  const prefix = `repeating_explosives_${id}_`;

  getAttrs([
      prefix + 'explosivetechlevelpoints',
      prefix + 'explosivetechlevelcost',
      prefix + 'explosivetech',
      prefix + 'explosivedamagecost',
      prefix + 'explosivebonusdamagecost',
      prefix + 'explosivemultipliercost',
      prefix + 'explosiveppluscost',
      prefix + 'explosiveradiuscost',
      prefix + 'explosiveeffect1cost',
      prefix + 'explosiveeffect2cost'
  ], function(values) {
      let points = parseInt(values[prefix + 'explosivetechlevelpoints']) || 0;
      let tlcost = parseInt(values[prefix + 'explosivetechlevelcost']) || 0;
      let ddcost = parseInt(values[prefix + 'explosivedamagecost']) || 0;
      let dr1cost = parseInt(values[prefix + 'explosiveeffect1cost']) || 0;
      let dr2cost = parseInt(values[prefix + 'explosiveeffect2cost']) || 0;

      
      let tl = Math.floor(points/tlcost) || 0;
      let dpc = Math.floor(tl/ddcost);
      let dr1 = Math.floor(tl / dr1cost) + 10 || 0;
      let dr2 = Math.floor(tl / dr2cost) + 10 || 0;

      let diceIndex = Math.floor(tl / (parseInt(values[prefix + 'explosivedamagecost']) || 0));
      let DamageDice = dpc_values[diceIndex] || "1d4";  // Assuming the dpc_values array exists as before

      let calculations = {
          [prefix + 'explosivetechlevel']: tl,
          [prefix + 'explosivedamagedpc']: dpc,
          [prefix + 'explosivedamagedice']: DamageDice,
          [prefix + 'explosivebonusdamage']: Math.floor(tl / (parseInt(values[prefix + 'explosivebonusdamagecost']) || 1)),
          [prefix + 'explosivemultiplier']: Math.floor(tl / (parseInt(values[prefix + 'explosivemultipliercost']) || 1)) + 1,  // Added +1 based on the default calculation in the HTML
          [prefix + 'explosivepplus']: Math.floor(tl / (parseInt(values[prefix + 'explosiveppluscost']) || 1)) + 1,  // Added +1 based on the default calculation in the HTML
          [prefix + 'explosiveradius']: Math.floor(tl / (parseInt(values[prefix + 'explosiveradiuscost']) || 1)),
          [prefix + 'explosivedr1']: dr1,
          [prefix + 'explosivedr2']: dr2            
      };

      setAttrs(calculations);
  });
}

on('change:repeating_explosives', function(event) {
  const id = event.sourceAttribute.split('_')[2];
  updateInventoryExplosiveItems(id);
});

  
  
  /* UPDATE ARTIFACTS */
  /*function updateArtifacts() {
      getAttrs(['artifacttechlevel', 'artifactattributecost', 'artifactpsionicbonuslevelcost', 'artifactskillcost', 'artifactlecost', 'artifactrecost',
                'artifactspherecost', 'artifactdrbonuscost', 'artifactdmgcost', 'artifactppluscost', 'artifactdamagemultcost', 'artifactdamagebonuscost', 
                'artifactrangecost', 'artifactmdsbonuscost', 'artifactarmorhpmultcost', 'artifactarmorppluscost', 'artifactarmorregenbonuscost', 
                'artifactarmordefbonuscost', 'artifacthealthbonus', 'artifactatkbonuscost'], function(values) {
          let tl = parseInt(values.artifacttechlevel) || 0;
  
          let a = parseInt(values.artifactattributecost) || 16;
          let psi = parseInt(values.artifactpsionicbonuslevelcost) || 0;
          let asc = parseInt(values.artifactskillcost) || 0;
          let ale = parseInt(values.artifactlecost) || 0;
          let are = parseInt(values.artifactrecost) || 0;
          let asp = parseInt(values.artifactspherecost) || 0;
          let adr = parseInt(values.artifactdrbonuscost) || 0;
          let ad = parseInt(values.artifactdmgcost) || 16;
          let app = parseInt(values.artifactppluscost) || 0;
          let adm = parseInt(values.artifactdamagemultcost) || 0;        
          let adb = parseInt(values.artifactdamagebonuscost) || 0;
          let ar = parseInt(values.artifactrangecost) || 0;        
          let amds = parseInt(values.artifactmdsbonuscost) || 0;
          let aam = parseInt(values.artifactarmorhpmultcost) || 0;
          let aapp = parseInt(values.artifactarmorppluscost) || 0;
          let aar = parseInt(values.artifactarmorregenbonuscost) || 0;
          let aad = parseInt(values.artifactarmordefbonuscost) || 0;
          let ahb = parseInt(values.artifacthealthbonus) || 0;
          let aabCost = parseInt(values.artifactatkbonuscost) || 0;
          
          let attribute = Math.floor( tl / a ) || 0;
          let psi_bonus = Math.floor( tl / psi ) || 0;
          let skill_bonus = Math.floor( tl / asc ) || 0;
          let life_energy = Math.floor( tl / ale ) || 0;
          let raw_energy = Math.floor( tl / are ) || 0;
          let sphere = Math.floor( tl / asp ) || 0;
          let difficulty = Math.floor( tl / adr ) || 0;
          let damage_dice = Math.floor( tl / ad ) || 0;
          let p_plus = Math.floor( tl / app ) ||  0;
          let damage_multiplier = Math.floor( tl / adm ) || 0;
          let damage_bonus = Math.floor(tl / adb ) || 0;
          let range = Math.floor( tl / ar) || 0;
          let mental_defense = Math.floor( tl / amds ) || 0;
          let armor_multiplier = Math.floor( tl / aam) || 0;
          let armor_p_plus = Math.floor( tl / aapp ) || 0;
          let armor_regen = Math.floor( tl / aar ) || 0;
          let armor_defense = Math.floor( tl / aad ) || 0;
          let health_bonus = Math.floor( tl / ahb ) || 0;
          let attack_bonus = aabCost !== 0 ? Math.floor(tl / aabCost) : 0;
  
          setAttrs({  
              artifactattribute : attribute,
              artifactpsionicbonuslevel : psi_bonus,
              artifactskillbonus : skill_bonus,
              artifactle : life_energy,
              artifactre : raw_energy,
              artifactspherebonus : sphere,
              artifactdrbonus : difficulty,
              artifactdmg : damage_dice,
              artifactartifactpplus : p_plus,
              artifactdamagemult : damage_multiplier,
              artifactdamagebonus : damage_bonus,
              artifactrange : range,
              artifactmdsbonus : mental_defense,
              artifactarmorhpmult : armor_multiplier,
              artifactarmorpplus : armor_p_plus,
              artifactarmorregenbonus : armor_regen,
              artifactarmordefbonus : armor_defense,
              artifacthealthbonus : health_bonus,
              artifactatkbonus : attack_bonus
              
          });
      });
  }
  on('change:artifacttechlevel change:artifactattributecost change:artifactpsionicbonuslevelcost change:artifactskillcost change:artifactlecost change:artifactrecost change:artifactspherecost change:artifactdrbonuscost change:artifactdmgcost change:artifactppluscost change:artifactdamagemultcost change:artifactdamagebonuscost change:artifactrangecost change:artifactmdsbonuscost change:artifactarmorhpmultcost change:artifactarmorppluscost change:artifactarmorregenbonuscost change:artifactarmordefbonuscost change:artifacthealthbonus change:artifactatkbonuscost', function(eventInfo) {
      updateArtifacts();
  });
  */
  function updateArtifacts() {
    getSectionIDs("repeating_artifacts", function(ids) {
        ids.forEach(id => {
            const prefix = 'repeating_artifacts_' + id + '_';
            
            getAttrs([prefix + 'artifacttechlevel', prefix + 'artifactattributecost', 
            prefix + 'artifactpsionicbonuslevelcost', prefix + 'artifactskillcost', 
            prefix + 'artifactlecost', prefix + 'artifactrecost', prefix + 'artifactspherecost', 
            prefix + 'artifactdrbonuscost', prefix + 'artifactdmgcost', prefix + 'artifactppluscost',
            prefix + 'artifactdamagemultcost', prefix + 'artifactdamagebonuscost', prefix + 'artifactrangecost',
            prefix + 'artifactmdsbonuscost', prefix + 'artifactarmorhpmultcost', prefix + 'artifactarmorppluscost',
            prefix + 'artifactarmorregenbonuscost', prefix + 'artifactarmordefbonuscost', prefix + 'artifacthealthbonus',
            prefix + 'artifactatkbonuscost'], function(values) {
                
                let tl = parseInt(values[prefix + 'artifacttechlevel']) || 0;

                let artifactdmgcost = parseInt(values[prefix + 'artifactdmgcost']) || 16;
                let artifactdpc = Math.floor(tl / artifactdmgcost);
                let artdmgdice = dpc_values[artifactdpc] || "1d4"; // Default to "1d4" if out of index range.

                let a = parseInt(values[prefix + 'artifactattributecost']) || 16;
                let attribute = Math.floor(tl / a) || 0;

                let psi_bonus = Math.floor(tl / parseInt(values[prefix + 'artifactpsionicbonuslevelcost']) || 0);
                let skill_bonus = Math.floor(tl / parseInt(values[prefix + 'artifactskillcost']) || 0);
                let life_energy = Math.floor(tl / parseInt(values[prefix + 'artifactlecost']) || 0);
                let raw_energy = Math.floor(tl / parseInt(values[prefix + 'artifactrecost']) || 0);
                let sphere = Math.floor(tl / parseInt(values[prefix + 'artifactspherecost']) || 0);
                let difficulty = Math.floor(tl / parseInt(values[prefix + 'artifactdrbonuscost']) || 0);
                let p_plus = Math.floor(tl / parseInt(values[prefix + 'artifactppluscost']) || 0);
                let damage_multiplier = Math.floor(tl / parseInt(values[prefix + 'artifactdamagemultcost']) || 0);
                let damage_bonus = Math.floor(tl / parseInt(values[prefix + 'artifactdamagebonuscost']) || 0);
                let range = Math.floor(tl / parseInt(values[prefix + 'artifactrangecost']) || 0);
                let mental_defense = Math.floor(tl / parseInt(values[prefix + 'artifactmdsbonuscost']) || 0);
                let armor_multiplier = Math.floor(tl / parseInt(values[prefix + 'artifactarmorhpmultcost']) || 0);
                let armor_p_plus = Math.floor(tl / parseInt(values[prefix + 'artifactarmorppluscost']) || 0);
                let armor_regen = Math.floor(tl / parseInt(values[prefix + 'artifactarmorregenbonuscost']) || 0);
                let armor_defense = Math.floor(tl / parseInt(values[prefix + 'artifactarmordefbonuscost']) || 0);
                let health_bonus = Math.floor(tl / parseInt(values[prefix + 'artifacthealthbonus']) || 0);
                let attack_bonus = Math.floor(tl / parseInt(values[prefix + 'artifactatkbonuscost']) || 0);

                // After all calculations, set the attributes:
                setAttrs({
                    [prefix + 'artifactdamagedice']: artdmgdice,
                    [prefix + 'artifactattribute']: attribute,
                    [prefix + 'artifactpsionicbonuslevel']: psi_bonus,
                    [prefix + 'artifactskillbonus']: skill_bonus,
                    [prefix + 'artifactle']: life_energy,
                    [prefix + 'artifactre']: raw_energy,
                    [prefix + 'artifactspherebonus']: sphere,
                    [prefix + 'artifactdrbonus']: difficulty,
                    [prefix + 'artifactpplusbonus']: p_plus,
                    [prefix + 'artifactdamagemult']: damage_multiplier,
                    [prefix + 'artifactdamagebonus']: damage_bonus,
                    [prefix + 'artifactrange']: range,
                    [prefix + 'artifactmdsbonus']: mental_defense,
                    [prefix + 'artifactarmorhpmult']: armor_multiplier,
                    [prefix + 'artifactarmorpplus']: armor_p_plus,
                    [prefix + 'artifactarmorregenbonus']: armor_regen,
                    [prefix + 'artifactarmordefbonus']: armor_defense,
                    [prefix + 'artifacthealthbonus']: health_bonus,
                    [prefix + 'artifactatkbonus']: attack_bonus
                });
            });
        });
    });
}

on('change:repeating_artifacts', function() {
    updateArtifacts();
});



  
  
/* UPDATE MELEE COMBAT */

function updateMeleeCombat() {
  getAttrs([
    'strength', 'dexterity', 'constitution', 'intelligence', 'wisdom', 'charisma',
    'combat_style_dmg_dice_cost', 'combat_style_dmg_bonus_cost', 'combat_style_dmg_mult_cost',
    'combat_style_pen_plus_cost', 'combat_style_atk_bonus_cost', 'combat_style_def_bonus_cost',
    'combat_style_dr_1_cost', 'combat_style_dr_2_cost', 'combat_style_re_cost', 'combat_style_le_cost',
    'combat_style_level', 'combat_style_points', 'combat_style_progression'], function(values) {
      
    /* Attributes */
    let str = parseInt(values.strength) || 0;
    let dex = parseInt(values.dexterity) || 0;
    let con = parseInt(values.constitution) || 0;
    let int = parseInt(values.intelligence) || 0;
    let wis = parseInt(values.wisdom) || 0;
    let cha = parseInt(values.charisma) || 0;

    /* Level Costs */
    let combat_dice_cost = parseInt(values.combat_style_dmg_dice_cost) || 0;
    let combat_style_mult = parseInt(values.combat_style_dmg_mult_cost) || 0;
    let combat_dmg_cost = parseInt(values.combat_style_dmg_bonus_cost) || 0;    
    let combat_style_p_plus = parseInt(values.combat_style_pen_plus_cost) || 0;
    let combat_style_atk = parseInt(values.combat_style_atk_bonus_cost) || 0;
    let combat_style_def = parseInt(values.combat_style_def_bonus_cost) || 0;
    let combat_dr1 = parseInt(values.combat_style_dr_1_cost) || 0;
    let combat_dr2 = parseInt(values.combat_style_dr_2_cost) || 0;

    /* PSIONICS */
    let re = parseInt(values.combat_style_re_used) || 0;
    let le = parseInt(values.combat_style_le_used) || 0;

    /* Calculating the level based on points */
    let progression = parseInt(values.combat_style_progression);
    let points = parseInt(values.combat_style_points) || 0;
    let level = Math.floor(points/progression) || 0; 
  
    /* Blueprint Calculations */    
    let dmg_dice = combat_dice_cost !== 0 ? Math.floor(level / combat_dice_cost) : 0;
    let dmg_bonus = combat_dmg_cost !== 0 ? Math.floor(level / combat_dmg_cost) : 0;
    let dmg_mult = combat_style_mult !== 0 ? Math.floor(level / combat_style_mult) : 0;
    let p_plus = combat_style_p_plus !== 0 ? Math.floor(level / combat_style_p_plus) : 0;
    let atk_bonus = combat_style_atk !== 0 ? Math.floor(level / combat_style_atk) : 0;
    let def_bonus = combat_style_def !== 0 ? Math.floor(level / combat_style_def) : 0;
    let dr1 = combat_dr1 !== 0 ? Math.floor(level / combat_dr1) : 0;
    let dr2 = combat_dr2 !== 0 ? Math.floor(level / combat_dr2) : 0;

    setAttrs({
      combat_style_level: level,
      combat_style_dmg_bonus: dmg_bonus,
      combat_style_dmg_mult: dmg_mult,
      combat_style_pen_plus: p_plus,
      combat_style_atk_bonus: atk_bonus,
      combat_style_def_bonus: def_bonus,
      combat_style_dr: dr1,
      combat_style_dr_2: dr2,
      combat_re: re,
      combat_le: le
    });
  });
}

on('change:strength change:dexterity change:constitution change:intelligence change:wisdom change:charisma change:combat_style_dmg_dice_cost change:combat_style_dmg_bonus_cost change:combat_style_dmg_mult_cost change:combat_style_pen_plus_cost change:combat_style_atk_bonus_cost change:combat_style_def_bonus_cost change:combat_style_dr_1_cost change:combat_style_dr_2_cost change:combat_style_re_cost change:combat_style_le_cost change:combat_style_level change:combat_style_points change:combat_style_progression', updateMeleeCombat);

/* END MELEE COMBAT */
  
  /* UPDATE DEFENSES */
  function updateHealth() {
    getAttrs(['strength', 'constitution', 'misc_health', 'psi_clairvoyance_health'], function(values) {
        let str = values.strength || 0;
        let con = values.constitution || 0;
        let misc = values.misc_health || 0;
        let psi = values.psi_clairvoyance_health || 0;
        let health = (str * con) + misc + psi;
        setAttrs({
            max_health: health
        });
    });
}
on('change:strength change:constitution change:misc_health change:psi_clairvoyance_health', function(eventInfo) {
  updateHealth();
});

function updatePPlus() {
  getAttrs(['constitution', 'misc_p_plus', 'equipped_armor_p_plus', 'equipped_armor_shields_p_plus'], function(values) {
      let con = parseInt(values.constitution) || 0;
      let misc = parseInt(values.misc_p_plus) || 0;
      let equipped_p = parseInt(values.equipped_armor_p_plus) || 0;
      let shields_p = parseInt(values.equipped_armor_shields_p_plus) || 0;
      let nat_p = Math.floor(con / 10) + misc || 1;
      let full_p = Math.floor(nat_p + equipped_p + shields_p);

      setAttrs({
          nat_p_plus: nat_p,
          armored_p_plus: equipped_p,
          shields_p_plus: shields_p,
          full_p_plus: full_p 
      });
  });
}
on('change:constitution change:misc_p_plus change:equipped_armor_p_plus change:equipped_armor_shields_p_plus', function(eventInfo) {
  updatePPlus();
});

function updateRangedDefense() {
  getAttrs(['dexterity', 'equipped_def_bonus', 'equipped_armor_shields_ranged_defense', 'psi_deflection_ranged_defense_bonus'], function(values) {
      let dex = parseInt(values.dexterity) || 0;      
      let equipped_d = parseInt(values.equipped_def_bonus) || 0;
      let shields_d = parseInt(values.equipped_armor_shields_ranged_defense) || 0;
      let psi_def = parseInt(values.psi_deflection_ranged_defense_bonus) || 0;
      
      let full_d = Math.floor(10 + dex + equipped_d + shields_d + psi_def);
      let armor_def = Math.floor(10 + dex + equipped_d +  psi_def);
      let shields_def = Math.floor(shields_d + psi_def);
      let defense = Math.floor(10 + dex + psi_def);

      setAttrs({
          ranged_defense: full_d,
          ranged_nat_defense: defense,
          armored_ranged_def: armor_def,
          shields_shields_def: shields_def
          
      });
  });
}
on('change:dexterity change:equipped_def_bonus change:equipped_armor_shields_ranged_defense change:psi_deflection_ranged_defense_bonus', function(eventInfo) {
  updateRangedDefense();
});

function updateInitBonus() {
  getAttrs(['dexterity', 'raw_energy', 'psi_deflection_level', 'misc_init_bonus'], function(values) {
      let dex = parseInt(values.dexterity) || 0;
      let re = parseInt(values.raw_energy) || 0;
      let psi = parseInt(values.psi_deflection_level) || 0;
      let misc = parseInt(values.misc_init_bonus) || 0;

      let init = dex+re+psi+misc;
      setAttrs({
        init_bonus: init
      });
  });
}
on('change:dexterity change:raw_energy change:psi_deflection_level change:misc_init_bonus', function(eventInfo) {
  updateInitBonus();
});

  /* DIRECT MISC PROPERTY BONUSES */
  function updateMiscHealth() {
    getAttrs(
      [
        'cyb_misc_health_bonus',
        'gen_misc_health_bonus',
        'art_misc_health_bonus',
        'misc_misc_health_bonus',
        'temp_misc_health_bonus',
        'quirk_misc_health_bonus'
      ],
      function(values) {
        let cy = parseInt(values.cyb_misc_health_bonus) || 0;
        let g = parseInt(values.gen_misc_health_bonus) || 0;
        let a = parseInt(values.art_misc_health_bonus) || 0;
        let t = parseInt(values.misc_misc_health_bonus) || 0;
        let m = parseInt(values.temp_misc_health_bonus) || 0;
        let q = parseInt(values.quirk_misc_health_bonus) || 0;
        let health = cy + g + a + t + m + q;
  
        setAttrs({
          misc_health: health
        });
      }
    );
  }  
  on(
    'change:cyb_misc_health_bonus change:gen_misc_health_bonus change:art_misc_health_bonus change:misc_misc_health_bonus change:temp_misc_health_bonus change:quirk_misc_health_bonus',
    function(eventInfo) {
      updateMiscHealth();
    }
  );
    
  function updateMiscPenPlus() {
      getAttrs(['cyb_misc_pen_plus_bonus', 'gen_misc_pen_plus_bonus', 'art_misc_pen_plus_bonus', 'misc_pen_plus_bonus', 'temp_pen_plus_bonus', 'quirk_pen_plus_bonus'], function(values) {
          let cy = parseInt(values.cyb_misc_pen_plus_bonus) || 0;
          let g = parseInt(values.gen_misc_pen_plus_bonus) || 0;
          let a = parseInt(values.art_misc_pen_plus_bonus) || 0;
          let m = parseInt(values.misc_pen_plus_bonus) || 0;
          let t = parseInt(values.temp_pen_plus_bonus) || 0;
          let q = parseInt(values.quirk_pen_plus_bonus) || 0;
          setAttrs({
              misc_p_plus: cy + g + a + m + t + q
          });
      });
  }
  on('change:cyb_misc_pen_plus_bonus change:gen_misc_pen_plus_bonus change:art_misc_pen_plus_bonus change:misc_pen_plus_bonus change:temp_pen_plus_bonus change:quirk_pen_plus_bonus', function(eventInfo) {
      updateMiscPenPlus();
  });
    
  function updateMiscRegen() {
    getAttrs(['cyb_misc_regen_bonus', 'gen_misc_regen_bonus', 'art_misc_regen_bonus', 'misc_regen_bonus', 'quirk_misc_regen_bonus', 'temp_misc_regen_bonus'], function(values) {
      let cy = parseInt(values.cyb_misc_regen_bonus) || 0;
      let g = parseInt(values.gen_misc_regen_bonus) || 0;
      let a = parseInt(values.art_misc_regen_bonus) || 0;
      let m = parseInt(values.misc_regen_bonus) || 0;
      let q = parseInt(values.quirk_misc_regen_bonus) || 0;
      let t = parseInt(values.temp_misc_regen_bonus) || 0;
      let regen = cy + g + a + m + q + t
      setAttrs({
              misc_regen: regen
      });
    });
  }  
  on('change:cyb_misc_regen_bonus change:gen_misc_regen_bonus change:art_misc_regen_bonus change:misc_regen_bonus change:quirk_misc_regen_bonus change:temp_misc_regen_bonus', function(eventInfo) {
    updateMiscRegen();
  });
  
  function updateMiscDmgRed() {
    getAttrs(['cyb_misc_dmg_red', 'gen_misc_dmg_red', 'art_misc_dmg_red', 'misc_dmg_red', 'temp_misc_damage_reduction_bonus', 'quirk_misc_damage_reduction_bonus'], function(values) {
        let cy = parseInt(values.cyb_misc_dmg_red) || 0;
        let g = parseInt(values.gen_misc_dmg_red) || 0;
        let a = parseInt(values.art_misc_dmg_red) || 0;
        let m = parseInt(values.misc_dmg_red) || 0;
        let t = parseInt(values.temp_misc_damage_reduction_bonus) || 0;
        let q = parseInt(values.quirk_misc_damage_reduction_bonus) || 0;
        let dmg_red = cy + g + a + m + t + q;
        setAttrs({
                misc_damage_reduction: dmg_red
        });
    });
}
on('change:cyb_misc_dmg_red change:gen_misc_dmg_red change:art_misc_dmg_red change:misc_dmg_red change:temp_misc_damage_reduction_bonus change:quirk_misc_damage_reduction_bonus', function(eventInfo) {
    updateMiscDmgRed();
});
  
function updateMiscCDS() {
  getAttrs(['cyb_misc_cds_bonus', 'art_misc_cds_bonus', 'misc_cds_bonus', 'temp_misc_cds_bonus', 'quirk_misc_cds_bonus'], function(values) {
      let cyb_cds = parseInt(values.cyb_misc_cds_bonus) || 0;        
      let artifact_cds = parseInt(values.art_misc_cds_bonus) || 0;   
      let misc_cds = parseInt(values.misc_cds_bonus) || 0;
      let temp_cds = parseInt(values.temp_misc_cds_bonus) || 0;
      let quirk_cds = parseInt(values.quirk_misc_cds_bonus) || 0;
      let misc_bonus = cyb_cds + artifact_cds + misc_cds + temp_cds + quirk_cds;
      setAttrs({
          misc_cds: misc_bonus
      });
  });
}

on('change:cyb_misc_cds_bonus change:art_misc_cds_bonus change:misc_cds_bonus change:temp_misc_cds_bonus change:quirk_misc_cds_bonus', function(eventInfo) {
  updateMiscCDS();
});

  
  function updateMiscMDS() {
      getAttrs(['cyb_misc_mds_bonus', 'art_misc_mds_bonus', 'misc_mds_bonus', 'temp_misc_mds_bonus','quirk_misc_mds_bonus'], function(values) {
          let cyb = parseInt(values.cyb_misc_mds_bonus) || 0;
          let art = parseInt(values.art_misc_mds_bonus) || 0;
          let misc = parseInt(values.misc_mds_bonus) || 0;
          let temp = parseInt(values.temp_misc_mds_bonus) || 0;
          let quirk = parseInt(values.quirk_misc_mds_bonus) || 0;
          let mds_bonus = cyb + art + misc + temp + quirk;
          setAttrs({
              misc_mds: mds_bonus
          });
      });
  }  
  on('change:cyb_misc_mds_bonus change:art_misc_mds_bonus change:misc_mds_bonus change:temp_misc_mds_bonus change:quirk_misc_mds_bonus', function(eventInfo) {
      updateMiscMDS();
  });
  
  function updateMentalDefense() {
      getAttrs(['wisdom', 'raw_energy', 'artifactmdsbonus', 'psi_domination_mds_bonus', 'psi_deflection_mds_bonus', 'misc_mds_bonus', 'temp_mds_bonus', 'quirk_mds_bonus'], function(values) {
          let w = parseInt(values.wisdom) || 0;
          let r = parseInt(values.raw_energy) || 0;
          let ar = parseInt(values.artifactmdsbonus) || 0;
          let d = parseInt(values.psi_domination_mds_bonus) || 0;
          let df = parseInt(values.psi_deflection_mds_bonus) || 0;
          let m = parseInt(values.misc_mds_bonus) || 0;
          let t = parseInt(values.temp_mds_bonus) || 0;
          let q = parseInt(values.quirk_mds_bonus) || 0;
          setAttrs({
              mds: w + Math.floor(r/10) + ar + d + df + m + t + q            
          });
      });
  }
  
  on('change:wisdom change:raw_energy change:artifactmdsbonus change:psi_domination_mds_bonus change:psi_deflection_mds_bonus change:misc_mds_bonus change:temp_mds_bonus change:quirk_mds_bonus', function(eventInfo) {
      updateMentalDefense();
  });
  
  
      
  /* UPDATE CORE ATTRIBUTES */
  function updateStrength() {
      getAttrs(
        [
          'racial_str',
          'strength_cyb',
          'strength_gen',
          'strength_art',
          'strength_misc',
          'strength_temp',
          'psi_body_discipline_adaption_str_bonus',
          'psi_telekinesis_str_bonus',
          'psi_causation_strength',
          'quirk_strength_bonus',
          'equipped_armor_strength'
        ],
        function (values) {
          let r = parseInt(values.racial_str) || 0;
          let c = parseInt(values.strength_cyb) || 0;
          let g = parseInt(values.strength_gen) || 0;
          let a = parseInt(values.strength_art) || 0;
          let m = parseInt(values.strength_misc) || 0;
          let t = parseInt(values.strength_temp) || 0;
          let bd = parseInt(values.psi_body_discipline_adaption_str_bonus) || 0;
          let tk = parseInt(values.psi_telekinesis_str_bonus) || 0;
          let ca = parseInt(values.psi_causation_strength) || 0;
          let q = parseInt(values.quirk_strength_bonus) || 0;
          let e = parseInt(values.equipped_armor_strength) || 0;
          setAttrs({
            strength: r + c + g + a + m + t + bd + tk + ca + q + e
          });
        }
      );
    }
    
    on(
      'change:racial_str change:strength_cyb change:strength_gen change:strength_art change:strength_misc change:strength_temp change:psi_body_discipline_adaption_str_bonus change:psi_telekinesis_str_bonus change:psi_causation_strength change:quirk_strength_bonus change:equipped_armor_strength',
      function (eventInfo) {
        updateStrength();
      }
    );
  
    function updateDexterity() {
      getAttrs(
        [
          'racial_dex',
          'dexterity_cyb',
          'dexterity_gen',
          'dexterity_art',
          'dexterity_misc',
          'dexterity_temp',
          'psi_body_discipline_adaption_dex_bonus',
          'psi_telekinesis_dex_bonus',
          'psi_deflection_dex_bonux',
          'quirk_dexterity_bonus',
          'equiped_armor_dexterity'
          ],
        function (values) {
          let r = parseInt(values.racial_dex) || 0;
          let c = parseInt(values.dexterity_cyb) || 0;
          let g = parseInt(values.dexterity_gen) || 0;
          let a = parseInt(values.dexterity_art) || 0;
          let m = parseInt(values.dexterity_misc) || 0;
          let t = parseInt(values.dexterity_temp) || 0;
          let bd = parseInt(values.psi_body_discipline_adaption_dex_bonus) || 0;
          let tk = parseInt(values.psi_telekinesis_dex_bonus) || 0;
          let df = parseInt(values.psi_deflection_dex_bonux) || 0;
          let q = parseInt(values.quirk_dexterity_bonus) || 0;
          let e = parseInt(values.equipped_armor_dexterity) || 0;
          setAttrs({
            dexterity: r + c + g + a + m + t + bd + tk + df + q + e
          });
        }
      );
    }
    
    on(
      'change:racial_dex change:dexterity_cyb change:dexterity_gen change:dexterity_art change:dexterity_misc change:dexterity_temp change:psi_body_discipline_adaption_dex_bonus change:psi_telekinesis_dex_bonus change:psi_deflection_dex_bonux change:quirk_dexterity_bonus change:equipped_armor_dexterity',
      function (eventInfo) {
        updateDexterity();
      }
    );
    
    function updateConstitution() {
      getAttrs(
        [
          'racial_con',
          'constitution_cyb',
          'constitution_gen',
          'constitution_art',
          'constitution_misc',
          'constitution_temp',
          'psi_body_discipline_adaption_con_bonus',
          'psi_telekinesis_con_bonus',
          'psi_deflection_con_bonus',
          'quirk_constitution_bonus',
          'equipped_armor_constitution'
        ],
        function (values) {
          let r = parseInt(values.racial_con) || 0;
          let c = parseInt(values.constitution_cyb) || 0;
          let g = parseInt(values.constitution_gen) || 0;
          let a = parseInt(values.constitution_art) || 0;
          let m = parseInt(values.constitution_misc) || 0;
          let t = parseInt(values.constitution_temp) || 0;
          let bd = parseInt(values.psi_body_discipline_adaption_con_bonus) || 0;
          let tk = parseInt(values.psi_telekinesis_con_bonus) || 0;
          let df = parseInt(values.psi_deflection_con_bonus) || 0;
          let q = parseInt(values.quirk_constitution_bonus) || 0;
          let e = parseInt(values.equipped_armor_constitution) || 0;
          setAttrs({
            constitution: r + c + g + a + m + t + bd + tk + df + q + e
          });
        }
      );
    }
    
    on(
      'change:racial_con change:constitution_cyb change:constitution_gen change:constitution_art change:constitution_misc change:constitution_temp change:psi_body_discipline_adaption_con_bonus change:psi_telekinesis_con_bonus change:psi_deflection_con_bonus change:quirk_constitution_bonus change:equipped_armor_constitution',
      function (eventInfo) {
        updateConstitution();
      }
    );
    
    function updateIntelligence() {
      getAttrs(
        [
          'racial_int',
          'intelligence_cyb',
          'intelligence_gen',
          'intelligence_art',
          'intelligence_misc',
          'intelligence_temp',
          'psi_clairvoyance_int_bonus',
          'quirk_intelligence_bonus'
        ],
        function (values) {
          let r = parseInt(values.racial_int) || 0;
          let c = parseInt(values.intelligence_cyb) || 0;
          let g = parseInt(values.intelligence_gen) || 0;
          let a = parseInt(values.intelligence_art) || 0;
          let m = parseInt(values.intelligence_misc) || 0;
          let t = parseInt(values.intelligence_temp) || 0;
          let cl = parseInt(values.psi_clairvoyance_int_bonus) || 0;
          let q = parseInt(values.quirk_intelligence_bonus) || 0;
          setAttrs({
            intelligence: r + c + g + a + m + t + cl + q
          });
        }
      );
    }
    
    on(
      'change:racial_int change:intelligence_cyb change:intelligence_gen change:intelligence_art change:intelligence_misc change:intelligence_temp change:psi_clairvoyance_int_bonus change:quirk_intelligence_bonus',
      function (eventInfo) {
        updateIntelligence();
      }
    );
    
    function updateWisdom() {
      getAttrs(
        [
          'racial_wis',
          'wisdom_cyb',
          'wisdom_gen',
          'wisdom_art',
          'wisdom_misc',
          'wisdom_temp',
          'psi_clairvoyance_wis_bonus',
          'quirk_wisdom_bonus'
        ],
        function (values) {
          let r = parseInt(values.racial_wis) || 0;
          let c = parseInt(values.wisdom_cyb) || 0;
          let g = parseInt(values.wisdom_gen) || 0;
          let a = parseInt(values.wisdom_art) || 0;
          let m = parseInt(values.wisdom_misc) || 0;
          let t = parseInt(values.wisdom_temp) || 0;
          let cl = parseInt(values.psi_clairvoyance_wis_bonus) || 0;
          let q = parseInt(values.quirk_wisdom_bonus) || 0;
          setAttrs({
            wisdom: r + c + g + a + m + t + cl + q
          });
        }
      );
    }
    
    on(
      'change:racial_wis change:wisdom_cyb change:wisdom_gen change:wisdom_art change:wisdom_misc change:wisdom_temp change:psi_clairvoyance_wis_bonus change:quirk_wisdom_bonus',
      function (eventInfo) {
        updateWisdom();
      }
    );
    
    function updateCharisma() {
      getAttrs(
        [
          'racial_cha',
          'charisma_cyb',
          'charisma_gen',
          'charisma_art',
          'charisma_misc',
          'charisma_temp',
          'psi_causation_cha_bonus',
          'psi_domination_cha_bonus',
          'quirk_domination_charisma_bonus'
        ],
        function (values) {
          let r = parseInt(values.racial_cha) || 0;
          let c = parseInt(values.charisma_cyb) || 0;
          let g = parseInt(values.charisma_gen) || 0;
          let a = parseInt(values.charisma_art) || 0;
          let m = parseInt(values.charisma_misc) || 0;
          let t = parseInt(values.charisma_temp) || 0;
          let ca = parseInt(values.psi_causation_cha_bonus) || 0;
          let dom = parseInt(values.psi_domination_cha_bonus) || 0;
          let q = parseInt(values.quirk_domination_charisma_bonus) || 0;
          setAttrs({
            charisma: r + c + g + a + m + t + ca + dom + q
          });
        }
      );
    }
    
    on(
      'change:racial_cha change:charisma_cyb change:charisma_gen change:charisma_art change:charisma_misc change:charisma_temp change:psi_causation_cha_bonus change:psi_domination_cha_bonus change:quirk_domination_charisma_bonus',
      function (eventInfo) {
        updateCharisma();
      }
    );
    
  
  
  /* LIFE ENERGY */
  function updateLifeEnergy() {
    getAttrs(['life_energy', 'artifactle', 'quirk_le', 'misc_le', 'life_energy_full', 'life_energy_regen_percent', 'psi_body_discipline_level', 'psi_clairvoyance_level', 'psi_deflection_level', 'psi_domination_level', 'psi_energy_communion_level', 'psi_molecular_alteration_level', 'psi_pyrokinesis_level', 'psi_subatomic_alteration_level', 'psi_telekinesis_level', 'psi_anti_psionics_level'], function(values) {
        let le = parseInt(values.life_energy) || 0;
        let le_full = parseInt(values.life_energy_full) || 0;
        let le_regen_percent = parseInt(values.life_energy_regen_percent) || 0; // This line was corrected
        let lea = parseInt(values.artifactle) || 0;
        let qle = parseInt(values.quirk_le) || 0;
        let me = parseInt(values.misc_le) || 0;
        let life = le + lea + qle + me || 0;
        let le_regen = Math.floor(le_full / 100) * le_regen_percent || 0;        
        /* Psi Life Energy */
        let bd = parseInt(values.psi_body_discipline_level) * 5 || 0;        
        let cl = parseInt(values.psi_clairvoyance_level) * 2 || 0;
        let de = parseInt(values.psi_deflection_level) * 2 || 0;
        let dom = parseInt(values.psi_domination_level) * 2  || 0;
        let ec = parseInt(values.psi_energy_communion_level) * 10 || 0;
        let ma = parseInt(values.psi_molecular_alteration_level) * 5 || 0;
        let py = parseInt(values.psi_pyrokinesis_level) * 3 || 0;
        let sa = parseInt(values.psi_subatomic_alteration_level) * 5 || 0;
        let tk = parseInt(values.psi_telekinesis_level) * 2 || 0;
        let ap = parseInt(values.psi_anti_psionics_level) * 5 || 0;
        let lesum = bd+cl+de+dom+ec+ma+py+sa+tk+ap || 0;

        setAttrs({ 
          psi_le_bonus: lesum,
          life_energy: life,
          life_energy_regenerated: le_regen
        });
    });
}

    on("change:life_energy change:artifactle change:quirk_le change:misc_le change:life_energy_regen_percent change:life_energy_full", function(eventInfo) {
      updateLifeEnergy();
    });
    
    function updateRawEnergy() {
      getAttrs(['life_energy', 'artifactre', 'quirk_re', 'misc_re'], function(values) {
        let le = Math.floor(parseInt(values.life_energy) / 100) || 0;
        let ae = parseInt(values.artifactre) || 0;
        let qe = parseInt(values.quirk_re) || 0;
        let me = parseInt(values.misc_re) || 0;
        let k = parseInt(parseInt(values.life_energy) / 1000) || 0;
        let re = le + ae + qe + me + k || 0;
        setAttrs({ raw_energy: re });
      });
    }
    on("change:life_energy change:artifactre change:quirk_re change:misc_re", function(eventInfo) {
      updateRawEnergy();
    });
    
    /*
      function updateSphere() {
      getAttrs(['raw_energy', 'artifactsphere', 'artifactspherebonus', 'psi_quirk_sphere_bonus'], function(values) {
        let re = parseInt(values.raw_energy) || 0;
        let art = parseInt(values.artifactspherebonus) || 0;                
        let q = parseInt(values.psi_quirk_sphere_bonus) || 0;
        let soi = re + art + q;

        setAttrs({ 
          psi_sphere: soi 
        });
      });
    }
    on("change:raw_energy change:artifactsphere change:psi_quirk_sphere_bonus", function(eventInfo) {
      updateSphere();
    });  
    */
  
    /* PSIONICS */
    function updateBodyDiscipline() {
      getAttrs(['psi_body_discipline_points', 'psi_body_discipline_boost_str_points', 'psi_body_discipline_boost_str_re', 'psi_body_discipline_boost_str_le', 'psi_body_discipline_boost_dex_points', 'psi_body_discipline_boost_dex_re', 'psi_body_discipline_boost_dex_le', 'psi_body_discipline_boost_con_points','psi_body_discipline_boost_con_re', 'psi_body_discipline_boost_con_le', 'psi_body_discipline_heal_points', 'psi_body_discipline_heal_re', 'psi_body_discipline_heal_le'], function(values) {
          const dice_values = [
          "1d4", "1d6", "1d8", "1d10", "1d12", "1d20",
        "1D20+1D4", "1D20+1D6", "1D20+1D8", "1D20+1D10", "1D20+1D12", "1D20+1D20",
        "2D20+1D4", "2D20+1D6", "2D20+1D8", "2D20+1D10", "2D20+1D12", "2D20+2D20",
        "3D20+1D4", "3D20+1D6", "3D20+1D8", "3D20+1D10", "3D20+1D12", "3D20+3D20",
        "4D20+1D4", "4D20+1D6", "4D20+1D8", "4D20+1D10", "4D20+1D12", "4D20+4D20",
        "5D20+1D4", "5D20+1D6", "5D20+1D8", "5D20+1D10", "5D20+1D12", "5D20+1D20",
        "6D20+1D4", "6D20+1D6", "6D20+1D8", "6D20+1D10", "6D20+1D12", "6D20+1D20",
        "7D20+1D4", "7D20+1D6", "7D20+1D8", "7D20+1D10", "7D20+1D12", "7D20+1D20",
        "8D20+1D4", "8D20+1D6", "8D20+1D8", "8D20+1D10", "8D20+1D12", "8D20+1D20",
        "9D20+1D4", "9D20+1D6", "9D20+1D8", "9D20+1D10", "9D20+1D12", "9D20+1D20",
        "10D20+1D4", "10D20+1D6", "10D20+1D8", "10D20+1D10", "10D20+1D12", "10D20+1D20",
        "11D20+1D4", "11D20+1D6", "11D20+1D8", "11D20+1D10", "11D20+1D12", "11D20+1D20",
        "12D20+1D4", "12D20+1D6", "12D20+1D8", "12D20+1D10", "12D20+1D12", "12D20+1D20",
        "13D20+1D4", "13D20+1D6", "13D20+1D8", "13D20+1D10", "13D20+1D12", "13D20+1D20",
        "14D20+1D4", "14D20+1D6", "14D20+1D8", "14D20+1D10", "14D20+1D12", "14D20+1D20",
        "15D20+1D4", "15D20+1D6", "15D20+1D8", "15D20+1D10", "15D20+1D12", "15D20+1D20",
        "16D20+1D4", "16D20+1D6", "16D20+1D8", "16D20+1D10", "16D20+1D12", "16D20+1D20",
        "17D20+1D4", "17D20+1D6", "17D20+1D8", "17D20+1D10", "17D20+1D12", "17D20+1D20",
        "18D20+1D4", "18D20+1D6", "18D20+1D8", "18D20+1D10", "18D20+1D12", "18D20+1D20",
        "19D20+1D4", "19D20+1D6", "19D20+1D8", "19D20+1D10", "19D20+1D12", "19D20+1D20",
        "20D20+1D4", "20D20+1D6", "20D20+1D8", "20D20+1D10", "20D20+1D12", "20D20+1D20",
        "20D20+1D100", "5D100", "6D100", "7D100", "8D100", "9D100", "10D100+100"
          ];
          let body_points = parseInt(values.psi_body_discipline_points) || 0;
          let body_re = parseInt(values.psi_body_discipline_re) || 0;
          let body_le = parseInt(values.psi_body_discipline_le) || 0;
          let body_discipline_level = Math.floor(body_points / 5) || 0;
  
          let boost_str_points = parseInt(values.psi_body_discipline_boost_str_points) || 0;
          let boost_str_re = parseInt(values.psi_body_discipline_boost_str_re) || 0;
          let strength_boost_le = parseInt(values.psi_body_discipline_boost_str_le) || 0;
          let strength_boost_level = boost_str_points + Math.floor(boost_str_re / 15) || 0;
  
          let boost_dex_points = parseInt(values.psi_body_discipline_boost_dex_points) || 0;
          let boost_dex_re = parseInt(values.psi_body_discipline_boost_dex_re) || 0;
          let dexterity_boost_le = parseInt(values.psi_body_discipline_boost_dex_le) || 0;
          let dexterity_boost_level = boost_dex_points + Math.floor(boost_dex_re / 20) || 0;
  
          let boost_con_points = parseInt(values.psi_body_discipline_boost_con_points) || 0;
          let boost_con_re = parseInt(values.psi_body_discipline_boost_con_re) || 0;
          let constitution_boost_le = parseInt(values.psi_body_discipline_boost_con_le) || 0;
          let constitution_boost_level = boost_con_points + Math.floor(boost_con_re / 10) || 0;
  
          let heal_points = parseInt(values.psi_body_discipline_heal_points) || 0;
          let heal_re = parseInt(values.psi_body_discipline_heal_re) || 0;
          let heal_le = parseInt(values.psi_body_discipline_heal_le) || 0;
          let heal_level = parseInt(values.psi_body_discipline_heal_level) || 0;
  
          /* STRENGTH */
          let boost_str = boost_str_points + Math.floor(boost_str_re / 5) || 0;
          /* DEXTERITY */
          let boost_dex = Math.floor(boost_dex_re / 15) || 0;
          /* CONSTITUTION */
          let boost_con = Math.floor(boost_con_re / 8) || 0;
          /* HEAL EQUATION */
          let bdh1 = Math.floor(heal_re / 2) || 0;        
          let heal_dice_index = Math.floor(heal_points);
          let heal_dice = dice_values[heal_dice_index] + "+" + bdh1 || "1d4";
  
          setAttrs({
              psi_body_discipline_level: body_discipline_level,
              psi_body_discipline_boost_str_level: boost_str_points,
              psi_body_discipline_boost_dex_level: boost_dex_points,
              psi_body_discipline_boost_con_level: boost_con_points,
              psi_body_discipline_heal_level: heal_points,
              psi_body_discipline_heal_dice: heal_dice
          });
      });
  }
  
  on("change:psi_body_discipline_points change:psi_body_discipline_boost_str_points change:psi_body_discipline_boost_str_re change:psi_body_discipline_boost_str_le change:psi_body_discipline_boost_dex_points change:psi_body_discipline_boost_dex_re change:psi_body_discipline_boost_dex_le  change:psi_body_discipline_boost_dex_points change:psi_body_discipline_boost_con_re change:psi_body_discipline_boost_con_le  change:psi_body_discipline_heal_points change:psi_body_discipline_heal_re change:psi_body_discipline_heal_le change:psi_body_discipline_heal_level", function(eventInfo) {
      updateBodyDiscipline();
  });
  
  
  
  /* Clairvoyance */
  function updateClairvoyance() {
    getAttrs([
      "awareness",
      "intelligence",
      "wisdom",
      "psi_clairvoyance_points",
      "psi_clairvoyance_re",
      "psi_clairvoyance_le",
      "psi_clairvoyance_awareness_points",
      "psi_clairvoyance_awareness_re",
      "psi_clairvoyance_astral_projection_points",
      "psi_clairvoyance_astral_projection_re",
      "psi_clairvoyance_astral_projection_distance",
      "raw_energy",
      "life_energy",
      "psi_clairvoyance_history_points",
      "psi_clairvoyance_history_past_points",
      "psi_clairvoyance_history_remote_view_points",
      "psi_clairvoyance_history_premonition_points",
      "psi_clairvoyance_history_past_re",
      "psi_clairvoyance_history_present_re",
      "psi_clairvoyance_future_re",
      "psi_clairvoyance_sub_points",
      "psi_clairvoyance_sub_custom_points"
    ], function(values) {
  
      // Base Clairvoyance
      let clairvoyance_points = parseInt(values.psi_clairvoyance_points) || 0;
      let clairvoyance_level = Math.floor(clairvoyance_points / 5) || 0;
      let clairvoyance_re = parseInt(values.psi_clairvoyance_re) || 0;
      let clairvoyance_le = parseInt(values.psi_clairvoyance_le) || 0;
      let re = parseInt(values.raw_energy) || 0;
      let le = parseInt(values.life_energy) || 0;
      let health = clairvoyance_level * 5 || 0;
      let subpoints = parseInt(values.psi_clairvoyance_sub_points) || 0;
      let subpoints2 = parseInt(values.psi_clairvoyance_sub_custom_points) || 0;
      let available = (clairvoyance_level + subpoints2) - (parseInt(values.psi_clairvoyance_awareness_points) || 0) - (parseInt(values.psi_clairvoyance_astral_projection_points) || 0) - (parseInt(values.psi_clairvoyance_history_remote_view_points) || 0) - (parseInt(values.psi_clairvoyance_history_premonition_points) || 0) - subpoints;
  
      // Heightened Awareness
      let awareness = parseInt(values.awareness) || 0;
      let heightened_awareness_points = parseInt(values.psi_clairvoyance_awareness_points) || 0;
      let heightened_awareness_re = parseInt(values.psi_clairvoyance_awareness_re) || 0;
      let heightened_awareness_level = heightened_awareness_points + Math.floor(heightened_awareness_re / 10) || 0;
  
      // Astral Projection
      let astral_projection_points = parseInt(values.psi_clairvoyance_astral_projection_points) || 0;
      let astral_projection_level = astral_projection_points;
      let astral_re = parseInt(values.psi_clairvoyance_astral_projection_re) || 0;
      let astral_le = parseInt(values.psi_clairvoyance_astral_projection_le) || 0;
      let astral_time = Math.floor(astral_projection_level / 2) + " min";
      let astral_percent = Math.floor((le / 200) * astral_projection_level) || 0;
  
      // History
      let history_points = parseInt(values.psi_clairvoyance_history_points) || 0;
      let history_level = history_points || 0;
      let past_points = parseInt(values.psi_clairvoyance_history_past_points) || 0;
      let remote_view_points = parseInt(values.psi_clairvoyance_history_remote_view_points) || 0;
      let premonition_points = parseInt(values.psi_clairvoyance_history_premonition_points) || 0;
      let past_level = past_points;
      let remote_view_level = remote_view_points;
      let premonition_level = premonition_points;
  
      setAttrs({
        psi_clairvoyance_level: clairvoyance_level,
        psi_clairvoyance_available: available,
        psi_clairvoyance_health: health,
        psi_clairvoyance_heightened_awareness_level: heightened_awareness_level,
        psi_clairvoyance_astral_projection_level: astral_projection_level,
        psi_clairvoyance_astral_projection_le_percent: astral_percent,
        psi_clairvoyance_astral_passive_re: Math.floor(astral_percent / 100) + " Turn",
        psi_clairvoyance_astral_projection_time: astral_time,
        psi_clairvoyance_history_past_level: past_level,
        psi_clairvoyance_history_remote_view_level: remote_view_level,
        psi_clairvoyance_history_premonition_level: premonition_level
      });
    });
  }
  
  on(
    'change:psi_clairvoyance_points ' +
    'change:psi_clairvoyance_sub_points ' +
    'change:psi_clairvoyance_sub_custom_points ' +
    'change:psi_clairvoyance_awareness_re ' +
    'change:psi_clairvoyance_awareness_points ' +
    'change:psi_clairvoyance_astral_projection_points ' +
    'change:psi_clairvoyance_astral_projection_re ' +
    'change:psi_clairvoyance_astral_projection_distance ' +
    'change:raw_energy ' +
    'change:life_energy ' +
    'change:psi_clairvoyance_history_points ' +
    'change:psi_clairvoyance_history_past_points ' +
    'change:psi_clairvoyance_history_remote_view_points ' +
    'change:psi_clairvoyance_history_premonition_points',
    function() {
      updateClairvoyance();
    }
  );
  
  
      
  
  /* DEFLECTION */
  function updateDeflection() {
    getAttrs(
      [
        'psi_deflection_points',
        'psi_deflection_sub_points',
        'psi_deflection_custom_sub_points',
        'raw_energy',
        'psi_deflection_melee_def_points',
        'psi_deflection_ranged_def_points',
        'psi_deflection_mental_def_points',
        'psi_deflection_ship_def_points',
        'psi_deflection_melee_def_bonus_re',
        'psi_deflection_ranged_def_bonus_re',
        'psi_deflection_mental_def_bonus_re',
        'psi_deflection_ship_def_bonus_re',
        'psi_deflection_cds_def_bonus_re'
      ],
      function(values) {
        let re = parseInt(values.raw_energy) || 0;
        let dp = parseInt(values.psi_deflection_points) || 0;
        let dmbre = parseInt(values.psi_deflection_melee_def_bonus_re) || 0;
        let drbre = parseInt(values.psi_deflection_ranged_def_bonus_re) || 0;
        let dmenbre = parseInt(values.psi_deflection_mental_def_bonus_re) || 0;
        let dsbre = parseInt(values.psi_deflection_ship_def_bonus_re) || 0;
        let dmdp = parseInt(values.psi_deflection_melee_def_points) || 0;
        let drdp = parseInt(values.psi_deflection_ranged_def_points) || 0;
        let dmdsp = parseInt(values.psi_deflection_mental_def_points) || 0;
        let dsdp = parseInt(values.psi_deflection_ship_def_points) || 0;
        let subpts = parseInt(values.psi_deflection_sub_points) || 0;
        let custpts = parseInt(values.psi_deflection_custom_sub_points) || 0;
  
        let dl = Math.floor(dp / 5) || 0;
        let available = (dl + custpts) - (subpts + dsdp + dmdsp + drdp) || 0;
        /* EQUATIONS */
        let melee = dmdp + Math.floor(re / 10) || 0;
        let ranged = drdp + Math.floor(re / 10) || 0;
        let mental = dmdsp + Math.floor(re / 10) || 0;
        let ship = dsdp + Math.floor(re / 20) || 0;
        setAttrs({
          psi_deflection_level: dl,
          psi_deflection_points_available: available,
          psi_deflection_melee_defense_bonus: melee,
          psi_deflection_ranged_defense_bonus: ranged,
          psi_deflection_mentals_defense_bonus: mental,
          psi_deflection_ship_defense_bonus: ship
        });
      }
    );
  }
  
  on(
    'change:psi_deflection_points change:psi_deflection_sub_points change:psi_deflection_custom_sub_points change:raw_energy change:psi_deflection_melee_def_points change:psi_deflection_ranged_def_points change:psi_deflection_mental_def_points change:psi_deflection_ship_def_points change:psi_deflection_melee_def_bonus_re change:psi_deflection_ranged_def_bonus_re change:psi_deflection_mental_def_bonus_re change:psi_deflection_ship_def_bonus_re change:psi_deflection_cds_def_bonus_re',
    function(eventInfo) {
      updateDeflection();
    }
  );

  
  
  
  /* DOMINATION */
  function updateDomination() {
      getAttrs([
        'psi_domination_points',
        'psi_domination_empathy_insight_bonus_points',
        'psi_domination_read_thoughts_bonus_points',
        'psi_domination_charm_bonus_points',
        'psi_domination_suggestion_bonus_points',
        'psi_domination_command_bonus_points',
        'psi_domination_hallucination_bonus_points',
        'psi_domination_mind_spike_points',
        'psi_domination_mind_spike_re',
        'psi_domination_mind_spike_le',
        'psi_domination_remote_heal_points',
        'psi_domination_remote_heal_re',
        'psi_domination_remote_heal_le'
      ], function(values) {
        let points = parseInt(values.psi_domination_points) || 0;
        let empathy_bonus = parseInt(values.psi_domination_empathy_insight_bonus_points) || 0;
        let read_thoughts_bonus = parseInt(values.psi_domination_read_thoughts_bonus_points) || 0;
        let charm_bonus = parseInt(values.psi_domination_charm_bonus_points) || 0;
        let suggestion_bonus = parseInt(values.psi_domination_suggestion_bonus_points) || 0;
        let command_bonus = parseInt(values.psi_domination_command_bonus_points) || 0;
        let hallucination_bonus = parseInt(values.psi_domination_hallucination_bonus_points) || 0;
        let mind_spike_points = parseInt(values.psi_domination_mind_spike_points) || 0;
        let mind_spike_re = parseInt(values.psi_domination_mind_spike_re) || 0;
        let mind_spike_le = parseInt(values.psi_domination_mind_spike_le) || 0;
        let remote_heal_points = parseInt(values.psi_domination_remote_heal_points) || 0;
        let remote_heal_re = parseInt(values.psi_domination_remote_heal_re) || 0;
        let remote_heal_le = parseInt(values.psi_domination_remote_heal_le) || 0;
    
        const dice_values = [
        "1d4", "1d6", "1d8", "1d10", "1d12", "1d20",
        "1D20+1D4", "1D20+1D6", "1D20+1D8", "1D20+1D10", "1D20+1D12", "1D20+1D20",
        "2D20+1D4", "2D20+1D6", "2D20+1D8", "2D20+1D10", "2D20+1D12", "2D20+2D20",
        "3D20+1D4", "3D20+1D6", "3D20+1D8", "3D20+1D10", "3D20+1D12", "3D20+3D20",
        "4D20+1D4", "4D20+1D6", "4D20+1D8", "4D20+1D10", "4D20+1D12", "4D20+4D20",
        "5D20+1D4", "5D20+1D6", "5D20+1D8", "5D20+1D10", "5D20+1D12", "5D20+1D20",
        "6D20+1D4", "6D20+1D6", "6D20+1D8", "6D20+1D10", "6D20+1D12", "6D20+1D20",
        "7D20+1D4", "7D20+1D6", "7D20+1D8", "7D20+1D10", "7D20+1D12", "7D20+1D20",
        "8D20+1D4", "8D20+1D6", "8D20+1D8", "8D20+1D10", "8D20+1D12", "8D20+1D20",
        "9D20+1D4", "9D20+1D6", "9D20+1D8", "9D20+1D10", "9D20+1D12", "9D20+1D20",
        "10D20+1D4", "10D20+1D6", "10D20+1D8", "10D20+1D10", "10D20+1D12", "10D20+1D20",
        "11D20+1D4", "11D20+1D6", "11D20+1D8", "11D20+1D10", "11D20+1D12", "11D20+1D20",
        "12D20+1D4", "12D20+1D6", "12D20+1D8", "12D20+1D10", "12D20+1D12", "12D20+1D20",
        "13D20+1D4", "13D20+1D6", "13D20+1D8", "13D20+1D10", "13D20+1D12", "13D20+1D20",
        "14D20+1D4", "14D20+1D6", "14D20+1D8", "14D20+1D10", "14D20+1D12", "14D20+1D20",
        "15D20+1D4", "15D20+1D6", "15D20+1D8", "15D20+1D10", "15D20+1D12", "15D20+1D20",
        "16D20+1D4", "16D20+1D6", "16D20+1D8", "16D20+1D10", "16D20+1D12", "16D20+1D20",
        "17D20+1D4", "17D20+1D6", "17D20+1D8", "17D20+1D10", "17D20+1D12", "17D20+1D20",
        "18D20+1D4", "18D20+1D6", "18D20+1D8", "18D20+1D10", "18D20+1D12", "18D20+1D20",
        "19D20+1D4", "19D20+1D6", "19D20+1D8", "19D20+1D10", "19D20+1D12", "19D20+1D20",
        "20D20+1D4", "20D20+1D6", "20D20+1D8", "20D20+1D10", "20D20+1D12", "20D20+1D20",
        "20D20+1D100", "5D100", "6D100", "7D100", "8D100", "9D100", "10D100+100"
        ];
    
        let remote_heal_dice = dice_values[Math.floor(remote_heal_points / 2)] || "1d4";
        let remote_heal_bonus = remote_heal_re !== 0 ? `+${remote_heal_re}` : "";
        let remote_heal_multiplier = Math.floor(remote_heal_le / 10) + 1;
        let remote_heal_display = `(${remote_heal_dice}${remote_heal_bonus})*${remote_heal_multiplier}`;
    
        let mind_spike_dice = dice_values[Math.floor(mind_spike_points / 4)] || "1d4";
        let mind_spike_bonus = mind_spike_re > 0 ? `+${Math.floor(mind_spike_re / 20)}` : "";
        let mind_spike_display = `${mind_spike_dice}${mind_spike_bonus}`;
  
        let psi_level = Math.floor(points / 5) || 0;
    
        setAttrs({
          psi_domination_level: psi_level,
          psi_domination_remote_heal_level: remote_heal_points,
          psi_domination_remote_heal_dice: remote_heal_display,
          psi_domination_empathy_insight_bonus: empathy_bonus,
          psi_domination_read_thoughts_bonus: read_thoughts_bonus,
          psi_domination_charm_bonus: charm_bonus,
          psi_domination_suggestion_bonus: suggestion_bonus,
          psi_domination_command_bonus: command_bonus,
          psi_domination_hallucination_bonus: hallucination_bonus,
          psi_domination_mind_spike_level: mind_spike_points,
          psi_domination_mind_spike_bonus: mind_spike_display
        });
      });
    }
    
    on("change:psi_domination_points change:psi_domination_empathy_insight_bonus_points change:psi_domination_read_thoughts_bonus_points change:psi_domination_charm_bonus_points change:psi_domination_suggestion_bonus_points change:psi_domination_command_bonus_points change:psi_domination_hallucination_bonus_points change:psi_domination_mind_spike_points change:psi_domination_mind_spike_re change:psi_domination_mind_spike_le change:psi_domination_remote_heal_points change:psi_domination_remote_heal_re change:psi_domination_remote_heal_le", function(eventInfo) {
      updateDomination();
    });
    
  
  // Energy Communion //
  // Listens for changes in the fields that should trigger an update
  
  function updateEnergyCommunion() {
    getAttrs(
      [
        "psi_energy_communion_level",
        "psi_energy_communion_re",
        "psi_energy_communion_points",
        "psi_energy_communion_energize_bonus_points",
        "psi_energy_communion_energize_watts_bonus_re",
        "psi_energy_communion_energize_watts_bonus_le",
        "psi_energy_communion_disable_bonus_points",
        "psi_energy_communion_disable_bonus_re",
        "psi_energy_communion_electrocute_points",
        "psi_energy_communion_electrocute_re",
        "psi_energy_communion_electrocute_le",
        "psi_energy_communion_energy_shield_points",
        "psi_energy_communion_energy_shield_re",
        "psi_energy_communion_energy_shield_le",
        "raw_energy"
      ],
      function(values) {
        let level = Math.floor((parseInt(values.psi_energy_communion_points) || 0) / 5);
        let points_available =
          level -
          ((parseInt(values.psi_energy_communion_energize_bonus_points) || 0) +
            (parseInt(values.psi_energy_communion_disable_bonus_points) || 0) +
            (parseInt(values.psi_energy_communion_electrocute_points) || 0) +
            (parseInt(values.psi_energy_communion_energy_shield_points) || 0));
  
        const dice_values = [
        "1d4", "1d6", "1d8", "1d10", "1d12", "1d20",
        "1D20+1D4", "1D20+1D6", "1D20+1D8", "1D20+1D10", "1D20+1D12", "1D20+1D20",
        "2D20+1D4", "2D20+1D6", "2D20+1D8", "2D20+1D10", "2D20+1D12", "2D20+2D20",
        "3D20+1D4", "3D20+1D6", "3D20+1D8", "3D20+1D10", "3D20+1D12", "3D20+3D20",
        "4D20+1D4", "4D20+1D6", "4D20+1D8", "4D20+1D10", "4D20+1D12", "4D20+4D20",
        "5D20+1D4", "5D20+1D6", "5D20+1D8", "5D20+1D10", "5D20+1D12", "5D20+1D20",
        "6D20+1D4", "6D20+1D6", "6D20+1D8", "6D20+1D10", "6D20+1D12", "6D20+1D20",
        "7D20+1D4", "7D20+1D6", "7D20+1D8", "7D20+1D10", "7D20+1D12", "7D20+1D20",
        "8D20+1D4", "8D20+1D6", "8D20+1D8", "8D20+1D10", "8D20+1D12", "8D20+1D20",
        "9D20+1D4", "9D20+1D6", "9D20+1D8", "9D20+1D10", "9D20+1D12", "9D20+1D20",
        "10D20+1D4", "10D20+1D6", "10D20+1D8", "10D20+1D10", "10D20+1D12", "10D20+1D20",
        "11D20+1D4", "11D20+1D6", "11D20+1D8", "11D20+1D10", "11D20+1D12", "11D20+1D20",
        "12D20+1D4", "12D20+1D6", "12D20+1D8", "12D20+1D10", "12D20+1D12", "12D20+1D20",
        "13D20+1D4", "13D20+1D6", "13D20+1D8", "13D20+1D10", "13D20+1D12", "13D20+1D20",
        "14D20+1D4", "14D20+1D6", "14D20+1D8", "14D20+1D10", "14D20+1D12", "14D20+1D20",
        "15D20+1D4", "15D20+1D6", "15D20+1D8", "15D20+1D10", "15D20+1D12", "15D20+1D20",
        "16D20+1D4", "16D20+1D6", "16D20+1D8", "16D20+1D10", "16D20+1D12", "16D20+1D20",
        "17D20+1D4", "17D20+1D6", "17D20+1D8", "17D20+1D10", "17D20+1D12", "17D20+1D20",
        "18D20+1D4", "18D20+1D6", "18D20+1D8", "18D20+1D10", "18D20+1D12", "18D20+1D20",
        "19D20+1D4", "19D20+1D6", "19D20+1D8", "19D20+1D10", "19D20+1D12", "19D20+1D20",
        "20D20+1D4", "20D20+1D6", "20D20+1D8", "20D20+1D10", "20D20+1D12", "20D20+1D20",
        "20D20+1D100", "5D100", "6D100", "7D100", "8D100", "9D100", "10D100+100"
        ];
  
        let electrocute_level = parseInt(values.psi_energy_communion_electrocute_points) || 0;
        let electrocute_dice =
          dice_values[Math.floor(parseInt(values.psi_energy_communion_electrocute_points) || 0)] ||
          "1d4";
        let electrocute_dice_bonus =
          parseInt(values.psi_energy_communion_electrocute_re) || 0;
        let electrocute_dice_total = `(${electrocute_dice}+${electrocute_dice_bonus})`;
  
        let energy_shield_level = parseInt(values.psi_energy_communion_energy_shield_points) || 0;
        let energy_shield_dice =
          dice_values[Math.floor(parseInt(values.psi_energy_communion_energy_shield_points) || 0)] ||
          "1d4";
  
        let energy_shield_re_bonus =
          parseInt(values.psi_energy_communion_energy_shield_re) || 0;
        let energy_shield_dice_total = `(${energy_shield_dice}+${energy_shield_re_bonus})`;
  
        let energize_re = parseInt(values.psi_energy_communion_energize_watts_bonus_re) || 0;
        let energize_le = parseInt(values.psi_energy_communion_energize_watts_bonus_le) || 0;
        let energize_bonus = parseInt(values.psi_energy_communion_energize_bonus_points) || 0;
        let energize_watts_turn = Math.floor((energize_bonus * energize_re) + energize_le) / 2 || 0;
        let energize_watts_min = energize_watts_turn * 2 || 0;
        let energize_watts_hour = Math.floor((energize_watts_min * 60) / 1000) || 0;
  
        let disable_bonus = parseInt(values.psi_energy_communion_disable_bonus_points) || 0;
  
        let shield_le = parseInt(values.psi_energy_communion_energy_shield_le) || 0;
        let shield_p_plus = Math.floor(parseInt(values.psi_energy_communion_energy_shield_points) / 16) + Math.floor(shield_le / 500) || 1;
        let shield_damage_reduction = parseInt(values.psi_energy_communion_energy_shield_points) * parseInt(values.raw_energy) || 0;
  
        setAttrs({
          psi_energy_communion_level: level,
          psi_energy_communion_points_available: points_available,
          psi_energy_communion_energy_shield_dice: energy_shield_dice_total,
          psi_energy_communion_energize_watts_bonus: energize_bonus,
          psi_energy_communion_energize_turn: energize_watts_turn,
          psi_energy_communion_energize_min: energize_watts_min,
          psi_energy_communion_energize_hour: energize_watts_hour,
          psi_energy_communion_disable_bonus: disable_bonus,
          psi_energy_communion_electrocute_level: electrocute_level,
          psi_energy_communion_electrocute_dice: electrocute_dice_total,
          psi_energy_communion_energy_shield_level: energy_shield_level,
          psi_energy_communion_energy_shield_p_plus: shield_p_plus,
          psi_energy_communion_energy_shield_damage_reduction: shield_damage_reduction
        });
      }
    );
  }
  
  on(
    "change:psi_energy_communion_level change:psi_energy_communion_re change:psi_energy_communion_points change:psi_energy_communion_energize_bonus_points change:psi_energy_communion_energize_watts_bonus_re change:psi_energy_communion_energize_watts_bonus_le change:psi_energy_communion_disable_bonus_points change:psi_energy_communion_disable_bonus_re change:psi_energy_communion_electrocute_points change:psi_energy_communion_electrocute_re change:psi_energy_communion_electrocute_le change:psi_energy_communion_energy_shield_points change:psi_energy_communion_energy_shield_re change:psi_energy_communion_energy_shield_le change:raw_energy",
    function() {
      updateEnergyCommunion();
    }
  );
  
  
    
    // Molecular Alteration  
    function updateMolecularAlteration() {
      getAttrs(
        [
          "intelligence",
          "psi_molecular_alteration_points",
          "psi_molecular_alteration_level",
          "psi_molecular_alteration_liquify_points",
          "psi_molecular_alteration_liquify_re",
          "psi_molecular_alteration_liquify_le",
          "psi_molecular_alteration_repair_armor_points",
          "psi_molecular_alteration_repair_armor_re",
          "psi_molecular_alteration_reshape_points",
          "psi_molecular_alteration_reshape_re",
          "psi_molecular_alteration_reshape_le",
          "psi_molecular_alteration_form_tech_level",
          "psi_molecular_alteration_form_points",
          "psi_molecular_alteration_form_blueprint_cost_2",
          "psi_molecular_alteration_form_blueprint_cost_3",
          "psi_molecular_alteration_form_blueprint_cost_4",
          "psi_molecular_alteration_form_blueprint_cost_5",
          "psi_molecular_alteration_form_blueprint_cost_6",
          "psi_molecular_alteration_form_blueprint_cost_7"
        ],
        function(values) {
          /* Form */
          let form_tl = parseInt(values.psi_molecular_alteration_form_tech_level) || 0;
          let form_cost_2 = Math.floor(form_tl / parseInt(values.psi_molecular_alteration_form_blueprint_cost_2)) || 0;
          let form_cost_3 = Math.floor(form_tl / parseInt(values.psi_molecular_alteration_form_blueprint_cost_3)) || 0;
          let form_cost_4 = Math.floor(form_tl / parseInt(values.psi_molecular_alteration_form_blueprint_cost_4)) || 0;
          let form_cost_5 = Math.floor(form_tl / parseInt(values.psi_molecular_alteration_form_blueprint_cost_5)) || 0;
          let form_cost_6 = Math.floor(form_tl / parseInt(values.psi_molecular_alteration_form_blueprint_cost_6)) || 0;
          let form_cost_7 = Math.floor(form_tl / parseInt(values.psi_molecular_alteration_form_blueprint_cost_7)) || 0;
          let form_points = parseInt(values.psi_molecular_alteration_form_points) || 0;
          let liquify_level = parseInt(values.psi_molecular_alteration_liquify_points) || 0;
          let repair_level = parseInt(values.psi_molecular_alteration_repair_armor_points) || 0;
          let reshape_level = parseInt(values.psi_molecular_alteration_reshape_points) || 0;
    
          let intelligence = parseInt(values.intelligence) || 0;
          let points = parseInt(values.psi_molecular_alteration_points) || 0;
          let level = Math.floor(points / 5);
          let reshape_points = parseInt(values.psi_molecular_alteration_reshape_points) || 0;
          let reshape_re = parseInt(values.psi_molecular_alteration_reshape_re) || 0;
          let reshape_le = parseInt(values.psi_molecular_alteration_reshape_le) || 0;
          let liquify_points = parseInt(values.psi_molecular_alteration_liquify_points) || 0;
          let liquify_re = parseInt(values.psi_molecular_alteration_liquify_re) || 0;
          let liquify_le = parseInt(values.psi_molecular_alteration_liquify_le) || 0;
          let repair_armor_points = parseInt(values.psi_molecular_alteration_repair_armor_points) || 0;
          let repair_armor_re = parseInt(values.psi_molecular_alteration_repair_armor_re) || 0;
          let repair_armor_le = parseInt(values.psi_molecular_alteration_repair_armor_le) || 0;
    
          const dice_values = [
          "1d4", "1d6", "1d8", "1d10", "1d12", "1d20",
          "1D20+1D4", "1D20+1D6", "1D20+1D8", "1D20+1D10", "1D20+1D12", "1D20+1D20",
          "2D20+1D4", "2D20+1D6", "2D20+1D8", "2D20+1D10", "2D20+1D12", "2D20+2D20",
          "3D20+1D4", "3D20+1D6", "3D20+1D8", "3D20+1D10", "3D20+1D12", "3D20+3D20",
          "4D20+1D4", "4D20+1D6", "4D20+1D8", "4D20+1D10", "4D20+1D12", "4D20+4D20",
          "5D20+1D4", "5D20+1D6", "5D20+1D8", "5D20+1D10", "5D20+1D12", "5D20+1D20",
          "6D20+1D4", "6D20+1D6", "6D20+1D8", "6D20+1D10", "6D20+1D12", "6D20+1D20",
          "7D20+1D4", "7D20+1D6", "7D20+1D8", "7D20+1D10", "7D20+1D12", "7D20+1D20",
          "8D20+1D4", "8D20+1D6", "8D20+1D8", "8D20+1D10", "8D20+1D12", "8D20+1D20",
          "9D20+1D4", "9D20+1D6", "9D20+1D8", "9D20+1D10", "9D20+1D12", "9D20+1D20",
          "10D20+1D4", "10D20+1D6", "10D20+1D8", "10D20+1D10", "10D20+1D12", "10D20+1D20",
          "11D20+1D4", "11D20+1D6", "11D20+1D8", "11D20+1D10", "11D20+1D12", "11D20+1D20",
          "12D20+1D4", "12D20+1D6", "12D20+1D8", "12D20+1D10", "12D20+1D12", "12D20+1D20",
          "13D20+1D4", "13D20+1D6", "13D20+1D8", "13D20+1D10", "13D20+1D12", "13D20+1D20",
          "14D20+1D4", "14D20+1D6", "14D20+1D8", "14D20+1D10", "14D20+1D12", "14D20+1D20",
          "15D20+1D4", "15D20+1D6", "15D20+1D8", "15D20+1D10", "15D20+1D12", "15D20+1D20",
          "16D20+1D4", "16D20+1D6", "16D20+1D8", "16D20+1D10", "16D20+1D12", "16D20+1D20",
          "17D20+1D4", "17D20+1D6", "17D20+1D8", "17D20+1D10", "17D20+1D12", "17D20+1D20",
          "18D20+1D4", "18D20+1D6", "18D20+1D8", "18D20+1D10", "18D20+1D12", "18D20+1D20",
          "19D20+1D4", "19D20+1D6", "19D20+1D8", "19D20+1D10", "19D20+1D12", "19D20+1D20",
          "20D20+1D4", "20D20+1D6", "20D20+1D8", "20D20+1D10", "20D20+1D12", "20D20+1D20",
          "20D20+1D100", "5D100", "6D100", "7D100", "8D100", "9D100", "10D100+100"
          ];
    
          let reshape_dice = dice_values[Math.floor(reshape_points)] || "1d4";
          let reshape_dice_with_re = `${reshape_dice}+${reshape_re}`;
          let reshape_dice_total = `(${reshape_dice_with_re})*${Math.floor(reshape_le / 10) + 1}`;
    
          let liquify_dice = dice_values[Math.floor(liquify_points)] || "1d4";
          let liquify_dice_with_re = `${liquify_dice}+${liquify_re}`;
          let liquify_dice_total = `(${liquify_dice_with_re})*${Math.floor(liquify_le / 10) + 1}`;
    
          let repair_armor_dice = dice_values[Math.floor(repair_armor_points)] || "1d4";
          let repair_armor_dice_with_re = `${repair_armor_dice}+${repair_armor_re}`;
          let repair_armor_dice_total = `(${repair_armor_dice_with_re})*${Math.floor(repair_armor_le / 10) + 1}`;
          let available = points - (liquify_points + repair_armor_points + reshape_points + form_points) || 0;
    
          setAttrs({
            psi_molecular_alteration_level: level,
            psi_molecular_alteration_available_points: available,
            psi_molecular_alteration_form_level: form_points,
            psi_molecular_alteration_repair_level: repair_level,
            psi_molecular_alteration_reshape_level: reshape_level,
            psi_molecular_alteration_liquify_level: liquify_points,
            psi_molecular_alteration_points_available: available,
            psi_molecular_alteration_reshape_dice: reshape_dice_total,
            psi_molecular_alteration_liquify_dice: liquify_dice_total,
            psi_molecular_alteration_repair_armor_dice: repair_armor_dice_total,
            psi_molecular_alteration_form_blueprint_bonus_2: form_cost_2,
            psi_molecular_alteration_form_blueprint_bonus_3: form_cost_3,
            psi_molecular_alteration_form_blueprint_bonus_4: form_cost_4,
            psi_molecular_alteration_form_blueprint_bonus_5: form_cost_5,
            psi_molecular_alteration_form_blueprint_bonus_6: form_cost_6,
            psi_molecular_alteration_form_blueprint_bonus_7: form_cost_7
          });
        }
      );
    }  
    on(
      "change:intelligence change:psi_molecular_alteration_points change:psi_molecular_alteration_reshape_points change:psi_molecular_alteration_reshape_re change:psi_molecular_alteration_reshape_le change:psi_molecular_alteration_level change:psi_molecular_alteration_liquify_points change:psi_molecular_alteration_liquify_re change:psi_molecular_alteration_liquify_le change:psi_molecular_alteration_repair_armor_points change:psi_molecular_alteration_repair_armor_re change:psi_molecular_alteration_repair_armor_le change:psi_molecular_alteration_form_points change:psi_molecular_alteration_form_tech_level change:psi_molecular_alteration_form_blueprint_cost_2 change:psi_molecular_alteration_form_blueprint_cost_3 change:psi_molecular_alteration_form_blueprint_cost_4 change:psi_molecular_alteration_form_blueprint_cost_5 change:psi_molecular_alteration_form_blueprint_cost_6 change:psi_molecular_alteration_form_blueprint_cost_7",
      function() {
        updateMolecularAlteration();
      }
    );
    
  
  /* Pyrokinesis */
  function updatePyrokinesis() {
    getAttrs(
      [
        "charisma",
        "psi_pyrokinesis_points",
        "psi_pyrokinesis_level",
        "psi_pyrokinesis_flame_tongue_points",
        "psi_pyrokinesis_flame_tongue_re",
        "psi_pyrokinesis_flame_tongue_le",
        "psi_pyrokinesis_freeze_points",
        "psi_pyrokinesis_freeze_re",
        "psi_pyrokinesis_freeze_le",
        "psi_pyrokinesis_temperature_points",
        "psi_pyrokinesis_temperature_re",
        "psi_pyrokinesis_temperature_le"
      ],
      function(values) {
        let charisma = parseInt(values.charisma) || 0;
        let points = parseInt(values.psi_pyrokinesis_points) || 0;
        let level = Math.floor(points / 5);
        let temperature_points = parseInt(values.psi_pyrokinesis_temperature_points) || 0;
        let temperature_re = parseInt(values.psi_pyrokinesis_temperature_re) || 0;
        let temperature_le = parseInt(values.psi_pyrokinesis_temperature_le) || 0;
        let flame_tongue_points = parseInt(values.psi_pyrokinesis_flame_tongue_points) || 0;
        let flame_tongue_re = parseInt(values.psi_pyrokinesis_flame_tongue_re) || 0;
        let flame_tongue_le = parseInt(values.psi_pyrokinesis_flame_tongue_le) || 0;
        let freeze_points = parseInt(values.psi_pyrokinesis_freeze_points) || 0;
        let freeze_re = parseInt(values.psi_pyrokinesis_freeze_re) || 0;
        let freeze_le = parseInt(values.psi_pyrokinesis_freeze_le) || 0;
  
        const dice_values = [
        "1d4", "1d6", "1d8", "1d10", "1d12", "1d20",
        "1D20+1D4", "1D20+1D6", "1D20+1D8", "1D20+1D10", "1D20+1D12", "1D20+1D20",
        "2D20+1D4", "2D20+1D6", "2D20+1D8", "2D20+1D10", "2D20+1D12", "2D20+2D20",
        "3D20+1D4", "3D20+1D6", "3D20+1D8", "3D20+1D10", "3D20+1D12", "3D20+3D20",
        "4D20+1D4", "4D20+1D6", "4D20+1D8", "4D20+1D10", "4D20+1D12", "4D20+4D20",
        "5D20+1D4", "5D20+1D6", "5D20+1D8", "5D20+1D10", "5D20+1D12", "5D20+1D20",
        "6D20+1D4", "6D20+1D6", "6D20+1D8", "6D20+1D10", "6D20+1D12", "6D20+1D20",
        "7D20+1D4", "7D20+1D6", "7D20+1D8", "7D20+1D10", "7D20+1D12", "7D20+1D20",
        "8D20+1D4", "8D20+1D6", "8D20+1D8", "8D20+1D10", "8D20+1D12", "8D20+1D20",
        "9D20+1D4", "9D20+1D6", "9D20+1D8", "9D20+1D10", "9D20+1D12", "9D20+1D20",
        "10D20+1D4", "10D20+1D6", "10D20+1D8", "10D20+1D10", "10D20+1D12", "10D20+1D20",
        "11D20+1D4", "11D20+1D6", "11D20+1D8", "11D20+1D10", "11D20+1D12", "11D20+1D20",
        "12D20+1D4", "12D20+1D6", "12D20+1D8", "12D20+1D10", "12D20+1D12", "12D20+1D20",
        "13D20+1D4", "13D20+1D6", "13D20+1D8", "13D20+1D10", "13D20+1D12", "13D20+1D20",
        "14D20+1D4", "14D20+1D6", "14D20+1D8", "14D20+1D10", "14D20+1D12", "14D20+1D20",
        "15D20+1D4", "15D20+1D6", "15D20+1D8", "15D20+1D10", "15D20+1D12", "15D20+1D20",
        "16D20+1D4", "16D20+1D6", "16D20+1D8", "16D20+1D10", "16D20+1D12", "16D20+1D20",
        "17D20+1D4", "17D20+1D6", "17D20+1D8", "17D20+1D10", "17D20+1D12", "17D20+1D20",
        "18D20+1D4", "18D20+1D6", "18D20+1D8", "18D20+1D10", "18D20+1D12", "18D20+1D20",
        "19D20+1D4", "19D20+1D6", "19D20+1D8", "19D20+1D10", "19D20+1D12", "19D20+1D20",
        "20D20+1D4", "20D20+1D6", "20D20+1D8", "20D20+1D10", "20D20+1D12", "20D20+1D20",
        "20D20+1D100", "5D100", "6D100", "7D100", "8D100", "9D100", "10D100+100"
        ];
  
        let temperature = Math.floor(Math.pow(temperature_points, 1.25)) * (1 + temperature_re / 500) + " Degrees";
  
        let flame_tongue_level = flame_tongue_points || 0;
        let flame_tongue_dice = dice_values[Math.floor(flame_tongue_points)] || "1d4";
        let flame_tongue_dice_with_re = `${flame_tongue_dice}+${flame_tongue_re}`;
        let flame_tongue_dice_total = `(${flame_tongue_dice_with_re})*${Math.floor(flame_tongue_le / 10) + 1}`;
  
        let freeze_level = freeze_points || 0;
        let freeze_dice = dice_values[Math.floor(freeze_points)] || "1d4";
        let freeze_dice_with_re = `${freeze_dice}+${freeze_re}`;
        let freeze_dice_total = `(${freeze_dice_with_re})*${Math.floor(freeze_le / 10) + 1}`;
  
        let available = level - Math.floor(temperature_points + flame_tongue_points + freeze_points) || 0;
  
        setAttrs({
          psi_pyrokinesis_level: level,
          psi_pyrokinesis_flame_tongue_level: flame_tongue_level,
          psi_pyrokinesis_freeze_level: freeze_level,
          psi_pyrokinesis_points_available: available,
          psi_pyrokinesis_temperature: temperature,
          psi_pyrokinesis_flame_tongue_dice: flame_tongue_dice_total,
          psi_pyrokinesis_freeze_dice: freeze_dice_total
        });
      }
    );
  }
  on(
    "change:charisma change:psi_pyrokinesis_points change:psi_pyrokinesis_temperature_points change:psi_pyrokinesis_temperature_re change:psi_pyrokinesis_temperature_le change:psi_pyrokinesis_level change:psi_pyrokinesis_flame_tongue_points change:psi_pyrokinesis_flame_tongue_re change:psi_pyrokinesis_flame_tongue_le change:psi_pyrokinesis_freeze_points change:psi_pyrokinesis_freeze_re change:psi_pyrokinesis_freeze_le",
    function() {
      updatePyrokinesis();
    }
  );
  
  
  
  /* Subatomic Alteration */
  on("change:charisma change:psi_subatomic_alteration_points change:psi_subatomic_alteration_level change:psi_subatomic_alteration_conversion_points change:psi_subatomic_alteration_conversion_points_re change:psi_subatomic_alteration_conversion_points_le", function() {
      getAttrs([
        "charisma",
        "psi_subatomic_alteration_points",
        "psi_subatomic_alteration_level",
        "psi_subatomic_alteration_conversion_points",
        "psi_subatomic_alteration_conversion_re",
        "psi_subatomic_alteration_conversion_le"
      ], function(values) {
        let intelligence = parseInt(values.intelligence) || 0;
        let points = parseInt(values.psi_subatomic_alteration_points) || 0;      
        let level = Math.floor(points / 5);
  
        let conversion_level = parseInt(values.psi_subatomic_alteration_conversion_points) || 0;
  
        setAttrs({
          psi_subatomic_alteration_level: level,
          psi_subatomic_alteration_points_available: level - (conversion_level),
          psi_subatomic_alteration_conversion_level: conversion_level
        });
      });
  });
  
  
  /* Subatomic Alteration Create / Convert */
const atomicMasses = {
  'Hydrogen': 1,   'Helium': 4,   'Lithium': 7,     'Beryllium': 9,
  'Boron': 11,     'Carbon': 12,  'Nitrogen': 14,   'Oxygen': 16,
  'Fluorine': 19,  'Neon': 20,    'Sodium': 23,     'Magnesium': 24,
  'Aluminum': 27,  'Silicon': 28, 'Phosphorus': 31, 'Sulfur': 32,
  'Chlorine': 35.5, 'Argon': 40,   'Potassium': 39,  'Calcium': 40,
  'Scandium': 45,  'Titanium': 48, 'Vanadium': 51,   'Chromium': 52,
  'Manganese': 55, 'Iron': 56,     'Cobalt': 59,     'Nickel': 59,
  'Copper': 64,    'Zinc': 65,     'Gallium': 70,    'Germanium': 73,
  'Arsenic': 75,   'Selenium': 79, 'Bromine': 80,    'Krypton': 84,
  'Rubidium': 85,  'Strontium': 88, 'Yttrium': 89,    'Zirconium': 91,
  'Niobium': 93,   'Molybdenum': 96, 'Technetium': 98, 'Ruthenium': 101,
  'Rhodium': 103,   'Palladium': 106, 'Silver': 107.87, 'Cadmium': 112.41,
  'Indium': 114.82, 'Tin': 118.71, 'Antimony': 121.76, 'Tellurium': 127.6,
  'Iodine': 126.9, 'Xenon': 131.29, 'Cesium': 132.91, 'Barium': 137.33,
  'Lanthanum': 138.91, 'Cerium': 140.12, 'Praseodymium': 140.91, 'Neodymium': 144.24,
  'Promethium': 145, 'Samarium': 150.36, 'Europium': 151.96, 'Gadolinium': 157.25,
  'Terbium': 158.93, 'Dysprosium': 162.5, 'Holmium': 164.93, 'Erbium': 167.26,
  'Thulium': 168.93, 'Ytterbium': 173.05, 'Lutetium': 174.97, 'Hafnium': 178.49,
  'Tantalum': 180.95, 'Tungsten': 183.84, 'Rhenium': 186.21, 'Osmium': 190.23,
  'Iridium': 192.22, 'Platinum': 195.08, 'Gold': 196.97, 'Mercury': 200.59,
  'Thallium': 204.38, 'Lead': 207.2, 'Bismuth': 208.98, 'Polonium': 208.98,
  'Astatine': 209.99, 'Radon': 222, 'Francium': 223, 'Radium': 226,
  'Actinium': 227, 'Thorium': 232.04, 'Protactinium': 231.04, 'Uranium': 238.03,
  'Neptunium': 237, 'Plutonium': 244, 'Americium': 243, 'Curium': 247,
  'Berkelium': 247, 'Californium': 251, 'Einsteinium': 252, 'Fermium': 257,
  'Mendelevium': 258, 'Nobelium': 259, 'Lawrencium': 262, 'Rutherfordium': 267,
  'Dubnium': 270, 'Seaborgium': 271, 'Bohrium': 270, 'Hassium': 277,
  'Meitnerium': 276, 'Darmstadtium': 281, 'Roentgenium': 280, 'Copernicium': 285,
  'Nihonium': 286, 'Flerovium': 289, 'Moscovium': 288, 'Livermorium': 293,
  'Tennessine': 294, 'Oganesson': 294, 'Corbomite': 588
};

    
  
      
      on('change:psi_subatomic_alteration_conversion_element_1', function() {
          getAttrs(['psi_subatomic_alteration_conversion_element_1'], function(values) {
              const selectedElement = values.psi_subatomic_alteration_conversion_element_1;
              const atomicMass = atomicMasses[selectedElement];
              setAttrs({
                  mass_1: Math.floor(atomicMass)
              });
          });
      });
      
      on('change:psi_subatomic_alteration_conversion_element_2', function() {
          getAttrs(['psi_subatomic_alteration_conversion_element_2'], function(values) {
              const selectedElement = values.psi_subatomic_alteration_conversion_element_2;
              const atomicMass = atomicMasses[selectedElement];
              setAttrs({
                  mass_2: Math.floor(atomicMass)
              });
          });
      });
      
      on('change:psi_subatomic_alteration_conversion_element_1 change:psi_subatomic_alteration_conversion_element_2', function() {
          getAttrs(['psi_subatomic_alteration_conversion_element_1', 'psi_subatomic_alteration_conversion_element_2'], function(values) {
              const element1 = values.psi_subatomic_alteration_conversion_element_1;
              const element2 = values.psi_subatomic_alteration_conversion_element_2;
              const atomicMass1 = atomicMasses[element1];
              const atomicMass2 = atomicMasses[element2];
              const massDifference = atomicMass1 - atomicMass2;
              setAttrs({
                  mass_difference: massDifference
              });
          });
      });
      
      const sizeMultiplier = {
          'Micro': 4,
          'Tiny': 16,
          'Small': 256,
          'Medium': 65536,
          'Large': 262144,
          'Huge': 1048576,  
      };
      
      const timeMultipliers  = {
          'Turns': 2,
          'Minutes': 60,
          'Hours': 3600,
          'Days': 86400,
      };
      
      function convertToTimeUnit(timeInTurns, unit) {
          return Math.floor(timeInTurns / timeMultipliers[unit]);
      }
      
      on('change:psi_subatomic_alteration_conversion_points change:psi_subatomic_alteration_conversion_le change:psi_subatomic_alteration_conversion_size change:mass_difference change:psi_subatomic_alteration_time_unit', function() {
          getAttrs(['psi_subatomic_alteration_conversion_size', 'mass_difference', 'psi_subatomic_alteration_conversion_le', 'psi_subatomic_alteration_time_unit', 'psi_subatomic_alteration_conversion_points'], function(values) {
              const selectedSize = values.psi_subatomic_alteration_conversion_size;
              const multiplier = sizeMultiplier[selectedSize];
              let mass = parseInt(values.mass_difference);
      
              let conversion_points = parseInt(values.psi_subatomic_alteration_conversion_points);
              let conversion_le = parseInt(values.psi_subatomic_alteration_conversion_le);
              let conversion_re = Math.floor(conversion_le / 10) || 0;
              let conversion_bonus = Math.floor(conversion_points + conversion_re) || 0;
              let time_option = values.psi_subatomic_alteration_time_unit;
              let re_needed = Math.floor(mass * multiplier);
              let total_time_turns = Math.floor(re_needed / conversion_bonus); // Time calculated in turns
              let total_time = convertToTimeUnit(total_time_turns, time_option); // Convert time to the selected unit and round down to nearest whole number
              setAttrs({
                  size_multiplier: multiplier,
                  psi_subatomic_alteration_conversion_re: conversion_re,
                  psi_subatomic_alteration_conversion_re_needed: re_needed,
                  psi_subatomic_alteration_conversion_time_needed: total_time
              });
          });
      });
     
  /* Telekinesis */
  function updateTelekinesis() {
    getAttrs(
      [
        "intelligence",
        "raw_energy",
        "psi_telekinesis_points",
        "psi_telekinesis_level",
        "psi_telekinesis_lift_points",
        "psi_telekinesis_lift_re",
        "psi_telekinesis_lift_le",
        "psi_telekinesis_blast_points",
        "psi_telekinesis_blast_re",
        "psi_telekinesis_blast_le",
        "psi_telekinesis_crush_points",
        "psi_telekinesis_crush_re",
        "psi_telekinesis_crush_le"
      ],
      function(values) {
        let intelligence = parseInt(values.intelligence) || 0;
        let points = parseInt(values.psi_telekinesis_points) || 0;
        let level = Math.floor(points / 5);
  
        // Blast calculations
        let blast_points = parseInt(values.psi_telekinesis_blast_points) || 0;
        let blast_re = parseInt(values.psi_telekinesis_blast_re) / 2 || 0;
        let blast_le = parseInt(values.psi_telekinesis_blast_le) || 0;
  
        const dice_values = [
        "1d4", "1d6", "1d8", "1d10", "1d12", "1d20",
        "1D20+1D4", "1D20+1D6", "1D20+1D8", "1D20+1D10", "1D20+1D12", "1D20+1D20",
        "2D20+1D4", "2D20+1D6", "2D20+1D8", "2D20+1D10", "2D20+1D12", "2D20+2D20",
        "3D20+1D4", "3D20+1D6", "3D20+1D8", "3D20+1D10", "3D20+1D12", "3D20+3D20",
        "4D20+1D4", "4D20+1D6", "4D20+1D8", "4D20+1D10", "4D20+1D12", "4D20+4D20",
        "5D20+1D4", "5D20+1D6", "5D20+1D8", "5D20+1D10", "5D20+1D12", "5D20+1D20",
        "6D20+1D4", "6D20+1D6", "6D20+1D8", "6D20+1D10", "6D20+1D12", "6D20+1D20",
        "7D20+1D4", "7D20+1D6", "7D20+1D8", "7D20+1D10", "7D20+1D12", "7D20+1D20",
        "8D20+1D4", "8D20+1D6", "8D20+1D8", "8D20+1D10", "8D20+1D12", "8D20+1D20",
        "9D20+1D4", "9D20+1D6", "9D20+1D8", "9D20+1D10", "9D20+1D12", "9D20+1D20",
        "10D20+1D4", "10D20+1D6", "10D20+1D8", "10D20+1D10", "10D20+1D12", "10D20+1D20",
        "11D20+1D4", "11D20+1D6", "11D20+1D8", "11D20+1D10", "11D20+1D12", "11D20+1D20",
        "12D20+1D4", "12D20+1D6", "12D20+1D8", "12D20+1D10", "12D20+1D12", "12D20+1D20",
        "13D20+1D4", "13D20+1D6", "13D20+1D8", "13D20+1D10", "13D20+1D12", "13D20+1D20",
        "14D20+1D4", "14D20+1D6", "14D20+1D8", "14D20+1D10", "14D20+1D12", "14D20+1D20",
        "15D20+1D4", "15D20+1D6", "15D20+1D8", "15D20+1D10", "15D20+1D12", "15D20+1D20",
        "16D20+1D4", "16D20+1D6", "16D20+1D8", "16D20+1D10", "16D20+1D12", "16D20+1D20",
        "17D20+1D4", "17D20+1D6", "17D20+1D8", "17D20+1D10", "17D20+1D12", "17D20+1D20",
        "18D20+1D4", "18D20+1D6", "18D20+1D8", "18D20+1D10", "18D20+1D12", "18D20+1D20",
        "19D20+1D4", "19D20+1D6", "19D20+1D8", "19D20+1D10", "19D20+1D12", "19D20+1D20",
        "20D20+1D4", "20D20+1D6", "20D20+1D8", "20D20+1D10", "20D20+1D12", "20D20+1D20",
        "20D20+1D100", "5D100", "6D100", "7D100", "8D100", "9D100", "10D100+100"
        ];
  
        // Blast Calculations
        let blast_dice = dice_values[Math.floor(blast_points / 5)] || "1d4";
        let blast_dice_with_re = `${blast_dice}+${blast_re}`;
        let blast_dice_total = `(${blast_dice_with_re})*${Math.floor(blast_le / 20) + 1}`;
  
        // Lift calculations
        let lift_points = parseInt(values.psi_telekinesis_lift_points) || 0;
        let lift_re = parseInt(values.psi_telekinesis_lift_re) || 0;
        let lift_le = parseInt(values.psi_telekinesis_lift_le) || 0;
  
        let passive_lift = lift_re * 5 + Math.floor(lift_points);
        let burn_lift = passive_lift * Math.floor(lift_le);
  
        // Crush calculations
        let crush_points = parseInt(values.psi_telekinesis_crush_points) || 0;
        let crush_re = parseInt(values.psi_telekinesis_crush_re) || 0;
        let crush_le = parseInt(values.psi_telekinesis_crush_le) || 0;
  
        let crush_dice = dice_values[Math.floor(crush_points)] || "1d4";
        let crush_dice_with_re = `${crush_dice}+${crush_re}`;
        let crush_dice_total = `(${crush_dice_with_re})*${Math.floor(crush_le / 5) + 1}`;
  
        let available = level - Math.floor(blast_points + lift_points + crush_points) || 0;
  
        setAttrs({
          psi_telekinesis_level: level,
          psi_telekinesis_crush_level: crush_points,
          psi_telekinesis_blast_level: blast_points,
          psi_telekinesis_points_available: available,
          psi_telekinesis_blast_dice: blast_dice_total,
          psi_telekinesis_lift_passive: `${passive_lift} kg`,
          psi_telekinesis_lift_burn: `${burn_lift} kg`,
          psi_telekinesis_crush_dice: crush_dice_total
        });
      }
    );
  }
  on(
    "change:intelligence change:raw_energy change:psi_telekinesis_points change:psi_telekinesis_lift_points change:psi_telekinesis_lift_re change:psi_telekinesis_lift_le change:psi_telekinesis_level change:psi_telekinesis_blast_points change:psi_telekinesis_blast_re change:psi_telekinesis_blast_le change:psi_telekinesis_crush_points change:psi_telekinesis_crush_re change:psi_telekinesis_crush_le",
    function() {
      updateTelekinesis();
    }
  );
  
  
  /* Anti Psionics */
  function updateAntiPsionics() {
    getAttrs(
      [
        "charisma",
        "raw_energy",
        "psi_anti_psionics_points",
        "psi_anti_psionics_oppress_points",
        "psi_anti_psionics_oppress_re",
        "psi_anti_psionics_oppress_le",
        "psi_anti_psionics_suppress_points",
        "psi_anti_psionics_suppress_re",
        "psi_anti_psionics_suppress_le",
        "psi_anti_psionics_crush_points",
        "psi_anti_psionics_crush_re",
        "psi_anti_psionics_crush_le"
      ],
      function(values) {
        let charisma = parseInt(values.charisma) || 0;
        let psi_points = parseInt(values.psi_anti_psionics_points) || 0;
        let level = Math.floor(psi_points / 5) || 0;
  
        // Suppress calculations
        let suppress_points = parseInt(values.psi_anti_psionics_suppress_points) || 0;
        let suppress_re = parseInt(values.psi_anti_psionics_suppress_re) || 0;
        let suppress_le = parseInt(values.psi_anti_psionics_suppress_le) || 0;
        let suppress_level = Math.floor(suppress_points) || 0;
        let suppress_bonus = suppress_re * (suppress_level + 1);
  
        // Oppressive Aura calculations
        let oppress_points = parseInt(values.psi_anti_psionics_oppress_points) || 0;
        let oppress_re = parseInt(values.psi_anti_psionics_oppress_re) || 0;
        let oppress_le = parseInt(values.psi_anti_psionics_oppress_le) || 0;
        let oppress_level = Math.floor(oppress_points) || 0;
        let oppression = oppress_level + parseInt(values.raw_energy) + oppress_re + Math.floor(oppress_le / 10) || 0;
  
        // Crush calculations
        let crush_points = parseInt(values.psi_anti_psionics_crush_points) || 0;
        let crush_re = parseInt(values.psi_anti_psionics_crush_re) || 0;
        let crush_le = parseInt(values.psi_anti_psionics_crush_le) || 0;
        let crush_level = Math.floor(crush_points) || 0;
  
        let available = level - (suppress_level + oppress_level + crush_level);
  
        const dice_values = [
        "1d4", "1d6", "1d8", "1d10", "1d12", "1d20",
        "1D20+1D4", "1D20+1D6", "1D20+1D8", "1D20+1D10", "1D20+1D12", "1D20+1D20",
        "2D20+1D4", "2D20+1D6", "2D20+1D8", "2D20+1D10", "2D20+1D12", "2D20+2D20",
        "3D20+1D4", "3D20+1D6", "3D20+1D8", "3D20+1D10", "3D20+1D12", "3D20+3D20",
        "4D20+1D4", "4D20+1D6", "4D20+1D8", "4D20+1D10", "4D20+1D12", "4D20+4D20",
        "5D20+1D4", "5D20+1D6", "5D20+1D8", "5D20+1D10", "5D20+1D12", "5D20+1D20",
        "6D20+1D4", "6D20+1D6", "6D20+1D8", "6D20+1D10", "6D20+1D12", "6D20+1D20",
        "7D20+1D4", "7D20+1D6", "7D20+1D8", "7D20+1D10", "7D20+1D12", "7D20+1D20",
        "8D20+1D4", "8D20+1D6", "8D20+1D8", "8D20+1D10", "8D20+1D12", "8D20+1D20",
        "9D20+1D4", "9D20+1D6", "9D20+1D8", "9D20+1D10", "9D20+1D12", "9D20+1D20",
        "10D20+1D4", "10D20+1D6", "10D20+1D8", "10D20+1D10", "10D20+1D12", "10D20+1D20",
        "11D20+1D4", "11D20+1D6", "11D20+1D8", "11D20+1D10", "11D20+1D12", "11D20+1D20",
        "12D20+1D4", "12D20+1D6", "12D20+1D8", "12D20+1D10", "12D20+1D12", "12D20+1D20",
        "13D20+1D4", "13D20+1D6", "13D20+1D8", "13D20+1D10", "13D20+1D12", "13D20+1D20",
        "14D20+1D4", "14D20+1D6", "14D20+1D8", "14D20+1D10", "14D20+1D12", "14D20+1D20",
        "15D20+1D4", "15D20+1D6", "15D20+1D8", "15D20+1D10", "15D20+1D12", "15D20+1D20",
        "16D20+1D4", "16D20+1D6", "16D20+1D8", "16D20+1D10", "16D20+1D12", "16D20+1D20",
        "17D20+1D4", "17D20+1D6", "17D20+1D8", "17D20+1D10", "17D20+1D12", "17D20+1D20",
        "18D20+1D4", "18D20+1D6", "18D20+1D8", "18D20+1D10", "18D20+1D12", "18D20+1D20",
        "19D20+1D4", "19D20+1D6", "19D20+1D8", "19D20+1D10", "19D20+1D12", "19D20+1D20",
        "20D20+1D4", "20D20+1D6", "20D20+1D8", "20D20+1D10", "20D20+1D12", "20D20+1D20",
        "20D20+1D100", "5D100", "6D100", "7D100", "8D100", "9D100", "10D100+100"
        ];
  
        let crush_dice = dice_values[Math.floor(crush_points)] || "1d4";
        let crush_dice_with_re = `${crush_dice}+${crush_re}`;
        let crush_dice_total = `(${crush_dice_with_re})*${Math.floor(crush_le / 10) + 1}`;
  
        setAttrs({
          psi_anti_psionics_level: level,
          psi_anti_psionics_suppress_bonus: suppress_bonus,
          psi_anti_psionics_suppress_level: suppress_level,
          psi_anti_psionics_oppressive_aura_level: oppress_level,
          psi_anti_psionics_oppression_roll: oppression,
          psi_anti_psionics_crush_level: crush_level,
          psi_anti_psionics_crush_dice: crush_dice_total,
          psi_anti_psionics_available_points: available
        });
      }
    );
  }
  
  on(
    "change:charisma change:raw_energy change:psi_anti_psionics_points change:psi_anti_psionics_oppress_points change:psi_anti_psionics_oppress_re change:psi_anti_psionics_oppress_le change:psi_anti_psionics_suppress_points change:psi_anti_psionics_suppress_re change:psi_anti_psionics_suppress_le change:psi_anti_psionics_crush_points change:psi_anti_psionics_crush_re change:psi_anti_psionics_crush_le",
    function() {
      updateAntiPsionics();
    }
  );
  
  
    
    /* DICE PROGRESSION CHART */
    
    const dice_values = [
    "1d4", "1d6", "1d8", "1d10", "1d12", "1d20",
        "1D20+1D4", "1D20+1D6", "1D20+1D8", "1D20+1D10", "1D20+1D12", "1D20+1D20",
        "2D20+1D4", "2D20+1D6", "2D20+1D8", "2D20+1D10", "2D20+1D12", "2D20+2D20",
        "3D20+1D4", "3D20+1D6", "3D20+1D8", "3D20+1D10", "3D20+1D12", "3D20+3D20",
        "4D20+1D4", "4D20+1D6", "4D20+1D8", "4D20+1D10", "4D20+1D12", "4D20+4D20",
        "5D20+1D4", "5D20+1D6", "5D20+1D8", "5D20+1D10", "5D20+1D12", "5D20+1D20",
        "6D20+1D4", "6D20+1D6", "6D20+1D8", "6D20+1D10", "6D20+1D12", "6D20+1D20",
        "7D20+1D4", "7D20+1D6", "7D20+1D8", "7D20+1D10", "7D20+1D12", "7D20+1D20",
        "8D20+1D4", "8D20+1D6", "8D20+1D8", "8D20+1D10", "8D20+1D12", "8D20+1D20",
        "9D20+1D4", "9D20+1D6", "9D20+1D8", "9D20+1D10", "9D20+1D12", "9D20+1D20",
        "10D20+1D4", "10D20+1D6", "10D20+1D8", "10D20+1D10", "10D20+1D12", "10D20+1D20",
        "11D20+1D4", "11D20+1D6", "11D20+1D8", "11D20+1D10", "11D20+1D12", "11D20+1D20",
        "12D20+1D4", "12D20+1D6", "12D20+1D8", "12D20+1D10", "12D20+1D12", "12D20+1D20",
        "13D20+1D4", "13D20+1D6", "13D20+1D8", "13D20+1D10", "13D20+1D12", "13D20+1D20",
        "14D20+1D4", "14D20+1D6", "14D20+1D8", "14D20+1D10", "14D20+1D12", "14D20+1D20",
        "15D20+1D4", "15D20+1D6", "15D20+1D8", "15D20+1D10", "15D20+1D12", "15D20+1D20",
        "16D20+1D4", "16D20+1D6", "16D20+1D8", "16D20+1D10", "16D20+1D12", "16D20+1D20",
        "17D20+1D4", "17D20+1D6", "17D20+1D8", "17D20+1D10", "17D20+1D12", "17D20+1D20",
        "18D20+1D4", "18D20+1D6", "18D20+1D8", "18D20+1D10", "18D20+1D12", "18D20+1D20",
        "19D20+1D4", "19D20+1D6", "19D20+1D8", "19D20+1D10", "19D20+1D12", "19D20+1D20",
        "20D20+1D4", "20D20+1D6", "20D20+1D8", "20D20+1D10", "20D20+1D12", "20D20+1D20",
        "20D20+1D100", "5D100", "6D100", "7D100", "8D100", "9D100", "10D100+100"
    ];
    
    /* Inventory Armor Dice Auto-Populator */
    on("change:armortechlevel", function(eventInfo) {
      getAttrs(["armortechlevel"], function(values) {
        let tl = parseInt(values.armortechlevel) / dc || 0;
        let dc = parseInt(values.armorhealthmaxcost) || 0;
        let dice = dice_values[tl]                   || 0;
        setAttrs({ armordice: dice });
      });
    });
    
    on("change:armortechlevel", function(eventInfo) {
      getAttrs(["armortechlevel"], function(values) {
        let tl = parseInt(values.armortechlevel);
        let dice = dice_values[tl];
        setAttrs({ shieldarmordice: dice });
      });
    });
    
    
    on('change:race', function(eventInfo) {
      const values = getAttrs(['race'], function(values) {
        const race = values.race;
    
        if (race === "Human") {
          setAttrs({
            racial_str: 1,
            racial_dex: 1,
            racial_con: 1,
            racial_int: 1,
            racial_wis: 1,
            racial_cha: 1,
            racial_movement: 15,
            racial_hp_base: 15,
            racial_base_lc: 30
          });
        } else if (race === "Sollox") {
          setAttrs({
            racial_str: 0,
            racial_dex: 0,
            racial_con: 0,
            racial_int: 2,
            racial_wis: 2,
            racial_cha: 2,
            racial_movement: 15,
            racial_hp_base: 15,
            racial_base_lc: 20
          });
        } else if (race === "Talaxian") {
          setAttrs({
            racial_str: 2,
            racial_dex: 2,
            racial_con: 2,
            racial_int: 0,
            racial_wis: 0,
            racial_cha: 0,
            racial_movement: 15,
            racial_hp_base: 25,
            racial_base_lc: 20
          });
        } else if (race === "Thorn") {
          setAttrs({
            racial_str: 0,
            racial_dex: 0,
            racial_con: 1,
            racial_int: 1,
            racial_wis: 2,
            racial_cha: 2,
            racial_movement: 15,
            racial_hp_base: 20,
            racial_base_lc: 20
          });
        } else {
          setAttrs({
            racial_str: 1,
            racial_dex: 1,
            racial_con: 1,
            racial_int: 1,
            racial_wis: 1,
            racial_cha: 1,
            racial_movement: 15,
            racial_hp_base: 15,
            racial_base_lc: 30
          });
        }
      });
    });

/* NPC Section */

/* Attributes */
function updateNPCAttributes() {
  getAttrs(
    [
      'npc_cyb_str_bonus', 'npc_gen_str_bonus', 'npc_art_str_bonus', 'npc_misc_str_bonus',
      'npc_temp_str_bonus', 'npc_quirk_str_bonus', 'npc_armor_str_mod', 'npc_psi_str_bonus',

      'npc_cyb_dex_bonus', 'npc_gen_dex_bonus', 'npc_art_dex_bonus', 'npc_misc_dex_bonus',
      'npc_temp_dex_bonus', 'npc_quirk_dex_bonus', 'npc_armor_dex_mod', 'npc_psi_dex_bonus',

      'npc_cyb_con_bonus', 'npc_gen_con_bonus', 'npc_art_con_bonus', 'npc_misc_con_bonus',
      'npc_temp_con_bonus', 'npc_quirk_con_bonus', 'npc_armor_con_mod', 'npc_psi_con_bonus',

      'npc_cyb_int_bonus', 'npc_gen_int_bonus', 'npc_art_int_bonus', 'npc_misc_int_bonus',
      'npc_temp_int_bonus', 'npc_quirk_int_bonus', 'npc_armor_int_mod', 'npc_psi_int_bonus',

      'npc_cyb_wis_bonus', 'npc_gen_wis_bonus', 'npc_art_wis_bonus', 'npc_misc_wis_bonus',
      'npc_temp_wis_bonus', 'npc_quirk_wis_bonus', 'npc_armor_wis_mod', 'npc_psi_wis_bonus',

      'npc_cyb_cha_bonus', 'npc_gen_cha_bonus', 'npc_art_cha_bonus', 'npc_misc_cha_bonus',
      'npc_temp_cha_bonus', 'npc_quirk_cha_bonus', 'npc_armor_cha_mod', 'npc_psi_cha_bonus'
    ],
    function (values) {
      /* Strength Values */
      let c_str = parseInt(values.npc_cyb_str_bonus) || 0;
      let g_str = parseInt(values.npc_gen_str_bonus) || 0;
      let a_str = parseInt(values.npc_art_str_bonus) || 0;
      let m_str = parseInt(values.npc_misc_str_bonus) || 0;
      let t_str = parseInt(values.npc_temp_str_bonus) || 0;
      let q_str = parseInt(values.npc_quirk_str_bonus) || 0;
      let ar_str = parseInt(values.npc_armor_str_mod) || 0;
      let psi_str = parseInt(values.npc_psi_str_bonus) || 0;
      let str = c_str + g_str + a_str + m_str + t_str + q_str + ar_str + psi_str;

      /* Dexterity Values */
      let c_dex = parseInt(values.npc_cyb_dex_bonus) || 0;
      let g_dex = parseInt(values.npc_gen_dex_bonus) || 0;
      let a_dex = parseInt(values.npc_art_dex_bonus) || 0;
      let m_dex = parseInt(values.npc_misc_dex_bonus) || 0;
      let t_dex = parseInt(values.npc_temp_dex_bonus) || 0;
      let q_dex = parseInt(values.npc_quirk_dex_bonus) || 0;
      let ar_dex = parseInt(values.npc_armor_dex_mod) || 0;
      let psi_dex = parseInt(values.npc_psi_dex_bonus) || 0;
      let dex = c_dex + g_dex + a_dex + m_dex + t_dex + q_dex + ar_dex + psi_dex;

      /* Constitution Values */
      let c_con = parseInt(values.npc_cyb_con_bonus) || 0;
      let g_con = parseInt(values.npc_gen_con_bonus) || 0;
      let a_con = parseInt(values.npc_art_con_bonus) || 0;
      let m_con = parseInt(values.npc_misc_con_bonus) || 0;
      let t_con = parseInt(values.npc_temp_con_bonus) || 0;
      let q_con = parseInt(values.npc_quirk_con_bonus) || 0;
      let ar_con = parseInt(values.npc_armor_con_mod) || 0;
      let psi_con = parseInt(values.npc_psi_con_bonus) || 0;
      let con = c_con + g_con + a_con + m_con + t_con + q_con + ar_con + psi_con;
      
      /* Intelligence Values */
      let c_int = parseInt(values.npc_cyb_int_bonus) || 0;
      let g_int = parseInt(values.npc_gen_int_bonus) || 0;
      let a_int = parseInt(values.npc_art_int_bonus) || 0;
      let m_int = parseInt(values.npc_misc_int_bonus) || 0;
      let t_int = parseInt(values.npc_temp_int_bonus) || 0;
      let q_int = parseInt(values.npc_quirk_int_bonus) || 0;
      let ar_int = parseInt(values.npc_armor_int_mod) || 0;
      let psi_int = parseInt(values.npc_psi_int_bonus) || 0;
      let int = c_int + g_int + a_int + m_int + t_int + q_int + ar_int + psi_int;

      /* Wisdom Values */
      let c_wis = parseInt(values.npc_cyb_wis_bonus) || 0;
      let g_wis = parseInt(values.npc_gen_wis_bonus) || 0;
      let a_wis = parseInt(values.npc_art_wis_bonus) || 0;
      let m_wis = parseInt(values.npc_misc_wis_bonus) || 0;
      let t_wis = parseInt(values.npc_temp_wis_bonus) || 0;
      let q_wis = parseInt(values.npc_quirk_wis_bonus) || 0;
      let ar_wis = parseInt(values.npc_armor_wis_mod) || 0;
      let psi_wis = parseInt(values.npc_psi_wis_bonus) || 0;
      let wis = c_wis + g_wis + a_wis + m_wis + t_wis + q_wis + ar_wis + psi_wis;

      /* Charisma Values */
      let c_cha = parseInt(values.npc_cyb_cha_bonus) || 0;
      let g_cha = parseInt(values.npc_gen_cha_bonus) || 0;
      let a_cha = parseInt(values.npc_art_cha_bonus) || 0;
      let m_cha = parseInt(values.npc_misc_cha_bonus) || 0;
      let t_cha = parseInt(values.npc_temp_cha_bonus) || 0;
      let q_cha = parseInt(values.npc_quirk_cha_bonus) || 0;
      let ar_cha = parseInt(values.npc_armor_cha_mod) || 0;
      let psi_cha = parseInt(values.npc_psi_cha_bonus) || 0;
      let cha = c_cha + g_cha + a_cha + m_cha + t_cha + q_cha + ar_cha + psi_cha;

      setAttrs({
        npc_str_bonus: str,
        npc_dex_bonus: dex,
        npc_con_bonus: con,
        npc_int_bonus: int,
        npc_wis_bonus: wis,
        npc_cha_bonus: cha,
        npc_max_hp: (str * con)
      });
    }
  );
}
on(
  'change:npc_cyb_str_bonus change:npc_gen_str_bonus change:npc_art_str_bonus change:npc_misc_str_bonus change:npc_temp_str_bonus change:npc_quirk_str_bonus change:npc_armor_str_mod change:npc_psi_str_bonus ' +
  'change:npc_cyb_dex_bonus change:npc_gen_dex_bonus change:npc_art_dex_bonus change:npc_misc_dex_bonus change:npc_temp_dex_bonus change:npc_quirk_dex_bonus change:npc_armor_dex_mod change:npc_psi_dex_bonus ' +
  'change:npc_cyb_con_bonus change:npc_gen_con_bonus change:npc_art_con_bonus change:npc_misc_con_bonus change:npc_temp_con_bonus change:npc_quirk_con_bonus change:npc_armor_con_mod change:npc_psi_con_bonus ' +
  'change:npc_cyb_int_bonus change:npc_gen_int_bonus change:npc_art_int_bonus change:npc_misc_int_bonus change:npc_temp_int_bonus change:npc_quirk_int_bonus change:npc_armor_int_mod change:npc_psi_int_bonus ' +
  'change:npc_cyb_wis_bonus change:npc_gen_wis_bonus change:npc_art_wis_bonus change:npc_misc_wis_bonus change:npc_temp_wis_bonus change:npc_quirk_wis_bonus change:npc_armor_wis_mod change:npc_psi_wis_bonus ' +
  'change:npc_cyb_cha_bonus change:npc_gen_cha_bonus change:npc_art_cha_bonus change:npc_misc_cha_bonus change:npc_temp_cha_bonus change:npc_quirk_cha_bonus change:npc_armor_cha_mod change:npc_psi_cha_bonus',
  function() {
    updateNPCAttributes();
  }
);

on("change:image_url", function() {
  getAttrs(["image_url"], function(values) {
      setAttrs({
          calculated_image_url: values.image_url
      });
  });
});

  /* Updates Properties on Ship Tab */
  function updateShipDefenses() {
    getAttrs(['ship_max_hp_cost', 'ship_armor_multiplier_cost', 'ship_p_plus_cost', 'ship_damage_reduction_cost', 'ship_regeneration_cost', 'ship_armor_defense_cost', 'ship_armor_tl_points'], function(values) {
        let armor_tl = parseInt(values.ship_armor_tl_points) || 0;
        let hp_max_cost = parseInt(values.ship_max_hp_cost) || 0;
        let armor_mult_cost = parseInt(values.ship_armor_multiplier_cost) || 1;
        let p_plus_cost = parseInt(values.ship_p_plus_cost) || 1;
        let dmg_red_cost = parseInt(values.ship_damage_reduction_cost) || 0;
        let regen_cost = parseInt(values.ship_regeneration_cost) || 0;
        let ards_cost = parseInt(values.ship_armor_defense_cost) || 0;
        
        let armor_mult = Math.floor(armor_tl / armor_mult_cost) || 1;
        let max_hp = Math.floor((armor_tl / hp_max_cost) * 100) * armor_mult || 0; // changed mult_cost to armor_mult
        let p_plus = Math.floor(armor_tl / p_plus_cost) || 0;
        let dmg_red = Math.floor((armor_tl * 16) / dmg_red_cost) || 100;
        let regen = Math.floor((armor_tl * 10) / regen_cost) || 0;
        let ards = Math.floor(armor_tl / ards_cost) + 10 || 0;

        setAttrs({
            ship_armor_tl: armor_tl,
            ship_max_hp: max_hp,
            ship_armor_multiplier: armor_mult,
            ship_p_plus: p_plus,
            ship_damage_reduction: dmg_red,
            ship_regeneration: regen,
            ship_armor_defense_bonus: ards
        });
    });
}

on('change:ship_max_hp_cost change:ship_armor_multiplier_cost change:ship_p_plus_cost change:ship_damage_reduction_cost change:ship_regeneration_cost change:ship_armor_defense_cost change:ship_armor_tl_points', function(eventInfo) {
    updateShipDefenses();
});

function updateShipShields() {
  getAttrs(['ship_shield_hp_cost', 'ship_shield_multiplier_cost', 'ship_shield_p_plus_cost', 'ship_shield_damage_reduction_cost', 'ship_shield_regeneration_cost', 'ship_shield_defense_cost', 'ship_shield_tl_points'], function(values) {
      let shield_tl = parseInt(values.ship_shield_tl_points) || 0;
      let hp_shield_cost = parseInt(values.ship_shield_hp_cost) || 0;
      let shield_mult_cost = parseInt(values.ship_shield_multiplier_cost) || 1;
      let p_plus_shield_cost = parseInt(values.ship_shield_p_plus_cost) || 1;
      let dmg_red_shield_cost = parseInt(values.ship_shield_damage_reduction_cost) || 0;
      let regen_shield_cost = parseInt(values.ship_shield_regeneration_cost) || 0;
      let ards_shield_cost = parseInt(values.ship_shield_defense_cost) || 0;
      
      let shield_mult = Math.floor(shield_tl / shield_mult_cost) || 1;
      let max_shield_hp = Math.floor((shield_tl / hp_shield_cost) * 100) * shield_mult || 0;
      let p_plus_shield = Math.floor(shield_tl / p_plus_shield_cost) || 0;
      let dmg_red_shield = Math.floor((shield_tl * 16) / dmg_red_shield_cost) || 100;
      let regen_shield = Math.floor((shield_tl * 10) / regen_shield_cost) || 0;
      let ards_shield = Math.floor(shield_tl / ards_shield_cost) + 10 || 0;

      setAttrs({
          ship_shield_tl: shield_tl,
          ship_max_shield_hp: max_shield_hp,
          ship_shield_multiplier: shield_mult,
          ship_shield_p_plus: p_plus_shield,
          ship_shield_damage_reduction: dmg_red_shield,
          ship_shield_regeneration: regen_shield,
          ship_shield_defense_bonus: ards_shield
      });
  });
}

on('change:ship_shield_hp_cost change:ship_shield_multiplier_cost change:ship_shield_p_plus_cost change:ship_shield_damage_reduction_cost change:ship_shield_regeneration_cost change:ship_shield_defense_cost change:ship_shield_tl_points', function(eventInfo) {
  updateShipShields();
});

/* Updates Ship Defense Score */
function updateShipDefenseScore() {
  getAttrs(['ship_shield_defense_bonus', 'ship_armor_defense_bonus', 'psi_deflection_ship_defense_bonus', 'ship_misc_defense_bonus', 'ship_misc_computer_defense_bonus'], function(values) {
      let srds = parseInt(values.ship_shield_defense_bonus) || 0;
      let ards = parseInt(values.ship_armor_defense_bonus) || 0;
      let psi = parseInt(values.psi_deflection_ship_defense_bonus) || 0;
      let misc = parseInt(values.ship_misc_defense_bonus) || 0;
      let cds = parseInt(values.ship_computer_defense_bonus) || 0;
      let misc_cds = parseInt(values.ship_misc_computer_defense_bonus) ||0; 

      let def = 10 + srds + ards + psi + misc; // Removed "|| 0" because it's unnecessary
      let full_cds = 10 + cds + misc_cds;
      setAttrs({
          ship_defense_score: def,
          ship_computer_defense_score: full_cds
      });
  });
}

// Triggers updateShipDefenseScore function when any of the listed attributes changes
on('change:ship_shield_defense_bonus change:ship_armor_defense_bonus change:psi_deflection_ship_defense_bonus change:ship_misc_defense_bonus change:ship_misc_computer_defense_bonus', function() {
  updateShipDefenseScore();
});

function updateShipDrive() {
  getAttrs(['ship_drive', 'ship_drive_bonus', 'ship_drive_points'], function(values) {
    let points = parseInt(values.ship_drive_points) || 0;
    let bonus = parseInt(values.ship_drive_bonus) || 0;
    let tl = Math.floor(points / 2) || 0;
    let drive = values.ship_drive;
    let speed = "";
    
    if (drive == "Atmo Prop.") {
      speed = ((tl + bonus) * 10) + " KPH ";
    } else if (drive == "Rockets") {
      speed = Math.floor((tl + bonus) ** 1.5) + " KP/s ";
    } else if (drive == "Ion 1") {
      speed = ((1 + bonus) * 1.1) + " LY/Year ";
    } else if (drive == "Nuclear") {
      speed = (1 + bonus) + " LY/Month ";
    } else if (drive == "Ion 2") {
      speed = (1 + bonus) + " LY/Week ";
    } else if (drive == "EM Drive*") {
      speed = (1 + bonus) + (tl - 40) + " LY/Day ";
    } else if (drive == "EM Drive**") {
      speed = (5 + bonus) + ((tl - 50) * 2) + " LY/Day ";
    } else if (drive == "Fusion") {
      speed = (10 + bonus) + ((tl - 50) * 2) + " LY/Day ";
    } else if (drive == "EM Drive***") {
      speed = (1 + bonus) + (tl - 64) + " LY/Hour ";
    } else if (drive == "Gravity Drive") {
      speed = ((3 + bonus) +(tl-64) ) + " LY/Day ";
    } else {
      speed = "0";
    }
    
    // Now, setting the calculated speed attribute
    setAttrs({
        ship_drive_speed: speed,
        ship_drive_tl: tl + bonus
    });
  });
}

// Triggers updateShipDefenseScore function when any of the listed attributes changes
on('change:ship_drive change:ship_drive_bonus change:ship_drive_points change:ship_drive_speed', function() {
  updateShipDrive();
});



  </script>
  

